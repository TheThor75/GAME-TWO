(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6614],{79755:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-business/settings",function(){return t(97231)}])},92265:function(n,e,t){"use strict";t.d(e,{Z:function(){return f}});var i=t(47568),s=t(10253),r=t(97582),u=t(3732),o=t(11215),c=t(4519),a=t(61437),l=t(67294),d=t(33299);function f(){var n=(0,s.Z)((0,a.Z)("business.settings.ai",null),3),e=n[0],t=n[1],f=n[2],v=(0,s.Z)((0,a.Z)("business.loadingAiSettings",!1),3),g=v[0],p=v[1],y=v[2],h=(0,s.Z)((0,a.Z)("business.settings.ai.businessId",null),3),b=h[1],_=h[2],Z=(0,o.Z)(),m=Z.current,w=Z.reloadBusinesses,S=(0,d.useSession)().data,C=!!(null===S||void 0===S?void 0:S.user),E=(0,c.Z)(),A=E.get,k=E.post,N=function(){var n=(0,i.Z)((function(){var n,e;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return b(null===m||void 0===m?void 0:m._id),p(!0),[4,A("/business/get-settings")];case 1:return(n=i.sent())&&!0===n.status&&n.content&&(e=n.content.ai||{model:"better",language:"en"},(0,u.Fs)("business.settings.ai",e),t(e)),p(!1),[2,n]}}))}));return function(){return n.apply(this,arguments)}}(),O=function(){var n=(0,i.Z)((function(){var n,t,i=arguments;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return n=!(i.length>0&&void 0!==i[0])||i[0],[4,k("/business/save-settings",{path:"ai",value:e})];case 1:return(t=s.sent())&&!0===t.status&&(w(),n&&u.Z9.success("Settings saved!")),[2,t]}}))}));return function(){return n.apply(this,arguments)}}();return(0,l.useEffect)((function(){C&&(null===m||void 0===m?void 0:m._id)&&(!f.current&&!y.current||_.current!==(null===m||void 0===m?void 0:m._id))&&N()}),[m,C]),{aiSettings:e,setAiSettings:t,loadingAiSettings:g,getAiSettings:N,saveAiSettings:O,aiSettingsRef:f}}},52699:function(n,e,t){"use strict";t.d(e,{P:function(){return f},Z:function(){return v}});var i=t(47568),s=t(10253),r=t(97582),u=t(3732),o=t(11215),c=t(4519),a=t(61437),l=t(67294),d=t(33299),f=function(n){var e,t,i,s="";(null===n||void 0===n||null===(e=n.office)||void 0===e?void 0:e.address)&&(s+=n.office.address.line1?"".concat(n.office.address.line1,", "):"",s+=n.office.address.line2?"".concat(n.office.address.line2,", "):"",s+=n.office.address.city?"".concat(n.office.address.city,", "):"",s+=n.office.address.state?"".concat(n.office.address.state,", "):"",s+=n.office.address.country?null!==(i=null===(t=u.hW.find((function(e){return e.code===n.office.address.country.toUpperCase()})))||void 0===t?void 0:t.name)&&void 0!==i?i:"".concat(n.office.address.country," "):"",s+=n.office.address.postalCode?", ".concat(n.office.address.postalCode):"");return s.trim()};function v(){var n=(0,s.Z)((0,a.Z)("business.configs",null),3),e=n[0],t=n[1],v=n[2],g=(0,s.Z)((0,a.Z)("business.loadingConfigs",!1),3),p=g[0],y=g[1],h=g[2],b=(0,s.Z)((0,a.Z)("business.configs.businessId",null),3),_=b[1],Z=b[2],m=(0,o.Z)(),w=m.current,S=m.reloadBusinesses,C=(0,d.useSession)().data,E=!!(null===C||void 0===C?void 0:C.user),A=(0,c.Z)(),k=A.get,N=A.post,O=function(){var n=(0,i.Z)((function(){var n;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return _(null===w||void 0===w?void 0:w._id),y(!0),[4,k("/business/get-config")];case 1:return(n=e.sent())&&!0===n.status&&n.content?((0,u.Fs)("business.config",n.content),t(n.content),y(!1),[2,n.content]):(y(!1),[2,null])}}))}));return function(){return n.apply(this,arguments)}}(),T=function(){var n=(0,i.Z)((function(n){var e;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return[4,N("/business/save",n).catch(console.log)];case 1:return(e=i.sent())&&!0===e.status?[4,S()]:[3,3];case 2:return i.sent(),u.Z9.success("Settings saved!"),(0,u.Fs)("business.config",n),t(e.content),[2,n];case 3:return u.Z9.error(e.message),[2,null]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,l.useEffect)((function(){E&&(null===w||void 0===w?void 0:w._id)&&(!v.current&&!h.current||Z.current!==(null===w||void 0===w?void 0:w._id))&&O()}),[w,E]),{config:e,setConfig:t,getConfig:O,saveConfig:T,getAddressFromConfig:function(){return f(e)},loading:p}}},72521:function(n,e,t){"use strict";t.d(e,{RS:function(){return a},cy:function(){return c},m2:function(){return d},n3:function(){return o},xk:function(){return u}});var i=t(47568),s=t(97582),r=t(3732);function u(n){var e,t,i,s,r,u,o,c,a,l,d;return"Custom"===(null===n||void 0===n||null===(e=n.type)||void 0===e||null===(t=e.Type)||void 0===t?void 0:t.name)||"Other"===(null===n||void 0===n||null===(i=n.type)||void 0===i||null===(s=i.Type)||void 0===s?void 0:s.name)?null!==(a=null===n||void 0===n||null===(c=n.type)||void 0===c?void 0:c.name)&&void 0!==a?a:"":null!==(d=null!==(l=null===n||void 0===n||null===(r=n.type)||void 0===r||null===(u=r.Type)||void 0===u?void 0:u.name)&&void 0!==l?l:null===n||void 0===n||null===(o=n.type)||void 0===o?void 0:o.name)&&void 0!==d?d:""}function o(n){var e,t,i;return null!==(i=null===(t=null===n||void 0===n||null===(e=n.categories)||void 0===e?void 0:e.sort((function(n,e){return e.score-n.score}))[0])||void 0===t?void 0:t.category)&&void 0!==i?i:""}function c(n){var e,t,i,s=null===n||void 0===n||null===(e=n.categories)||void 0===e?void 0:e.sort((function(n,e){return e.score-n.score}))[0];return s&&"Other"!==(null===s||void 0===s?void 0:s.category)&&null!==(i=null===s||void 0===s||null===(t=s.subcategories)||void 0===t?void 0:t[0])&&void 0!==i?i:""}function a(n,e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function(n,e){var t,i;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return t=[{category:"Other",subcategories:[e]}],[4,n("/business/identify-categories",{vertical:e})];case 1:return(i=s.sent())&&!0===i.status&&i.content&&(t=i.content),(0,r.d8)("mars-category",o({categories:t})),(0,r.d8)("mars-subcategory",c({categories:t})),[2,t]}}))}))).apply(this,arguments)}function d(n,e){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)((function(n,e){var t;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,n("/business/summarize-vertical",{vertical:e})];case 1:return(t=i.sent())&&!0===t.status&&t.content?[2,{imageQuery:t.content.image,llmQuery:t.content.llm}]:[2,{imageQuery:"",llmQuery:""}]}}))}))).apply(this,arguments)}}},function(n){n.O(0,[2295,431,9774,2888,179],(function(){return e=79755,n(n.s=e);var e}));var e=n.O();_N_E=e}]);