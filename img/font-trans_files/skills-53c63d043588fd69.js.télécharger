(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2569],{52393:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/automation/skills",function(){return t(90033)}])},33253:function(e,n,t){"use strict";var l=t(29815),s=t(85893),i=t(67294),a=t(3732),o=t(26713);n.Z=function(e){var n=e.rating,t=e.setRating,r=e.readOnly,c=e.className,u=e.starClassName,d=e.allowHalfRating,f=(0,i.useState)(0),m=f[0],x=f[1];return(0,i.useEffect)((function(){r||m===n||x(n)}),[n]),(0,s.jsx)("div",{className:(0,a.AK)("star-rating flex",c),children:(0,l.Z)(Array(5)).map((function(e,l){return l+=1,(0,s.jsxs)("div",{className:"relative flex",children:[(0,s.jsx)("button",{type:"button",className:(0,a.AK)(l<=(!r&&m||n)?"text-yellow-400":"text-gray-200",r&&"cursor-default"),onClick:function(){return t(n===l?0:l)},onMouseEnter:function(){r||x(l)},onMouseLeave:function(){r||x(n)},disabled:r,children:(0,s.jsx)("div",{className:(0,a.AK)(u,"relative w-5 h-5"),children:(0,s.jsx)(o.Z,{icon:"StarSolidIcon",className:(0,a.AK)("absolute w-full h-full top-0 left-0")})})}),d&&(0,s.jsx)("button",{type:"button",className:(0,a.AK)("absolute top-0 left-0 w-1/2 overflow-hidden",l-.5<=(!r&&m||n)?"text-yellow-400":"text-gray-200",r&&"cursor-default"),onClick:function(){return t(n===l?.5:l-.5)},onMouseEnter:function(){r||x(l-.5)},onMouseLeave:function(){r||x(n-.5)},disabled:r,children:(0,s.jsx)("div",{className:(0,a.AK)(u,"relative w-5 h-5 overflow-hidden"),children:(0,s.jsx)(o.Z,{icon:"StarSolidIcon",className:(0,a.AK)("absolute w-full h-full top-0 left-0")})})})]},"star-".concat(l))}))})}},52949:function(e,n,t){"use strict";var l=t(10253),s=t(85893),i=t(26713),a=t(61437),o=t(43714);n.Z=function(){var e=(0,l.Z)((0,a.Z)("layout.paywall"),2)[1],n=(0,o.Z)().track;return(0,s.jsxs)("div",{className:"flex flex-row flex-wrap sm:flex-nowrap justify-start items-center w-full my-6 bg-blue-700 rounded-md p-4",children:[(0,s.jsx)("div",{className:"mr-3 flex justify-center items-center w-4 h-4",children:(0,s.jsx)(i.Z,{icon:"InformationCircleSolidIcon",className:"text-white w-4 h-4"})}),(0,s.jsx)("span",{className:"text-white text-ceramic-small font-medium max-w-60 sm:max-w-full",children:"Upgrade your plan to start using Automation"}),(0,s.jsxs)("div",{onClick:function(){n("app:aiworkflow-upgradebanner"),e("default")},className:"flex flex-row flex-nowrap justify-start items-center w-full sm:w-auto text-white text-ceramic-small font-medium ml-7 mt-2.5 sm:mt-0 sm:ml-auto cursor-pointer",children:[(0,s.jsx)("span",{children:"View plans"}),(0,s.jsx)("div",{className:"ml-1 flex justify-center items-center w-4 h-4",children:(0,s.jsx)(i.Z,{icon:"ArrowRightSolidIcon",className:"text-white"})})]})]})}},90033:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return G}});var l=t(47568),s=t(97582),i=t(85893),a=t(61437),o=t(10253),r=t(29815),c=t(67294),u=t(26713),d=t(25675),f=t.n(d),m=t(76078),x=t(72510),h=t(3732),v=t(52077),g=function(){return(0,i.jsxs)("div",{className:"absolute top-0 left-0 right-0 block w-full",children:[(0,i.jsx)("span",{className:"absolute left-0 top-0 right-0 w-full h-1 bg-indigo-600 rounded-tl-md rounded-tr-md"}),(0,i.jsx)("span",{className:"animate-progress-purple absolute h-1 rounded-tl-md rounded-tr-md bg-gradient-to-r from-indigo-600 to-[#CF47FF] transition-all duration-600 fix-safari-flickering"}),(0,i.jsx)("span",{className:"animate-progress-increase absolute h-1 rounded-tl-md rounded-tr-md bg-gradient-to-r from-transparent to-[#CF47FF] blur-[2px] transition-all duration-600 fix-safari-flickering"}),(0,i.jsx)("span",{className:"animate-progress-increase absolute h-1 rounded-tl-md rounded-tr-md bg-gradient-to-r from-transparent to-[#CF47FF] blur-[5px] transition-all duration-600 fix-safari-flickering"}),(0,i.jsx)("span",{className:"animate-progress-increase absolute h-1 rounded-tl-md rounded-tr-md bg-gradient-to-r from-transparent to-[#FFCAFD] blur-[1.5px] transition-all duration-600 fix-safari-flickering"})]})},p=t(12280),b=t(27818),w=t(4519),j=function(e){var n=e.onClose,t=(0,w.Z)().get,l=(0,c.useState)(!1),s=l[0],a=l[1],o=(0,c.useState)(!1),r=o[0],u=o[1],d=(0,c.useState)((0,h.tl)("business.config")),f=d[0],m=d[1];return(0,c.useEffect)((function(){a(!0),t("/business/get-config",{}).then((function(e){!0===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)?((0,h.Fs)("business.config",e.content),m(f),u(!0)):(h.Z9.error("Failed to retrieve information"),m({}),u(!1),n())})).finally((function(){a(!1)}))}),[]),(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(b.Z,{config:f,loading:s,setLoading:function(){return a(!0)}})})},N=t(43490),y=t(51121),k=t(41664),Z=t.n(k),C=function(e){var n=e.noAccountMessage,t=e.linkCreateAccount,l=e.linkHelpFind,s=e.initialValue,a=e.onUpdateValue,o=e.showError,r=(0,c.useState)(s),u=r[0],d=r[1],f=(0,c.useState)(!1),m=f[0],x=f[1];return(0,c.useEffect)((function(){o&&x(!0)}),[o]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex flex-row flex-nowrap justify-between items-center text-label mt-4",children:[(0,i.jsx)("span",{className:"font-medium",children:"Page address"}),(0,i.jsx)(Z(),{href:l||"#",children:(0,i.jsx)("a",{target:"_blank",className:"text-indigo-700 font-medium",children:"How do I find the URL?"})})]}),(0,i.jsx)("div",{className:"my-2",children:(0,i.jsx)(y.Z,{value:u,onChange:function(e){return function(e){d(e),a(e)}(e)},onFocus:function(){return x(!1)},error:m?"This field is required":null})}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"text-label font-normal",children:[(0,i.jsxs)("span",{className:"text-gray-500",children:[n||""," "]}),(0,i.jsx)("div",{children:(0,i.jsx)(Z(),{href:t||"#",children:(0,i.jsx)("a",{target:"_blank",className:"text-indigo-600 font-medium",children:"Create one"})})})]})})]})},S=t(88575),E=t(33253),F=function(){return(0,i.jsx)("span",{className:"block w-[calc(100%+40px)] md:w-[calc(100%+48px)] h-[1px] bg-gray-200 my-6 -ml-6"})},_=function(e){var n=e.onClose,t=(0,w.Z)(),l=t.get,s=t.post,a=(0,c.useState)(!1),o=a[0],r=a[1],u=(0,c.useState)(!1),d=u[0],f=u[1],m=(0,c.useState)(""),x=m[0],g=m[1],p=(0,c.useState)(""),b=p[0],j=p[1],k=(0,c.useState)(""),Z=k[0],_=k[1],R=(0,c.useState)(""),A=R[0],I=R[1],M=(0,c.useState)(3),q=M[0],P=M[1],T=(0,c.useState)(!1),L=T[0],O=T[1],U=(0,c.useState)(!1),V=U[0],D=U[1],K=function(){var e,t;(D(!0),(o||d)&&(o&&(!x||x&&""===x.trim())||d&&(!b||b&&""===b.trim())||!Z||Z&&""===Z.trim()||!A||A&&""===A.trim()))?null===(e=document.querySelector(".c-skill-review-request-modal-content").parentNode)||void 0===e||null===(t=e.parentNode)||void 0===t||t.scrollTo(0,0):s("/marketing/save-reviews-settings",{reviews:{enableFacebookReviews:o,enableGoogleReviews:d,facebookURL:x,googleURL:b,minimumRating:q,enableAutomation:o||d,template:{title:Z,content:A}}}).then((function(e){e&&!0===(null===e||void 0===e?void 0:e.status)?h.Z9.success("Review request settings - saved"):h.Z9.error("Failed to save Review request settings")})).catch((function(){h.Z9.error("Failed to save Review request settings")})).finally((function(){n()}))};return(0,c.useEffect)((function(){l("/marketing/get-reviews-settings",{}).then((function(e){var n,t,l,s,i,a,o,c,u;e&&!0===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&((null===(n=e.content)||void 0===n?void 0:n.template)&&(_((null===(c=e.content.template)||void 0===c?void 0:c.title)||""),I((null===(u=e.content.template)||void 0===u?void 0:u.content)||"")),P((null===(t=e.content)||void 0===t?void 0:t.minimumRating)||3),r((null===(l=e.content)||void 0===l?void 0:l.enableFacebookReviews)||!1),g((null===(s=e.content)||void 0===s?void 0:s.facebookURL)||""),f((null===(i=e.content)||void 0===i||null===(a=i.enable)||void 0===a?void 0:a.enableGoogleReviews)||!1),j((null===(o=e.content)||void 0===o?void 0:o.googleURL)||""),O(!0))}))}),[]),(0,i.jsx)("div",{className:"c-skill-review-request-modal-content",children:(0,i.jsxs)("div",{className:"text-ceramic-medium font-normal text-gray-900",children:[(0,i.jsx)("div",{className:"block w-full",children:(0,i.jsx)("p",{children:"Which platform you would like to receive reviews"})}),(0,i.jsxs)("div",{className:"block w-full",children:[(0,i.jsxs)("div",{className:"block my-6 w-full rounded-lg bg-gray-50 p-5",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center w-full",children:[(0,i.jsx)("span",{className:"font-bold mb-3",children:"Facebook Business page"}),(0,i.jsx)(N.Z,{enabled:o,onChange:function(e){return r(e)}})]}),(0,i.jsx)("span",{className:"block w-full text-gray-500 text-label",children:"Facebook reviews boost credibility and attract customers."}),o&&L&&(0,i.jsx)(C,{noAccountMessage:"Don't have a Facebook Business Page yet?",linkCreateAccount:"https://www.facebook.com/pages/creation/?ref_type=facebook_business_website",linkHelpFind:"https://www.facebook.com/business/learn/lessons/facebook-page-ratings-and-reviews",initialValue:x,onUpdateValue:function(e){g(e)},showError:V&&(!x||""===x.trim())})]}),(0,i.jsxs)("div",{className:"block my-6 w-full rounded-lg bg-gray-50 p-5",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center w-full",children:[(0,i.jsx)("span",{className:"font-bold mb-3",children:"Google Business Profile"}),(0,i.jsx)(N.Z,{enabled:d,onChange:function(e){return f(e)}})]}),(0,i.jsx)("span",{className:"block w-full text-gray-500 text-label",children:"Google Business Profile reviews improve visibility and trust."}),d&&L&&(0,i.jsx)(C,{noAccountMessage:"Don't have a Google Business Profile yet?",linkHelpFind:"https://support.google.com/business/answer/7035772?hl=en",linkCreateAccount:"https://business.google.com/create",initialValue:b,onUpdateValue:function(e){j(e)},showError:V&&(!b||""===b.trim())})]})]}),(o||d)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"block w-full h-[1px] bg-gray-200"}),(0,i.jsxs)("div",{className:"my-6",children:[(0,i.jsx)("span",{className:"block w-full text-label font-bold mb-1",children:"Review request email"}),(0,i.jsx)("span",{className:"block w-full text-label text-gray-500",children:"This email will be sent to your customers when you request a review"}),(0,i.jsx)("div",{className:"my-6 block w-full",children:(0,i.jsx)(y.Z,{label:"Subject",value:Z,onChange:function(e){return _(e)},onFocus:function(){return D(!1)},error:!V||Z&&""!==Z.trim()?"":"This field is required"})}),(0,i.jsxs)("div",{className:"my-6 block w-full",children:[(0,i.jsx)("div",{className:"block mb-1",children:(0,i.jsx)("label",{className:"block w-full font-label text-gray-700",children:"Message"})}),(0,i.jsx)("div",{className:"block mb-2 text-label",children:(0,i.jsx)(S.Z,{initialValue:A,onChange:function(e){return I(e.trim())}})}),(0,i.jsx)("div",{className:"block",children:(0,i.jsxs)("p",{className:"text-ceramic-small text-gray-500 font-normal",children:[(0,i.jsx)("span",{children:"You can use the tokens "}),(0,i.jsx)("span",{className:"font-medium text-gray-700 border-1 border-gray-200 p-0.5 bg-gray-50 rounded-md",children:"%FIRST_NAME%"}),(0,i.jsx)("span",{children:" "}),(0,i.jsx)("span",{className:"font-medium text-gray-700 border-1 border-gray-200 p-0.5 bg-gray-50 rounded-md",children:"%LAST_NAME%"}),(0,i.jsxs)("span",{children:[" to automatically add your ","contact's"," first and last name"]})]})})]})]}),(0,i.jsx)("span",{className:"block w-full h-[1px] bg-gray-200"}),(0,i.jsxs)("div",{className:"block w-full my-6",children:[(0,i.jsxs)("div",{className:"block w-full",children:[(0,i.jsx)("span",{className:"block w-full font-bold text-gray-900 mb-2",children:"Minimum stars"}),(0,i.jsx)("p",{className:"text-ceramic-small text-gray-500 font-normal",children:"Select the minimum amount of stars that would trigger the automatic review request email"})]}),(0,i.jsx)("div",{className:"block w-full my-2",children:(0,i.jsx)(E.Z,{starClassName:"!w-6 !h-6",rating:q,setRating:function(e){return P(e)}})}),(0,i.jsx)("div",{className:"block w-full",children:(0,i.jsx)("p",{className:"text-ceramic-small text-gray-500 font-normal",children:"We recommend requesting reviews from only 4 or 5-star ratings."})})]})]}),(0,i.jsx)(F,{}),(0,i.jsxs)("div",{className:"flex flex-row flex-nowrap justify-end items-center w-full",children:[(0,i.jsx)("div",{children:(0,i.jsx)(v.Z,{className:"light",onClick:n,children:"Cancel"})}),(0,i.jsx)("div",{className:"ml-3",children:(0,i.jsx)(v.Z,{className:"primary",onClick:function(){K()},children:"Save"})})]})]})})},R=t(1172),A=t(63944),I=t(2740),M=t(16494),q=function(e){var n=e.onClose,t=(0,c.useState)(null),l=t[0],s=t[1],a=(0,c.useState)(!1),o=a[0],r=a[1],u=(0,w.Z)(),d=u.get,f=u.post,m=(0,c.useRef)(null);return(0,c.useEffect)((function(){return m.current=!0,(0,A.Q5)(d).then((function(e){m.current&&(s(e),r(!0))})),function(){m.current=!1}}),[]),(0,i.jsx)(i.Fragment,{children:o&&(0,i.jsx)(I.h,{children:(0,i.jsx)(R.Z,{showModal:o,showModalHandler:function(){return n()},scheduleData:l,setScheduleData:s,allowToggleStatus:!1,onComplete:function(){r(!1),f("/automation/auto-post-sync",{}).then((function(){return window.dispatchEvent(new CustomEvent("refresh-automation-skills"))})).catch((function(e){return console.log(e)})).finally((function(){!0===(null===m||void 0===m?void 0:m.current)&&(r(!1),n())}))}})})})},P=function(e){var n=e.title,t=e.identifier,l=e.onClose,s=(0,w.Z)().get,a=["lead-correspondent","review-request","auto-post","seo-specialist"],o=function(e){!1===e&&(l(),s("/automation/validate-skill-config",{identifier:t}).then((function(e){var n;e&&!0===e.status&&(!0===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.refresh)&&window.dispatchEvent(new CustomEvent("refresh-automation-skills",{detail:{identifier:t}})))})).catch((function(){})))},r=function(){o(!1)};return(0,c.useEffect)((function(){a.includes(t)||l()}),[t]),(0,i.jsxs)(i.Fragment,{children:["auto-post"!==t&&(0,i.jsx)(p.u,{open:!0,setOpen:o,title:"Configure ".concat(n),children:(0,i.jsxs)("div",{className:"block w-105 max-w-full",children:["lead-correspondent"===t&&(0,i.jsx)(j,{onClose:r}),"review-request"===t&&(0,i.jsx)(_,{onClose:r})]})}),"auto-post"===t&&(0,i.jsx)(q,{onClose:r})]})},T=t(33299),L=function(e){var n=e.active,t=e.identifier,l=e.title,s=e.image,a=e.canEnable,o=e.enabled,r=e.isEnabling,d=e.description,p=e.extraConfig,b=e.enableMessage,w=e.disableMessage,j=e.onToggle,N=e.openPaywall,y=e.autoOpenConfig,k=e.minPlanRequired,Z=e.isMissingConfig,C=(0,c.useState)(!1),S=C[0],E=C[1],F=(0,c.useState)(!1),_=F[0],R=F[1],A=(0,T.useSession)().data,I=function(){a?"function"===typeof j&&j(t,S,l,S?w:b):"function"===typeof N&&N(l,null===k||void 0===k?void 0:k.name,t)},q=function(){!0===p&&R(!0)};return(0,c.useEffect)((function(){E(o)}),[o]),(0,c.useEffect)((function(){y&&q()}),[y]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"c-automation-skill-card relative w-full min-h-64 p-6 shadow-md rounded-lg ".concat(n&&S?"bg-white":"bg-gray-100"),children:[r&&(0,i.jsx)(g,{}),r&&(0,i.jsx)("span",{className:"absolute inset-0 bg-white opacity-0 z-5"}),(0,i.jsxs)("div",{className:"w-full flex flex-row flex-nowrap justify-between items-center mb-8",children:[(0,i.jsx)("div",{className:"w-12 h-12 flex flex-row justify-center items-center rounded-full ".concat(!0!==n?"opacity-30":""),children:(0,i.jsx)(f(),{src:"".concat((0,h.sd)(s),"?t=1"),width:48,height:48,alt:"Icon"})}),(!a||!0!==n)&&!!(null===k||void 0===k?void 0:k.name)&&A.user.plan.level<(null===k||void 0===k?void 0:k.level)&&!S&&(0,i.jsx)("div",{children:(0,i.jsxs)("span",{className:"bg-blue-100 rounded-full text-center text-blue-800 px-2.5 py-0.5 font-medium text-label-sm",children:[k.name," Plan"]})})]}),(0,i.jsxs)("div",{className:"block w-full",children:[(0,i.jsx)("h3",{className:"block w-full text-gray-900 text-body-lg font-semibold mb-2",children:l}),(0,i.jsx)("p",{className:"block w-full text-gray-500 text-ceramic-small min-h-[60px]",children:d})]}),!0===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex justify-start items-center w-full min-h-[40px] mt-7",children:[o&&(0,i.jsxs)("div",{className:"flex flex-row flex-nowrap justify-start items-center cursor-default",children:[(0,i.jsx)("span",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),(0,i.jsx)("span",{className:"text-label font-medium text-green-600",children:"Enabled"})]}),!o&&(0,i.jsxs)(v.Z,{className:"light min-w-20 !outline-none !ring-0 !ring-offset-0 ".concat(r?"border-none":""),onClick:I,children:[!r&&"Enable",r&&(0,i.jsx)(M.Z,{variant:"icon"})]}),r&&!1===o&&(0,i.jsx)("span",{className:"text-label font-normal text-gray-500 ml-auto",children:"Learning..."})]}),o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute right-6 top-6",children:(0,i.jsx)(m.Z,{closeOnSelect:!0,button:(0,i.jsx)("span",{className:"border-1 flex justify-center items-center flex-row border-gray-300 rounded-full w-10 h-10",children:(0,i.jsx)(u.Z,{icon:"EllipsisVerticalIcon",className:"h-5 w-5"})}),children:(0,i.jsxs)(x.v.Items,{children:[p&&(0,i.jsx)(x.v.Item,{as:c.Fragment,className:"transition-all cursor-pointer hover:bg-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2.5 text-gray-600 select-none",onClick:function(){q()},children:[(0,i.jsx)("span",{children:(0,i.jsx)(u.Z,{icon:"CogSolidIcon",className:"h-5 w-5 text-gray-700"})}),(0,i.jsx)("span",{className:"text-gray-700",children:"Configure"})]})}),(0,i.jsx)(x.v.Item,{as:c.Fragment,className:"transition-all cursor-pointer hover:bg-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2.5 text-gray-600 select-none",onClick:function(){I()},children:[(0,i.jsx)("span",{children:(0,i.jsx)(u.Z,{icon:"XCircleSolidIcon",className:"h-5 w-5 text-red-600"})}),(0,i.jsx)("span",{className:"text-red-600",children:"Disable"})]})})]})})}),!!Z&&(0,i.jsx)("div",{className:"absolute top-8 right-19",title:"Missing configuration",onClick:q,children:(0,i.jsx)(u.Z,{icon:"ExclamationSolid",className:"text-yellow-300"})})]})]}),!0!==n&&(0,i.jsx)("div",{className:"block w-full mt-7 min-h-[40px] pt-2.5",children:(0,i.jsx)("span",{className:"text-gray-500 font-semibold text-label-lg",children:"Coming soon"})})]}),p&&o&&_&&(0,i.jsx)(P,{identifier:t,title:l,onClose:function(){return R(!1)}})]})},O=t(60728),U=t(11215),V=t(43714),D=function(e){var n=e.open,t=e.setOpen,l=e.title,s=e.minPlan,r=e.identifier,c='url("'.concat((0,h.sd)("automation/automation-paywall-bg.svg"),'")'),d=(0,o.Z)((0,a.Z)("layout.paywall",!1),2)[1],f=(0,V.Z)().track;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(I.h,{children:(0,i.jsxs)(p.u,{open:n,setOpen:t,hasCustomBody:!0,className:"!w-120 !max-w-full",children:[(0,i.jsx)("div",{className:"block w-full",children:(0,i.jsxs)("div",{className:"relative flex justify-center items-center w-full h-[133px] bg-no-repeat bg-cover p-7",style:{backgroundImage:c},children:[(0,i.jsx)("div",{className:"flex justify-center items-center w-20 h-20 bg-white rounded-full shadow-around-md",children:(0,i.jsx)(u.Z,{icon:"ArrowFlowIcon",className:"text-gray-900 w-9 h-9"})}),(0,i.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-b from-transparent to-white "})]})}),(0,i.jsxs)("div",{className:"block w-full p-6",children:[(0,i.jsxs)("span",{className:"block w-full text-gray-700 text-center font-semibold text-body-lg mb-3",children:["Upgrade your plan to enable the ",l||""," skill"]}),(0,i.jsx)("span",{className:"block w-full text-gray-500 text-center font-normal text-ceramic-medium",children:s?"You'll need a ".concat(s," plan or higher in order to enable this skill."):"You'll need to upgrade your plan to enable this skill."})]}),(0,i.jsxs)("div",{className:"flex flex-row flex-nowrap justify-center items-center w-full p-6 gap-3",children:[(0,i.jsx)("div",{children:(0,i.jsx)(v.Z,{className:"light",onClick:function(){return t(!1)},children:"Cancel"})}),(0,i.jsx)("div",{children:(0,i.jsx)(v.Z,{className:"primary",onClick:function(){t(!1),d("default"),f("app:aiworkflow-viewplans-".concat(r))},children:"View Plans"})})]})]})})})},K=function(){var e=(0,O.Z)(),n=e.confirm,t=e.ConfirmDialog,u=(0,w.Z)(),d=u.get,f=u.post,m=(0,V.Z)().track,x=(0,U.Z)().current,v=(0,T.useSession)().data,g=(0,c.useState)([]),p=g[0],b=g[1],j=(0,c.useState)("Enable skill"),N=j[0],y=j[1],k=(0,c.useState)(!1),Z=k[0],C=k[1],S=(0,c.useState)(null),E=S[0],F=S[1],_=(0,c.useState)(null),R=_[0],A=_[1],I=(0,c.useState)(!1),q=I[0],P=I[1],K=(0,o.Z)((0,a.Z)("automation.badge.count",0),2)[1],B=(0,c.useState)(!1),H=B[0],G=B[1],Y=(0,c.useState)(null),X=Y[0],W=Y[1],z=(0,c.useState)(null),Q=z[0],J=z[1],$=(0,c.useState)(""),ee=$[0],ne=$[1],te=(0,c.useRef)(!1),le=function(e,n){var t=(0,r.Z)(p),i=t.findIndex((function(n){return n.identifier===e}));i>=0&&(t[i].isEnabling=!0,b(t),setTimeout((0,l.Z)((function(){var t,l,a,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return m("app:aiworkflow-".concat(!0===n?"enable":"disable","-").concat(e)),[4,f("/automation/".concat(!0===n?"activate":"disable","-skill"),{identifier:e})];case 1:return t=s.sent(),(l=(0,r.Z)(p))[i].isEnabling=!1,t&&!0===(null===t||void 0===t?void 0:t.status)?(l[i].enabled=n,!0===(null===(a=l[i])||void 0===a||null===(o=a.config)||void 0===o?void 0:o.enabled)&&(l[i].autoOpenConfig=n),d("/automation/badge-count",{}).then((function(e){e&&!0===(null===e||void 0===e?void 0:e.status)&&K(e.content.count>99?"99+":e.content.count)}))):h.Z9.error("You don't have this feature enabled"),b(l),[2]}}))})),1500))},se=function(){return p&&!!(null===p||void 0===p?void 0:p.length)},ie=function(e,t,l,s){var i;y(!0===t?"Disable Skill":"Enable Skill"),C(!0===t),n("Enable ".concat(l,"?"),s.replaceAll("{{email}}",(null===v||void 0===v||null===(i=v.user)||void 0===i?void 0:i.email)||""),(function(){return le(e,!t)}))},ae=function(){var e=(0,l.Z)((function(e){var n,t;return(0,s.__generator)(this,(function(l){return e?(n=(0,r.Z)(p),(t=n.findIndex((function(n){return n.identifier===e})))>=0&&(n[t].isEnabling=!0,b(n))):P(!0),d("/automation/business-skills",{}).then((function(e){e&&!0===e.status&&b(function(e){return e.map((function(e){return e.isEnabling=!1,null})),e}(e.skills||[]))})).catch((function(){return b([])})).finally((function(){P(!1)})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),oe=function(e,n,t){G(!0),W(e),J(n),ne(t)},re=function(e){if(x&&(null===x||void 0===x?void 0:x._id)){var n,t=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.identifier;ae(t).catch((function(){}))}else window.location.reload()};return(0,c.useEffect)((function(){var e;te.current&&(x&&(null===x||void 0===x?void 0:x._id)&&(x._id!==E||(null===x||void 0===x||null===(e=x.plan)||void 0===e?void 0:e.priceId)!==R)&&(A(x.plan.priceId),F(x._id),ae().catch((function(){}))))}),[x]),(0,c.useEffect)((function(){return window.addEventListener("refresh-automation-skills",re),function(){window.removeEventListener("refresh-automation-skills",re)}}),[p]),(0,c.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("ul",{className:"flex flex-row flex-wrap justify-start items-start gap-5",children:[se()&&(0,i.jsx)(i.Fragment,{children:p.map((function(e){var n,t,l;return(0,i.jsx)("li",{className:"w-full md:w-[calc(50%-16px)] xl:max-w-200",children:(0,i.jsx)(L,{active:e.active,identifier:e.identifier,image:e.image,title:e.title,description:e.description,enabled:e.enabled,canEnable:e.canEnable,isEnabling:e.isEnabling||!1,extraConfig:!!(null===e||void 0===e||null===(n=e.config)||void 0===n?void 0:n.enabled),settings:e.settings,onToggle:ie,enableMessage:null===e||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.enableConfirm,disableMessage:null===e||void 0===e||null===(l=e.messages)||void 0===l?void 0:l.disableConfirm,autoOpenConfig:null===e||void 0===e?void 0:e.autoOpenConfig,openPaywall:oe,minPlanRequired:null===e||void 0===e?void 0:e.minPlanRequired,isMissingConfig:!1})},"automation-skill-card-".concat(e.identifier))}))}),q&&!se()&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("li",{className:"w-full md:w-[calc(50%-20px)] md:max-w-200",children:(0,i.jsx)(M.Z,{variant:"box"})}),(0,i.jsx)("li",{className:"w-full md:w-[calc(50%-20px)] md:max-w-200",children:(0,i.jsx)(M.Z,{variant:"box"})}),(0,i.jsx)("li",{className:"w-full md:w-[calc(50%-20px)] md:max-w-200",children:(0,i.jsx)(M.Z,{variant:"box"})}),(0,i.jsx)("li",{className:"w-full md:w-[calc(50%-20px)] md:max-w-200",children:(0,i.jsx)(M.Z,{variant:"box"})})]})]}),(0,i.jsx)(t,{confirmText:N,attention:Z}),(0,i.jsx)(D,{open:H,setOpen:G,title:X,minPlan:Q,identifier:ee})]})},B=t(52949),H=function(){(0,a.Z)("layout.title","Automation",!0);var e=(0,w.Z)().get,n=(0,U.Z)().current,t=(0,c.useState)(!1),o=t[0],r=t[1],u=(0,c.useState)(!1),d=u[0],f=u[1],m=function(){var n=(0,l.Z)((function(){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,e("/automation/is-active",{})];case 1:return(n=t.sent())&&(null===n||void 0===n||n.status),r(!0),[2]}}))}));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e,t;n&&(null===n||void 0===n?void 0:n._id)&&(m().catch((function(){})),(null===n||void 0===n||null===(e=n.plan)||void 0===e?void 0:e.priceId)&&"free"!==(null===n||void 0===n||null===(t=n.plan)||void 0===t?void 0:t.priceId)?f(!1):f(!0))}),[n]),(0,i.jsx)(i.Fragment,{children:o&&(0,i.jsxs)("div",{className:"block w-full",children:[d&&(0,i.jsx)(B.Z,{}),(0,i.jsx)(K,{})]})})};H.layout=!0,H.auth=!0;var G=H}},function(e){e.O(0,[6440,6235,34,21,1172,9774,2888,179],(function(){return n=52393,e(e.s=n);var n}));var n=e.O();_N_E=n}]);