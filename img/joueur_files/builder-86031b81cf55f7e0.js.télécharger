(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9862,2593],{64938:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/website/builder",function(){return t(89375)}])},14441:function(e,n,t){"use strict";var i=t(85893),o=t(67294),l=t(26713),s=t(3732),a=(0,o.forwardRef)((function(e,n){var t=e.value,o=e.label,a=e.onClick,r=e.disabled,c=e.hint,u=e.className,d=e.labelClass,v=e.style,m=e.onClear;return(0,i.jsxs)("button",{className:(0,s.AK)("date-input light flex-1 w-full group",u),onClick:a,ref:n,disabled:r,style:v,children:[(0,i.jsx)(l.Z,{icon:"CalendarIcon",className:"h-4 w-4 mr-2"}),o&&(0,i.jsx)("span",{className:(0,s.AK)("text-gray-400",d),children:o}),t||(0,i.jsx)("span",{className:(0,s.AK)("text-gray-400",d),children:c}),"function"===typeof m&&t&&(0,i.jsx)("div",{className:"absolute opacity-0 group-hover:opacity-100 transition-opacity right-2 hover:text-indigo-500",onClick:function(e){e.stopPropagation(),m()},children:(0,i.jsx)(l.Z,{icon:"XCircleIcon",className:"h-5 w-5"})})]})}));a.displayName="DateInput",n.Z=a},42339:function(e,n,t){"use strict";t.d(n,{Z:function(){return S}});var i=t(47568),o=t(26042),l=t(69396),s=t(29815),a=t(97582),r=t(85893),c=t(3732),u=t(16494),d=t(26713),v=t(72510),m=t(67294),f=t(4519),p=t(92265),h=t(66605),x=t(11215),g=t(72521),b=t(52699),w=t(51121),y=t(42734),j=t(76078),k=t(41664),N=t.n(k),Z=[{id:"simplify",name:"Simplify writing",action:"Without changing its length, simplify writing on the following text",icon:"PencilAiIcon",prompt:"modify-text"},{id:"shorten",name:"Make it shorter",action:"Rewrite the following text using less words",icon:"ShorterIcon",prompt:"modify-text"},{id:"lengthen",name:"Make it longer",action:"Rewrite the following text using more words",icon:"LongerIcon",prompt:"modify-text"},{id:"seo",name:"Optimize for SEO",icon:"DocumentSearchIcon",tooltip:"Incorporate your SEO keywords naturally without compromising the readability or impact of the content.",prompt:"optimize-text-for-seo"}],C={shorten:!0,lengthen:!0,spelling:!0,improve:!0,simplify:!0,seo:!0};function S(e){var n,t,k,S,_,P,E,I=e.children,T=e.prompt,B=e.data,A=e.onRegenerate,R=e.title,O=e.regenerate,D=void 0!==O&&O,F=e.className,W=void 0===F?"":F,z=e.options,L=void 0===z?C:z,M=(0,o.Z)({},C,L),G=(0,m.useState)(!1),K=G[0],V=G[1],$=(0,m.useState)(!1),H=$[0],q=$[1],U=(0,m.useState)(),J=U[0],Y=U[1],Q=(0,m.useState)(),X=Q[0],ee=Q[1],ne=(0,m.useState)([]),te=ne[0],ie=ne[1],oe=(0,m.useState)([]),le=oe[0],se=oe[1],ae=(0,m.useRef)(),re=(0,f.Z)(),ce=re.post,ue=re.get,de=(0,p.Z)(),ve=de.aiSettings,me=de.setAiSettings,fe=(de.saveAiSettings,(0,x.Z)().current),pe=(0,b.Z)().getAddressFromConfig,he=(0,g.xk)(fe),xe=null!==(E=null===ve||void 0===ve?void 0:ve.language)&&void 0!==E?E:"en",ge=function(){var e=(0,i.Z)((function(){var e,n,t;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return(e=(0,c.tl)("website.keywords"))&&e.length>0?(se(e),[3,3]):[3,1];case 1:return[4,ue("/optimize-website/get-seo-keywords")];case 2:(null===(n=i.sent())||void 0===n?void 0:n.status)&&(null===n||void 0===n?void 0:n.content)&&(null===n||void 0===n?void 0:n.content.length)>0&&(t=n.content.map((function(e){return e.value})),(0,c.Fs)("website.keywords",t),se(t)),i.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,i.Z)((function(e,n){var t,i,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,,2,3]),V(!0),[4,ce("ai/generate",{prompt:e,data:(0,l.Z)((0,o.Z)({},n),{content:null!==J&&void 0!==J?J:n.content,currentContent:te.join("\n"),voiceAndTone:X,business:{vertical:he,name:null===fe||void 0===fe?void 0:fe.name,location:pe()},language:xe,keywords:le.join(", ")})})];case 1:return(null===(t=a.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)?"function"===typeof A&&A(null!==(i=t.content.text)&&void 0!==i?i:t.content):console.log("Error generating content:",null===t||void 0===t||null===(s=t.content)||void 0===s?void 0:s.generateId),[3,3];case 2:return V(!1),[7];case 3:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),we=function(){var e=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(n){return me((function(n){return(0,l.Z)((0,o.Z)({},n),{voiceAndTone:e})})),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){ee((null===ve||void 0===ve?void 0:ve.voiceAndTone)||y.H6.Default)}),[ve]),(0,m.useEffect)((function(){if(H){var e=function(e){var n,t;"function"===typeof(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.closest)&&(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.closest(".generate-button"))!==ae.current&&q(!1)};return window.top.addEventListener("click",e),function(){return window.top.removeEventListener("click",e)}}}),[H]),(0,m.useEffect)((function(){(null===B||void 0===B?void 0:B.currentContent)&&ie((function(e){if(!e.includes(B.currentContent)){var n=(0,s.Z)(e).concat([B.currentContent]);return n.length>5&&n.shift(),n}return e}))}),[B]),(0,m.useEffect)((function(){ge()}),[]),(0,r.jsxs)("div",{className:(0,c.AK)(W,"generate-button"),ref:ae,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:R}),(0,r.jsx)(h.Z,{alt:"Generate content using AI.",className:"",children:(0,r.jsx)("button",{disabled:K,onClick:function(){return q((function(e){return!e}))},className:(0,c.AK)("link flex items-center gap-1 text-label pr-0"),children:K?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:D?"Regenerating":"Generating"}),(0,r.jsx)(u.Z,{variant:"icon"})]}):(0,r.jsxs)(r.Fragment,{children:[!H&&(0,r.jsx)(d.Z,{icon:"StarsIcon",className:"w-4 h-4"}),(0,r.jsx)("span",{children:H?"Close":D?"Regenerate":"Generate"})]})})})]}),I,(0,r.jsx)("div",{className:(0,c.AK)("grid transition-all",H?"pt-2":"",K&&"pointer-events-none opacity-50"),style:{gridTemplateRows:H?"1fr":"0fr"},children:(0,r.jsx)("div",{className:"overflow-hidden w-full",children:(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-4 rounded-lg flex flex-col gap-1 w-full",children:[Z.filter((function(e){return M[e.id]})).map((function(e,n){var t,i,o,l,s=e.id,a=e.name,u=e.action,v=e.icon,m=e.prompt,f=e.tooltip;return(0,r.jsxs)("div",{className:(0,c.AK)("flex items-center gap-2 hover:text-indigo-700 cursor-pointer mb-3 w-full",["shorten"].includes(s)&&(null===(i=null===B||void 0===B||null===(t=B.currentContent)||void 0===t?void 0:t.split(" "))||void 0===i?void 0:i.length)<=4?"hidden":"",["simplify"].includes(s)&&(null===(l=null===B||void 0===B||null===(o=B.currentContent)||void 0===o?void 0:o.split(" "))||void 0===l?void 0:l.length)<=2?"hidden":""),onClick:function(){return be(m,{text:null===B||void 0===B?void 0:B.currentContent,meaning:null===B||void 0===B?void 0:B.meaning,action:u,language:xe})},children:[(0,r.jsx)(d.Z,{icon:v,className:"w-5 h-5"}),(0,r.jsx)("span",{className:"text-label font-medium",children:a}),"seo"===s&&(0,r.jsx)(h.Z,{title:f,className:"ml-auto",children:(0,r.jsx)(N(),{href:"/website/optimize",children:(0,r.jsxs)("a",{className:"link sm flex items-center gap-1 ml-auto",onClick:function(e){return e.stopPropagation()},children:[" Manage ",(0,r.jsx)(d.Z,{icon:"ExternalLinkIcon",className:"w-4 h-4 text-indigo-700"})]})})})]},"ai-action-".concat(n))})),(null===(n=Z.filter((function(e){return M[e.id]})))||void 0===n?void 0:n.length)>0&&(!(Z.find((function(e){return"shorten"===e.id}))&&(null===(k=null===B||void 0===B||null===(t=B.currentContent)||void 0===t?void 0:t.split(" "))||void 0===k?void 0:k.length)<=4)||!(Z.find((function(e){return"simplify"===e.id}))&&(null===(_=null===B||void 0===B||null===(S=B.currentContent)||void 0===S?void 0:S.split(" "))||void 0===_?void 0:_.length)<=2))&&(0,r.jsx)("hr",{className:"my-3"}),(0,r.jsxs)("h4",{className:"text-label font-medium flex items-center gap-2 w-full",children:[(0,r.jsx)(d.Z,{icon:"ToneIcon",className:"w-5 h-5"})," Writing Style",(0,r.jsxs)(j.Z,{closeOnSelect:!0,className:"ml-auto",button:(0,r.jsxs)("span",{className:" rounded-md bg-indigo-50 text-indigo-700 pl-2.5 pr-2 py-1 text-xs font-medium flex items-center gap-1 ",children:[null===(P=null===y.i4||void 0===y.i4?void 0:y.i4.find((function(e){return e.id===X})))||void 0===P?void 0:P.name,(0,r.jsx)(d.Z,{icon:"ChevronDownSolidIcon",className:"w-4 h-4"})]}),itemsContainerClass:"md:!w-78 !overflow-y-auto md:overflow-hidden max-h-68 md:flex md:divide-x -mt-1",children:[(0,r.jsxs)("div",{className:"md:max-h-68 md:overflow-y-auto flex-[0.72]",children:[(0,r.jsx)(v.v.Item,{disabled:!0,children:(0,r.jsx)("div",{className:"flex px-4 py-2.5 text-gray-500 text-label cursor-pointer sticky top-0 bg-white",children:"Tone of voice"})}),y.i4.filter((function(e){return"tone"===e.type})).map((function(e,n){return(0,r.jsx)(v.v.Item,{onClick:function(){ee(e.id),we(e.id)},children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-4 py-2.5 hover:bg-gray-100 cursor-pointer",children:[(0,r.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:e.name}),(0,r.jsx)(d.Z,{icon:"CheckCircleSolidIcon",className:(0,c.AK)("w-4 h-4 text-indigo-700 transition-all ml-auto flex-shrink-0",e.id===X?"opacity-100":"opacity-0")})]})},"tone-".concat(n))}))]}),(0,r.jsxs)("div",{className:" flex-1 flex-shrink",children:[(0,r.jsx)(v.v.Item,{disabled:!0,children:(0,r.jsx)("div",{className:"flex px-4 py-2.5 text-gray-500 text-label cursor-pointer sticky top-0 bg-white",children:"Personalities"})}),y.i4.filter((function(e){return"personality"===e.type})).map((function(e,n){return(0,r.jsx)(v.v.Item,{onClick:function(){ee(e.id),we(e.id)},children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-4 py-2.5 hover:bg-gray-100 cursor-pointer",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)(d.Z,{icon:"CheckCircleSolidIcon",className:(0,c.AK)("w-4 h-4 text-indigo-700 transition-all ml-auto flex-shrink-0",e.id===X?"opacity-100":"opacity-0")})]})},"tone-".concat(n))}))]})]})]}),(0,r.jsx)("hr",{className:"my-3"}),(0,r.jsxs)("h4",{className:"text-label font-medium mb-2 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{icon:"RefreshIcon",className:"w-5 h-5"})," ","".concat(D?"Rewrite":"Generate"," text")]}),(0,r.jsx)(w.Z,{type:"text",rows:3,value:J,onChange:function(e){return Y(e)},placeholder:"E.g. Target corporate audiences. "}),(0,r.jsxs)("button",{onClick:function(){return be(T,B)},className:"primary w-full mt-3 gap-2",disabled:K,children:[(0,r.jsx)(d.Z,{icon:"StarsIcon",className:"w-4 h-4"}),(0,r.jsx)("span",{children:D?"Rewrite":"Generate"})]})]})})})]})}},59522:function(e,n,t){"use strict";t.d(n,{X:function(){return C}});var i,o=t(47568),l=t(26042),s=t(69396),a=t(29815),r=t(97582),c=t(85893),u=t(67294),d=t(4519),v=t(59435),m=t(16494),f=t(26713),p=t(51121),h=t(75131),x=t(3732),g=t(80360),b=t(38986),w=t(246),y=t.n(w),j=t(9008),k=t.n(j),N=[{id:"popular",name:"Popular"},{id:"recommended",name:"Recommended"},{id:"alphabetical",name:"Alphabetical"}],Z={query:"",sort:"popular"};function C(e){var n,t=e.field,b=e.scrollRef,w=e.value,j=e.onChange,k=(0,u.useState)(!1),C=k[0],_=k[1],P=(0,u.useState)(Z),E=P[0],I=P[1],T=(0,u.useState)((0,x.tl)("pack-fonts")),B=T[0],A=T[1],R=(0,u.useState)((0,x.tl)("google-fonts")),O=R[0],D=R[1],F=(0,u.useState)([]),W=F[0],z=F[1],L=(0,u.useState)(1),M=L[0],G=L[1],K=(0,u.useState)(!0),V=K[0],$=K[1],H=(0,u.useState)(!1),q=H[0],U=H[1],J=(0,d.Z)().get,Y=null===w||void 0===w||null===(n=w[t||"head"])||void 0===n?void 0:n.name,Q=function(){var e=(0,o.Z)((function(){var e,n,t,i,o,l,s,a,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return _(!0),[4,J("/website/get-fonts")];case 1:if((e=r.sent())&&!0===e.status&&e.content){n=(0,v.UU)(e.content),t=[],i=!0,o=!1,l=void 0;try{for(s=function(){var e=c.value;e.head&&-1===t.findIndex((function(n){return n.id===e.head.name}))&&t.push({id:e.head.name,name:e.head.name,family:e.head.family,weight:e.head.weight,style:e.head.style||"normal",variants:[e.head.weight.toString()],source:e.head.source,category:"head"}),e.body&&-1===t.findIndex((function(n){return n.id===e.body.name}))&&t.push({id:e.body.name,name:e.body.name,family:e.body.family,weight:e.body.weight,style:e.body.style||"normal",variants:[e.body.weight.toString()],source:e.body.source,category:"body"})},a=n[Symbol.iterator]();!(i=(c=a.next()).done);i=!0)s()}catch(u){o=!0,l=u}finally{try{i||null==a.return||a.return()}finally{if(o)throw l}}(0,x.Fs)("pack-fonts",t),A(t)}return _(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,o.Z)((function(){return(0,r.__generator)(this,(function(e){return _(!0),fetch("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyCYy4zMaR3SW8BoTio3AtZjFXo8EMqpdnk&sort=popularity&subset=latin",{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.items){var n=e.items.map((function(e){var n=e.variants.map((function(e){return"regular"===e?"400":"italic"===e?"400italic":e})),t=n.find((function(e){return e.includes("400")}))||n[0];return{id:e.family,name:e.family,family:"'".concat(e.family,"', ").concat(e.category),weight:t.replace("italic",""),style:t.includes("italic")?"italic":"normal",variants:n}}));n=n.filter((function(e){return!e.name.toLowerCase().includes("wix")})),(0,x.Fs)("google-fonts",n),D(n)}})).catch((function(e){console.error("Error:",e)})),_(!1),[2]}))}));return function(){return e.apply(this,arguments)}}(),ee=function(e){var n=[];if("recommended"===E.sort&&B?n=(0,x.p$)(B):O&&(n=(0,x.p$)(O)),null===n||void 0===n?void 0:n.length){if("alphabetical"===E.sort&&(n=n.sort((function(e,n){return e.name.localeCompare(n.name)}))),n=n.filter((function(e){return!e.category||e.category.includes(t)})),e)n=n.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}));else if(Y){var i=n.find((function(e){return e.name===Y}));i&&(n=[i].concat((0,a.Z)(n.filter((function(e){return e.name!==Y})))))}(null===n||void 0===n?void 0:n.length)||$(!1),z(n)}};return(0,u.useEffect)((function(){return G(1),clearTimeout(i),i=setTimeout((function(){B&&O&&ee(E.query)}),E.query?400:10),function(){clearTimeout(i)}}),[E.query]),(0,u.useEffect)((function(){G(1),B&&O&&ee()}),[E.sort]),(0,u.useEffect)((function(){ee()}),[t,B,O]),(0,u.useEffect)((function(){B||Q(),O||X()}),[]),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:C?(0,c.jsx)(m.Z,{variant:"icon",className:"w-5 h-5 text-gray-500"}):(0,c.jsx)(f.Z,{icon:"SearchIcon",className:"w-5 h-5 text-gray-500"})}),(0,c.jsx)(p.Z,{placeholder:"Search",inputClassName:"!pl-9",value:E.query,onChange:function(e){return I((function(n){return(0,s.Z)((0,l.Z)({},n),{query:e})}))}})]}),(0,c.jsx)(g.Z,{value:N.find((function(e){return e.id===E.sort})),values:N,onChange:function(e){return I((function(n){return(0,s.Z)((0,l.Z)({},n),{sort:e.id})}))}})]}),(0,c.jsx)(h.E,{value:Y,onChange:function(e){var n=O.find((function(n){return n.id===e}));j(n)},children:(0,c.jsxs)(y(),{loadMore:function(){return function(e){(null===e||void 0===e?void 0:e.length)&&(q||(U(!0),G((function(e){return e+1})),(null===e||void 0===e?void 0:e.length)<30*M&&$(!1),U(!1)))}(W)},hasMore:V,loader:(0,c.jsx)("div",{className:"flex justify-center pt-8 w-full",children:(0,c.jsx)(m.Z,{variant:"icon"})}),useWindow:!1,getScrollParent:function(){return null===b||void 0===b?void 0:b.current},children:[null===W||void 0===W?void 0:W.slice(0,30*M).map((function(e,n){return(0,c.jsx)(h.E.Option,{value:e.name,className:"relative cursor-pointer",children:function(n){var t=n.checked;return(0,c.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,c.jsx)(S,{font:e}),t&&(0,c.jsx)(f.Z,{icon:"CheckIcon",className:"flex-shrink-0 w-5 h-5 text-indigo-600"})]})}},"font-google-".concat(n))})),!C&&!q&&0===(null===W||void 0===W?void 0:W.length)&&(0,c.jsx)("div",{className:"flex justify-center w-full",children:(0,c.jsx)("p",{className:"text-gray-500",children:"No fonts found"})})]})})]})}var S=function(e){var n=e.font;return(0,c.jsxs)(c.Fragment,{children:[(null===n||void 0===n?void 0:n.name)&&(0,c.jsx)(k(),{children:(0,c.jsx)("link",{href:"".concat((0,b.wM)("google"),"?").concat((0,b.pr)(n,!0),"&display=swap"),rel:"stylesheet",crossOrigin:"anonymous"})}),(0,c.jsx)("p",{className:"heading-small",style:(0,b.lk)(n,20,28),children:null===n||void 0===n?void 0:n.name})]})}},49470:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var i=t(47568),o=t(10253),l=t(97582),s=t(85893),a=t(52077),r=t(51121),c=t(4519),u=t(67294),d=t(41664),v=t.n(d),m=t(3732),f=t(26713),p=t(11163),h=t(30120),x=t(16494),g=t(33299),b=t(61437),w=t(26688),y=t(25675),j=t.n(y);function k(e){var n,t,d=e.className,y=e.paywall,k=void 0===y?"global":y,N=e.redirectUrl,Z=e.onBeforeConnect,C=e.onlyExchangeToken,S=(0,o.Z)((0,b.Z)("layout.paywall"),2)[1],_=(0,o.Z)((0,b.Z)("websiteBuilder.paywall"),2)[1],P=(0,u.useState)(!1),E=P[0],I=P[1],T=(0,u.useState)(null),B=T[0],A=T[1],R=(0,u.useState)(""),O=R[0],D=R[1],F=(0,u.useState)(!1),W=F[0],z=F[1],L=(0,u.useState)(!1),M=L[0],G=L[1],K=(0,w.Z)(),V=K.confirm,$=K.ConfirmDialog,H=(0,p.useRouter)(),q=(0,c.Z)(),U=q.get,J=q.post,Y="gmail"===(null===B||void 0===B||null===(n=B.business)||void 0===n||null===(t=n.nylas)||void 0===t?void 0:t.provider)?"Disconnect Google Account":"Disconnect Email",Q=(0,u.useState)(null),X=Q[0],ee=Q[1],ne=(0,g.useSession)().data,te=function(){var e=(0,i.Z)((function(){var e,n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return I(!0),[4,U("/business/get-config")];case 1:return(e=t.sent()).status&&e.content?(n=e.content,(0,m.Fs)("business.config",n),A(n)):A(null),I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((function(){return(0,l.__generator)(this,(function(e){return V("Disconnect email","Are you sure you want to unsync your emails?",(0,s.jsxs)("div",{children:["Disconnecting your Google Account will result in:",(0,s.jsxs)("ul",{className:"list-disc",children:[(0,s.jsx)("li",{children:"Disconnection of your email and deletion of all synced messages from the CRM."}),(0,s.jsx)("li",{children:"Deletion of your calendar and services within Scheduling."}),(0,s.jsx)("li",{children:"Removal of the Scheduling section from your website."})]})]}),"",(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,J("/nylas/disconnect",{}).catch(console.log)];case 1:return(e=n.sent())&&!0===e.status?H.reload():(m.Z9.error(e.message),I(!1)),[2]}}))})),null),[2]}))}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return ee(null),(0,m.oH)(O)?(I(!0),[4,J("/nylas/detect-provider",{email:O}).catch(console.error)]):(m.Z9.error("Invalid email"),[2]);case 1:return(e=n.sent())&&!0===e.status&&e.content?"gmail"!==e.content.provider?ee("Please provide a Google Account email"):Z?Z(le):le():m.Z9.error(e.message),I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,J("/nylas/authorize",{email:O,redirectUrl:N}).catch(console.error)];case 1:return(e=n.sent())&&!0===e.status&&e.content?[4,H.push(e.content.redirectURL)]:[3,3];case 2:return n.sent(),[3,4];case 3:m.Z9.error(e.message),I(!1),n.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e,n,t,i,o;B&&(D(null===B||void 0===B||null===(e=B.office)||void 0===e?void 0:e.email),z((null===B||void 0===B||null===(n=B.business)||void 0===n||null===(t=n.nylas)||void 0===t?void 0:t.token)&&!1===(null===B||void 0===B||null===(i=B.business)||void 0===i||null===(o=i.nylas)||void 0===o?void 0:o.invalid)))}),[B]),(0,u.useEffect)((function(){te()}),[]),(0,u.useEffect)((function(){var e,n,t,i,o;(te(),(null===H||void 0===H||null===(e=H.query)||void 0===e?void 0:e.code)&&(null===H||void 0===H||null===(n=H.query)||void 0===n?void 0:n.state))&&J("/nylas/exchange-token",{code:null===H||void 0===H||null===(i=H.query)||void 0===i?void 0:i.code,validationHash:null===H||void 0===H||null===(o=H.query)||void 0===o?void 0:o.state}).then((function(e){e&&!0===e.status?(H.replace(H.pathname,void 0,{shallow:!0}),te(),m.Z9.success("Email connected!")):m.Z9.error(e.message)})).catch(console.log);(null===H||void 0===H||null===(t=H.query)||void 0===t?void 0:t.id)&&H.replace("/crm/settings",void 0,{shallow:!0})}),[H]),(0,u.useEffect)((function(){G((0,m.oH)(O))}),[O]),C?null:(0,s.jsx)("div",{className:d,children:E?(0,s.jsx)(x.Z,{variant:"list"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Google Calendar sync"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Connect your Google account to sync your Google Calendar with Scheduling"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 mt-4 md:mt-6",children:[(0,s.jsxs)("div",{className:(0,m.AK)("flex flex-col gap-2 md:items-start"),children:[(0,s.jsx)(r.Z,{error:X,onChange:function(e){return D(e)},disabled:W,value:O,className:"w-full",label:"Email",placeholder:"Enter your email"}),!W&&(0,s.jsx)(a.Z,{loading:E,disabled:!M,onClick:function(){var e,n,t;(null===ne||void 0===ne||null===(e=ne.user)||void 0===e||null===(n=e.plan)||void 0===n||null===(t=n.features)||void 0===t?void 0:t.includes("scheduler"))?oe():"global"===k?S(!0):_(!0)},className:"light flex-shrink-0",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 relative mr-4 flex-none",children:(0,s.jsx)(j(),{unoptimized:!0,src:(0,m.sd)("google-logo.png"),layout:"fill",alt:"Google"})}),"Connect with Google"]})})]}),W?(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 px-3 py-2.5 bg-green-50 text-green-700 items-center rounded-xl",children:[(0,s.jsx)(f.Z,{icon:"CheckCircleSolidIcon",className:"w-4 h-4"}),(0,s.jsxs)("p",{children:["Your email has been synced since ",h.ou.fromISO(B.business.nylas.connectedAt).toFormat("MMM dd, yyyy")]})]}),E?(0,s.jsxs)(a.Z,{className:"pl-2 font-medium inline-flex items-center !text-red-700 gap-1",children:[(0,s.jsx)("span",{className:"text-sm",children:"Disconnecting..."}),(0,s.jsx)(x.Z,{variant:"icon"})]}):(0,s.jsx)(a.Z,{onClick:ie,loading:E,className:"link max-w-60",children:(0,s.jsx)("span",{className:"text-red-700",children:Y})})]}):(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["By connecting your email, you agree to Durable's"," ",(0,s.jsx)(v(),{href:"https://durable.co/privacy-policy",children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:"link",children:"Privacy Policy"})})," ","and"," ",(0,s.jsx)(v(),{href:"https://durable.co/terms-of-service",children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:"link",children:"Terms of Service"})})]})]})]}),(0,s.jsx)($,{confirmText:"Disconnect",attention:!0})]})})}},79454:function(e,n,t){"use strict";var i=t(85893),o=t(16494),l=t(67294),s=t(3732),a=t(38462);n.Z=function(e){var n=e.text,t=e.variant,r=(0,a.$G)("mars").t,c=(0,l.useState)(""),u=c[0],d=c[1],v=(0,l.useState)(r("buildingLoader")),m=v[0],f=v[1],p=(0,l.useState)(!1),h=p[0],x=p[1];return(0,l.useEffect)((function(){if(n){d(m),f(n),x(!0);var e=setTimeout((function(){d(n),x(!1)}),500);return function(){return clearTimeout(e)}}}),[n]),"old"===t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black backdrop-blur-xs z-100 font-sans bg-opacity-20 flex flex-col items-center justify-center p-6",children:(0,i.jsx)("div",{className:"py-6 px-8 bg-white bg-opacity-95 rounded-lg shadow-lg",children:(0,i.jsx)(o.Z,{text:n})})}):(0,i.jsx)("div",{className:"fixed inset-0 z-110 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 md:gap-6",children:[(0,i.jsx)(o.Z,{variant:"full-logo"}),(0,i.jsxs)("ul",{className:"font-sans text-2xl leading-9 text-white text-center h-16 md:h-9 overflow-hidden",children:[(0,i.jsx)("li",{className:(0,s.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",h&&"!duration-500 !-translate-y-full"),children:u}),(0,i.jsx)("li",{className:(0,s.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",h&&"!duration-500 !-translate-y-full"),children:m})]})]})})}},78704:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(85893),o=t(72779),l=t(26911),s=t(14218),a=t(3732),r=t(51252);function c(e){var n=e.className;return(0,i.jsxs)("div",{className:(0,a.AK)("flex flex-col overflow-y-auto overflow-x-hidden no-scrollbar pointer-events-none",n),children:[(0,i.jsx)(s.default,{block:{generating:"block"}}),(0,i.jsx)(o.default,{block:{generating:"block",spacing:{top:"none",bottom:"none"}}}),(0,i.jsx)(r.default,{block:{generating:"block",spacing:{top:"small",bottom:"small"}}}),(0,i.jsx)(l.default,{block:{generating:"block",spacing:{top:"none",bottom:"small"}}})]})}},78174:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var i=t(26042),o=t(69396),l=t(85893),s=t(42339),a=t(51121);function r(e){var n=e.className,t=e.block,r=e.setBlock,c=e.type;return(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)(s.Z,{prompt:"mars-generate-tagline",regenerate:!!(null===t||void 0===t?void 0:t.tagline),data:{blockType:c,content:null===t||void 0===t?void 0:t.headline,currentContent:null===t||void 0===t?void 0:t.tagline,meaning:"Tagline for a ".concat(c)},onRegenerate:function(e){r((function(n){return(0,o.Z)((0,i.Z)({},n),{tagline:e})}))},options:{shorten:!1,lengthen:!1,simplify:!1,seo:!1},title:"Tagline",className:"pb-6",children:(0,l.jsx)(a.Z,{value:null===t||void 0===t?void 0:t.tagline,id:"tagline",onChange:function(e){return r((0,o.Z)((0,i.Z)({},t),{tagline:e}))}})}),(0,l.jsx)(s.Z,{prompt:"mars-generate-heading",regenerate:!!(null===t||void 0===t?void 0:t.headline),data:{blockType:c,content:null===t||void 0===t?void 0:t.content,currentContent:null===t||void 0===t?void 0:t.headline,meaning:"Headline for a ".concat(c)},onRegenerate:function(e){r((function(n){return(0,o.Z)((0,i.Z)({},n),{headline:e})}))},options:{lengthen:!1},className:"pb-6",title:"Headline",children:(0,l.jsx)(a.Z,{value:null===t||void 0===t?void 0:t.headline,id:"headline",onChange:function(e){return r((0,o.Z)((0,i.Z)({},t),{headline:e}))}})}),(0,l.jsx)(s.Z,{prompt:"mars-generate-text",regenerate:!!(null===t||void 0===t?void 0:t.content),data:{blockType:c,content:null===t||void 0===t?void 0:t.headline,currentContent:null===t||void 0===t?void 0:t.content,meaning:"Content for a ".concat(c)},onRegenerate:function(e){r((function(n){return(0,o.Z)((0,i.Z)({},n),{content:e})}))},title:"Subtext",children:(0,l.jsx)("textarea",{rows:4,id:"content",value:null===t||void 0===t?void 0:t.content,onChange:function(e){return r((0,o.Z)((0,i.Z)({},t),{content:e.target.value}))},className:"input"})})]})}},40318:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var i=t(26042),o=t(69396),l=t(29815),s=t(85893),a=t(43490),r=(t(67294),t(26713)),c=t(3732),u=t(45587),d=t(43443),v=(0,d.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,s.jsx)("ul",{className:"bg-white relative z-5 mt-6",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,s.jsx)(f,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"list-item-".concat(o))}))})})),m=function(e){switch(e.type){case"page":return(0,s.jsx)(r.Z,{icon:"DocumentTextIcon",from:"heroicons",className:"w-5 h-5"});case"phone":return(0,s.jsx)(r.Z,{icon:"PhoneIcon",from:"heroicons",className:"w-5 h-5"});case"email":return(0,s.jsx)(r.Z,{icon:"EnvelopeIcon",from:"heroicons",className:"w-5 h-5"});case"section":return(0,s.jsx)(r.Z,{icon:"QueueListIcon",from:"heroicons",className:"w-5 h-5"});default:return(0,s.jsx)(r.Z,{icon:"LinkIcon",from:"heroicons",className:"w-5 h-5"})}},f=(0,d.W8)((function(e){var n=e.idx,t=e.item,i=e.last,o=e.onSelect,l=e.onRemove;return(0,s.jsx)("li",{className:(0,c.AK)("relative z-100 bg-white",!i&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,s.jsxs)("div",{className:"relative flex items-center gap-2 py-3",children:[(0,s.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,s.jsx)(p,{})}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[m(t),t.label]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"link sm",onClick:function(){return o(n,t)},children:(0,s.jsx)(r.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,s.jsx)("button",{className:"link sm",onClick:function(){return l(n)},children:(0,s.jsx)(r.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),p=(0,d.JV)((function(){return(0,s.jsx)(r.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function h(e){var n,t,d,m=e.className,f=e.title,p=e.text,h=e.block,x=e.setBlock,g=e.setSelected,b=e.onEdit,w=null===h||void 0===h?void 0:h.buttons;!w&&(null===h||void 0===h?void 0:h.button)&&(w={enabled:!0,items:[null===h||void 0===h?void 0:h.button]});var y=function(){var e,n,t;return{label:"Button",type:"url",link:"#",style:{name:"style1"===(null===w||void 0===w||null===(e=w.items)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.style)||void 0===t?void 0:t.name)?"style2":"style1"}}};return(0,s.jsxs)("div",{className:m,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:f||"Buttons"}),p&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 mr-2",children:p})]}),(0,s.jsx)(a.Z,{enabled:null===w||void 0===w?void 0:w.enabled,onChange:function(e){var n;return x((0,o.Z)((0,i.Z)({},h),{buttons:{enabled:e,items:(null===w||void 0===w||null===(n=w.items)||void 0===n?void 0:n.length)>0?w.items:[y()]},button:void 0}))}})]}),(null===w||void 0===w?void 0:w.enabled)&&(null===w||void 0===w||null===(n=w.items)||void 0===n?void 0:n.length)>0&&(0,s.jsx)(v,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.items,onSortEnd:function(e){var n=e.oldIndex,t=e.newIndex,l=(0,c.p$)(null===w||void 0===w?void 0:w.items);l=(0,u.Rp)(l,n,t),x((0,o.Z)((0,i.Z)({},h),{buttons:(0,o.Z)((0,i.Z)({},w),{items:l}),button:void 0}))},onRemove:function(e){var n=(0,c.p$)(null===w||void 0===w?void 0:w.items);n.splice(e,1),0===n.length&&(w.enabled=!1),x((0,o.Z)((0,i.Z)({},h),{buttons:(0,o.Z)((0,i.Z)({},w),{items:n}),button:void 0}))},onSelect:function(e,n){g(e),b()}}),(null===w||void 0===w?void 0:w.enabled)&&(null===w||void 0===w||null===(t=w.items)||void 0===t?void 0:t.length)<2&&(0,s.jsx)("div",{className:"text-right mt-6",children:(0,s.jsxs)("button",{className:(0,c.AK)("link sm inline-flex items-center gap-2",0===(null===w||void 0===w||null===(d=w.items)||void 0===d?void 0:d.length)&&"mt-6"),onClick:function(){var e;x((0,o.Z)((0,i.Z)({},h),{button:void 0,buttons:(0,o.Z)((0,i.Z)({},w),{items:(0,l.Z)((null===w||void 0===w?void 0:w.items)||[]).concat([y()])})})),g(null===w||void 0===w||null===(e=w.items)||void 0===e?void 0:e.length),b()},children:[(0,s.jsx)("span",{className:"text-sm",children:"Add button"}),(0,s.jsx)(r.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]})}},53511:function(e,n,t){"use strict";var i=t(26042),o=t(69396),l=t(85893),s=t(43490),a=t(3732);n.Z=function(e){var n=e.block,t=e.setBlock,r=e.className;return 1===n.idx?(0,l.jsxs)("div",{className:(0,a.AK)("flex items-center justify-between gap-3",r),children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-1 font-semibold",children:"Combine with header"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Seamlessly blend banner background with page header"})]}),(0,l.jsx)(s.Z,{enabled:null===n||void 0===n?void 0:n.combineWithHeader,onChange:function(e){return t((0,o.Z)((0,i.Z)({},n),{combineWithHeader:e}))}})]}):null}},99887:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(26042),o=t(69396),l=t(85893),s=t(3732),a=t(59823),r=t(76698);function c(e){var n,t=e.block,c=e.setBlock,u=e.className,d=e.horizontalAlign,v=void 0===d||d,m=e.verticalAlign,f=void 0!==m&&m,p=e.rightAlign,h=void 0===p||p;return(0,l.jsxs)("div",{className:(0,s.AK)(u,"space-y-6"),children:[(0,l.jsx)("p",{className:"font-semibold",children:"Content alignment"}),v&&(0,l.jsx)(a.n,{label:"Horizontal",value:(null===t||void 0===t?void 0:t.align)||"center",onChange:function(e){return c((0,o.Z)((0,i.Z)({},t),{align:e}))},rightAlign:h}),"min-h-screen"===(null===t||void 0===t||null===(n=t.spacing)||void 0===n?void 0:n.minHeight)&&f&&(0,l.jsx)(r.c,{label:"Vertical",value:(null===t||void 0===t?void 0:t.verticalAlign)||"center",onChange:function(e){return c((0,o.Z)((0,i.Z)({},t),{verticalAlign:e}))}})]})}},20534:function(e,n,t){"use strict";t.d(n,{Ln:function(){return j},YU:function(){return N},ne:function(){return k},qP:function(){return y}});var i=t(47568),o=t(26042),l=t(69396),s=t(97582),a=t(85893),r=t(80360),c=t(67294),u=t(26713),d=t(75131),v=t(3732),m=t(4519),f=t(42341),p=t(25675),h=t.n(p),x=t(85750),g=[{id:"recommended",name:"Recommended"},{id:"light",name:"Light"},{id:"dark",name:"Dark"},{id:"retro",name:"Retro"},{id:"pastel",name:"Pastel"},{id:"cool",name:"Cool"},{id:"warm",name:"Warm"},{id:"nature",name:"Nature"},{id:"energetic",name:"Energetic"},{id:"happy",name:"Happy"}],b=["Aa","Bb","Cc","Dd"],w=function(e){var n,t=e.className,i=e.palette;return(0,a.jsx)("div",{className:(0,v.AK)("grid grid-cols-4 h-20 w-full mt-6 mb-2 overflow-hidden rounded-lg",t),children:null===i||void 0===i||null===(n=i.colors)||void 0===n?void 0:n.map((function(e,n){return(0,a.jsxs)("div",{className:"relative flex items-end p-3 transition-all",style:{background:e.color},children:[(0,a.jsx)("div",{className:(0,v.AK)("absolute inset-0 border-t border-b border-r border-black border-opacity-10",0===n&&"border-l rounded-l-lg",3===n&&"rounded-r-lg")}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-3 h-3 rounded-full transition-all",style:{background:e.accent}}),(0,a.jsx)("p",{className:"font-medium transition-all",style:{color:(0,v.$O)(e.color||"#FFFFFF")},children:b[n]})]})]},"palette-".concat(n))}))})};function y(e){var n=e.onMigrate;return(0,a.jsx)("div",{className:"pb-6",children:(0,a.jsxs)("div",{className:"p-4 bg-indigo-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("p",{className:"font-semibold text-indigo-800",children:"Color palette"}),(0,a.jsx)("p",{className:"px-2.5 py-0.5 bg-indigo-500 text-xs font-medium text-white rounded-xl",children:"New"})]}),(0,a.jsx)("div",{className:"relative w-64 h-60 mx-auto",children:(0,a.jsx)(h(),{unoptimized:!0,src:(0,v.sd)("palette-illustration.svg"),alt:"Durable color palette",layout:"fill",objectFit:"cover"})}),(0,a.jsx)("div",{className:"relative flex items-center gap-1 flex-wrap -mt-12 mb-4",children:(0,a.jsx)("p",{className:"text-sm text-indigo-800",children:"Better colors, everywhere."})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("button",{className:"primary w-full text-sm",onClick:n,children:"Try color palettes"})})]})})}var j=function(e){var n=e.idx,t=e.website,i=e.setWebsite,s=(0,c.useState)(null),r=s[0],u=s[1],d=function(e){var o,l=(0,v.p$)(t);(null===l||void 0===l||null===(o=l.colorPalette)||void 0===o?void 0:o.colors)&&!isNaN(n)&&(l.colorPalette.colors[n]={color:e.color,accent:e.accent},i(l))};return(0,c.useEffect)((function(){var e,i;(null===t||void 0===t||null===(e=t.colorPalette)||void 0===e?void 0:e.colors)&&!isNaN(n)&&u(null===t||void 0===t||null===(i=t.colorPalette)||void 0===i?void 0:i.colors[n])}),[t,n]),(0,a.jsxs)("div",{className:"divide-y",children:[(0,a.jsxs)("div",{className:"pb-6 space-y-6",children:[(0,a.jsx)(f.Z,{label:"Background",inline:!0,color:null===r||void 0===r?void 0:r.color,onChange:function(e){return d((0,l.Z)((0,o.Z)({},r),{color:e.hex}))}}),(0,a.jsx)(f.Z,{label:"Accent",inline:!0,color:null===r||void 0===r?void 0:r.accent,onChange:function(e){return d((0,l.Z)((0,o.Z)({},r),{accent:e.hex}))}})]}),(0,a.jsxs)("div",{className:"pt-6 space-y-6",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Preview"}),(0,a.jsxs)("div",{className:"relative flex items-end p-3 h-24 rounded-md transition-all",style:{background:null===r||void 0===r?void 0:r.color},children:[(0,a.jsx)("div",{className:"absolute inset-0 border border-black border-opacity-10 rounded-lg"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-4 h-4 rounded-full transition-all",style:{background:null===r||void 0===r?void 0:r.accent}}),(0,a.jsx)("p",{className:"font-medium transition-all",style:{color:(0,v.$O)((null===r||void 0===r?void 0:r.color)||"#000000")},children:b[n]})]})]})]})]})},k=function(e){var n,t,f=e.settings,p=e.migrate,h=e.setMigrate,y=e.onEditColorSet,j=e.onChange,k=(0,c.useState)([]),N=k[0],Z=k[1],C=(0,c.useState)(null),S=C[0],_=C[1],P=(0,c.useState)("recommended"),E=P[0],I=P[1],T=(0,c.useState)(null)[1],B=(0,m.Z)().get,A=function(){var e=(0,i.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,B("/website/get-palettes")];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&Z(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){S&&"empty"!==S.Palette&&j(S)}),[S]),(0,c.useEffect)((function(){if(f){var e,n,t;if(!S)if(null===(e=f.Palette)||void 0===e||null===(n=e.themes)||void 0===n?void 0:n.includes("recommended"))I("recommended");else I((null===(t=f.Palette)||void 0===t?void 0:t.themes[0])||"recommended");_(f)}}),[f]),(0,c.useEffect)((function(){A()}),[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.Z,{className:"w-full mb-6",fullWidth:"true",value:(null===S||void 0===S?void 0:S.Palette)||p?"theme":"custom",options:[{id:"theme",name:"Palette"},{id:"custom",name:"Custom"}],onChange:function(e){T((function(n){var t,i=N.find((function(e){return e._id===n}));return i?_((function(n){var t;return(0,l.Z)((0,o.Z)({},n),{Palette:"theme"===e?i:null,colors:"theme"===e?null:(null===f||void 0===f||null===(t=f.Palette)||void 0===t?void 0:t.colors)||(null===f||void 0===f?void 0:f.colors)||i.colors})})):(p||h(!0),"theme"!==e&&_((function(e){var n;return(0,l.Z)((0,o.Z)({},e),{Palette:null,colors:(null===f||void 0===f||null===(n=f.Palette)||void 0===n?void 0:n.colors)||(null===f||void 0===f?void 0:f.colors)})})),"theme"!==e||p||_((function(e){var n;return(0,l.Z)((0,o.Z)({},e),{Palette:"empty",colors:(null===f||void 0===f||null===(n=f.Palette)||void 0===n?void 0:n.colors)||(null===f||void 0===f?void 0:f.colors)})}))),null===S||void 0===S||null===(t=S.Palette)||void 0===t?void 0:t._id}))}}),((null===S||void 0===S?void 0:S.Palette)||p)&&(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Z,{placeholder:"Select",values:g,value:g.find((function(e){return e.id===(E||"recommended")})),onChange:function(e){return I(e.id)}}),(0,a.jsx)(d.E,{value:null===S||void 0===S||null===(n=S.Palette)||void 0===n?void 0:n._id,onChange:function(e){return _((function(n){return(0,l.Z)((0,o.Z)({},n),{Palette:N.find((function(n){return n._id===e}))})}))},children:null===N||void 0===N?void 0:N.filter((function(e){return e.themes.includes(E)})).map((function(e,n){return(0,a.jsx)(d.E.Option,{value:e._id,className:"cursor-pointer",children:function(n){var t=n.checked;return(0,a.jsx)(w,{palette:e,className:t&&"ring-2 ring-offset-2 ring-indigo-600 shadow-md"})}},"palette-".concat(e._id,"-color-").concat(n))}))})]}),!(null===S||void 0===S?void 0:S.Palette)&&!p&&(0,a.jsx)("div",{className:"space-y-6",children:null===S||void 0===S||null===(t=S.colors)||void 0===t?void 0:t.map((function(e,n){return(0,a.jsxs)("div",{className:"relative flex items-center justify-between gap-3 p-3.5 rounded-md cursor-pointer",style:{background:e.color},onClick:function(){return y(n)},children:[(0,a.jsx)("div",{className:"absolute inset-0 border border-black border-opacity-10 rounded-md"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-4 h-4 rounded-full",style:{background:e.accent}}),(0,a.jsx)("p",{className:"font-medium",style:{color:(0,v.$O)(e.color)},children:b[n]})]}),(0,a.jsx)("button",{className:"relative z-5 flex-shrink-0",style:{color:(0,v.$O)(e.color)},children:(0,a.jsx)(u.Z,{icon:"PencilIcon",from:"heroicons",className:"w-5 h-5"})})]},"palette-color-set-".concat(n))}))})]})})};function N(e){var n=e.className,t=e.value,i=e.onEdit;return(0,a.jsxs)("div",{className:n,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Color palette"}),i&&(0,a.jsx)("button",{className:"link text-sm",onClick:i,children:"Edit"})]}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:i,children:(0,a.jsx)(w,{palette:(null===t||void 0===t?void 0:t.Palette)||t,className:"shadow-sm"})})]})}},88268:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(26042),o=t(69396),l=t(85893),s=(t(67294),t(33299)),a=t(80360),r=t(43490),c=t(3732),u=t(51121),d=[{id:"default",name:"Default",blocks:[]},{id:"about-us",name:"About us",blocks:["hero","text"]},{id:"pitch",name:"Elevator pitch",blocks:["text"]},{id:"welcome",name:"Welcome text",blocks:["text"]},{id:"service-list",name:"Services",blocks:["list"]},{id:"service",name:"Service",blocks:["hero"]},{id:"stats",name:"Statistics",blocks:["list"]},{id:"team",name:"Team",blocks:["hero"]},{id:"team-list",name:"Team members",blocks:["list"]},{id:"our-work",name:"Our work",blocks:["list","hero","gallery","image-grid","image-carousel"]},{id:"portfolio",name:"Portfolio",blocks:["gallery","image-grid","image-carousel"]},{id:"faq",name:"FAQ",blocks:["text"]},{id:"privacy-policy",name:"Privacy policy",blocks:["text"]},{id:"terms-of-service",name:"Terms of service",blocks:["text"]},{id:"marketing-focused",name:"Marketing focused",blocks:["text","hero"]},{id:"cta",name:"Call to action",blocks:["banner"]},{id:"cta-menu",name:"Call to action menu",blocks:["banner","cta"]},{id:"page-heading",name:"Internal page header",blocks:["banner"]},{id:"our-mission",name:"Our mission",blocks:["text"]},{id:"our-values",name:"Our values",blocks:["list"]},{id:"service-features",name:"Service features",blocks:["list"]},{id:"why-choose-us",name:"Why choose us",blocks:["text"]},{id:"faq-service",name:"About service",blocks:["faq"]}],v=[{id:"h1",name:"Heading 1"},{id:"h2",name:"Heading 2"},{id:"h3",name:"Heading 3"},{id:"body-large",name:"Body large"},{id:"body-normal",name:"Body normal"},{id:"body-small",name:"Body small"}];function m(e){var n,t,m,f,p,h,x,g,b=e.block,w=e.setBlock,y=e.purpose,j=e.randomize,k=(0,s.useSession)().data,N=d.filter((function(e){var n;return e.blocks.includes(null===b||void 0===b||null===(n=b.WebsiteBlock)||void 0===n?void 0:n.type)||0===e.blocks.length}));return(null===k||void 0===k||null===(n=k.user)||void 0===n?void 0:n.isTemplateManager)?(0,l.jsxs)("div",{className:"mt-6 pt-6 space-y-4",children:[(0,l.jsx)("p",{className:"mb-6 font-semibold",children:"Template settings"}),y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{label:"Purpose",placeholder:"Select",values:N,value:N.find((function(e){return e.id===(null===b||void 0===b?void 0:b.type)}))||N[0],onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{type:e.id}))}}),"other"===(null===b||void 0===b?void 0:b.type)&&(0,l.jsx)(u.Z,{label:"Custom purpose",value:(null===b||void 0===b||null===(t=b.template)||void 0===t?void 0:t.purpose)||"",onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{template:(0,o.Z)((0,i.Z)({},b.template),{purpose:e})}))}})]}),["pitch","welcome"].includes(null===b||void 0===b?void 0:b.type)&&(0,l.jsx)(a.Z,{label:"Text size",placeholder:"Select",values:v,value:v.find((function(e){var n;return e.id===(null===b||void 0===b||null===(n=b.template)||void 0===n?void 0:n.textSize)}))||v[2],onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{template:(0,o.Z)((0,i.Z)({},b.template),{textSize:e.id})}))}}),(["cta","cta-menu","page-heading"].includes(null===b||void 0===b?void 0:b.type)||["cta"].includes(null===b||void 0===b||null===(m=b.WebsiteBlock)||void 0===m?void 0:m.type))&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-700",children:"Content generation"}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-700",children:"Tagline"}),(0,l.jsx)(r.Z,{enabled:null===b||void 0===b||null===(f=b.template)||void 0===f?void 0:f.showTagline,onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{template:(0,o.Z)((0,i.Z)({},b.template),{showTagline:e})}))}})]}),"page-heading"!==(null===b||void 0===b?void 0:b.type)&&(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-700",children:"Heading"}),(0,l.jsx)(r.Z,{enabled:null===b||void 0===b||null===(p=b.template)||void 0===p?void 0:p.showHeading,onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{template:(0,o.Z)((0,i.Z)({},b.template),{showHeading:e})}))}})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-700",children:"Content"}),(0,l.jsx)(r.Z,{enabled:null===b||void 0===b||null===(h=b.template)||void 0===h?void 0:h.showContent,onChange:function(e){return w((0,o.Z)((0,i.Z)({},b),{template:(0,o.Z)((0,i.Z)({},b.template),{showContent:e})}))}})]})]}),j&&(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-700",children:"Randomize spacing"}),(0,l.jsx)(r.Z,{enabled:!(0,c.$K)(null===b||void 0===b||null===(x=b.randomize)||void 0===x?void 0:x.spacing)||(null===b||void 0===b||null===(g=b.randomize)||void 0===g?void 0:g.spacing),onChange:function(e){return w((function(n){return(0,o.Z)((0,i.Z)({},n),{randomize:(0,o.Z)((0,i.Z)({},n.randomize),{spacing:e,minHeight:void 0})})}))}})]})]}):null}},28774:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(26042),o=t(85893),l=t(67294),s=t(3732),a=(t(61135),t(96281)),r=t(51121),c=t(32336);function u(e){var n=e.item,t=e.onChange,u=(0,l.useState)(null),d=u[0],v=u[1],m=function(e){var n=(0,i.Z)({},d,e);v(n),t(n)};return(0,l.useEffect)((function(){v(n?(0,s.p$)(n):null)}),[n]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{suggestions:!0,gettyImages:!0,unsplash:!0,icons:!0,upload:!0,library:!0,location:"blocks",allowDeletion:!1,pictures:null===d||void 0===d?void 0:d.media,onChange:function(e){var n;return m({media:e[0],altText:(null===(n=e[0])||void 0===n?void 0:n.description)||""})},regenerateOptions:{enabled:!0}}),(0,o.jsxs)("div",{className:"pt-6",children:[(0,o.jsx)("div",{className:"flex items-center justify-between gap-4 mb-1",children:(0,o.jsx)("p",{className:"font-semibold",children:"Alt text"})}),(0,o.jsx)(r.Z,{className:"w-full",placeholder:"Enter alt text",helperText:"Describe the image to improve SEO and accessibility",value:(null===d||void 0===d?void 0:d.altText)||"",onChange:function(e){return m({altText:e})}})]}),(0,o.jsx)(c.Z,{value:d,onChange:function(e){return m({positionX:"".concat(e.x,"%"),positionY:"".concat(e.y,"%")})}})]})}},42593:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(85893),o=(t(39828),t(57333)),l=t(80360),s=t(33253),a=t(9198),r=t.n(a),c=t(14441),u=t(30120),d=t(3732),v=t(81372);function m(e){var n=e.field,t=e.totalNoFields,a=e.index,m=e.messageIsLastField,f=e.textColor,p=e.fieldStyle,h=e.country,x=a%2===0&&a===t-(m?2:1);if("address:full"===n._id)return(0,i.jsx)(v.Z,{field:n,textColor:f,fieldStyle:p,country:h},n._id);switch(n.type){case"text":return(0,i.jsxs)("div",{className:(0,d.AK)(x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:p,type:"text"})]});case"textarea":return(0,i.jsxs)("div",{className:"col-span-2",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)("textarea",{className:"input border-none !shadow-none !placeholder-current",rows:"5",style:p})]});case"number":return(0,i.jsxs)("div",{className:(0,d.AK)("w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)(o.Z,{style:p,thousandSeparator:!1,allowNegative:!0,decimalScale:0,placeholder:"0",allowLeadingZeros:!1,allowEmptyFormatting:!1,className:"input w-full border-none !shadow-none !placeholder-current"})]});case"money":return(0,i.jsxs)("div",{className:(0,d.AK)("w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)(o.Z,{thousandSeparator:",",decimalSeparator:".",allowNegative:!0,decimalScale:2,prefix:"$",placeholder:"$0",allowLeadingZeros:!1,allowEmptyFormatting:!1,className:"input w-full border-none !shadow-none !placeholder-current",style:p})]});case"date":return(0,i.jsxs)("div",{className:(0,d.AK)("flex flex-col md:min-w-40 w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)(r(),{className:(0,d.AK)("w-full flex-1",f&&(0,d.jn)((0,d.$O)(f))?"bg-white/[.07]":"bg-black/[0.7]"),selected:new Date,dateFormat:"MMM dd, yyyy",calendarClassName:"tailwind-calendar",customInput:(0,i.jsx)(c.Z,{className:"border-none !shadow-none !placeholder-current",labelClass:"text-current",style:p,hint:u.ou.now().toFormat("DD")})})]});case"checkbox":var g,b;return(0,i.jsxs)("div",{className:(0,d.AK)("flex flex-col md:min-w-40 w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)("div",{className:"flex flex-col gap-x-6 gap-y-2 mt-3",children:null===(b=null===(g=n.options)||void 0===g?void 0:g.filter((function(e){return!e.deleted})))||void 0===b?void 0:b.map((function(e){return(0,i.jsxs)("label",{className:"inline-flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",className:"mr-1",defaultValue:"false",readOnly:!0}),(0,i.jsx)("span",{style:{color:f},children:e.name})]},e.id)}))})]});case"dropdown":var w;return(0,i.jsxs)("div",{className:(0,d.AK)("flex flex-col md:min-w-40 w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)(l.Z,{className:"w-full",btnClassName:"border-none !shadow-none !placeholder-current",style:p,values:null===(w=n.options)||void 0===w?void 0:w.filter((function(e){return!e.deleted})),iconStyle:{color:f}})]});case"rating":return(0,i.jsxs)("div",{className:(0,d.AK)("flex flex-col md:min-w-40 w-full",x?"col-span-2":""),children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:f},children:n.label}),(0,i.jsx)(s.Z,{className:"flex mt-2",rating:0})]});default:return console.error("Unknown field type: ".concat(n.type),n),null}}},81372:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var i=t(85893),o=t(38462),l=t(94874),s=t(80360);function a(e){e.field;var n=e.textColor,t=e.fieldStyle,a=e.country,r=(0,o.$G)("block_contact").t;return(0,i.jsxs)("div",{className:"py-4 col-span-2",children:[(0,i.jsx)("legend",{className:"body-small",style:{color:n},children:r("label.address")}),(0,i.jsxs)("fieldset",{className:"mt-4 mb-4 flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[(0,i.jsxs)("div",{className:"col-span-2",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r("label.line1")}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:t,type:"text",autoComplete:"address-line1"})]}),(0,i.jsxs)("div",{className:"col-span-2",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r("label.line2")}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:t,type:"text",autoComplete:"address-line2"})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r("label.city")}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:t,type:"text",autoComplete:"address-level2"})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r("label.".concat((0,l.rv)(a).toLowerCase()))}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:t,type:"text",autoComplete:"address-level1"})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r((0,l.oj)(a))}),(0,i.jsx)("input",{className:"input border-none !shadow-none !placeholder-current",style:t,type:"text",autoComplete:"postal-code"})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("label",{className:"mb-1 body-small",style:{color:n},children:r("label.country")}),(0,i.jsx)(s.Z,{className:"w-full",btnClassName:"border-none !shadow-none !placeholder-current",style:t,values:[],iconStyle:{color:n},autocomplete:"country"})]})]})]})}},89375:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return Dt},default:function(){return Ft}});var i=t(47568),o=t(14924),l=t(26042),s=t(69396),a=t(10253),r=t(29815),c=t(97582),u=t(85893),d=t(59435),v=t(67294),m=t(37353),f=t(59965),p=t(13840),h=t(3732);var x=t(4519),g=t(52077),b=t(43490),w=t(85750),y=t(51121),j=t(16494),k=[3,6,9,12].map((function(e){return{id:e,name:e}}));function N(e){var n,t,o=e.block,a=e.setBlock,r=e.businessConfig,m=e.getBusinessConfig,f=(0,v.useState)(!1),N=f[0],Z=f[1],C=(null===r||void 0===r||null===(n=r.business)||void 0===n||null===(t=n.socialAccounts)||void 0===t?void 0:t.instagram)||{},S=(0,h.h_)(),_=(0,x.Z)().remove;function P(){return(P=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return Z(!0),[4,_("/business/remove-social-channel",{type:"instagram"})];case 1:return(e=n.sent()).status&&e.content?(h.Z9.success("Instagram account disconnected"),m((function(){Z(!1)}))):Z(!1),(0,d.Wf)({type:"instagram-disconnected"}),[2]}}))}))).apply(this,arguments)}var E=(0,v.useMemo)((function(){return function(e){return"https://api.instagram.com/oauth/authorize\n  ?client_id=".concat("396290006289781","\n  &redirect_uri=").concat("https://app.durable.co/oauth/instagram","\n  &scope=user_profile,user_media\n  &response_type=code\n  &state=").concat(encodeURIComponent(JSON.stringify({businessId:e}))).replace(/\s/g,"")}(S)}),[S]);return C.connected?(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Instagram account"}),(0,u.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:N?(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)(j.Z,{variant:"icon",className:"w-4 h-4"}),(0,u.jsx)("span",{children:"Disconnecting"})]}):(0,u.jsxs)("div",{className:"flex items-start gap-6",children:[(0,u.jsx)(p.Z,{className:"w-5 h-5 text-green-500"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"text-gray-900 text-sm",children:["The Instagram account ",(0,u.jsx)("span",{className:"font-semibold",children:C.username})," is now connected."]}),(0,u.jsx)("button",{className:"link",disabled:N,onClick:function(){return P.apply(this,arguments)},children:(0,u.jsx)("span",{className:"text-red-600 text-sm",children:"Disconnect"})})]})]})})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"pb-6",children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Tagline"}),(0,u.jsx)(y.Z,{id:"tagline",value:null===o||void 0===o?void 0:o.tagline,onChange:function(e){return a((0,s.Z)((0,l.Z)({},o),{tagline:e}))}})]}),(0,u.jsxs)("div",{className:"pb-6",children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Headline"}),(0,u.jsx)(y.Z,{id:"headline",value:null===o||void 0===o?void 0:o.headline,onChange:function(e){return a((0,s.Z)((0,l.Z)({},o),{headline:e}))}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Subtext"}),(0,u.jsx)("textarea",{rows:4,id:"content",value:null===o||void 0===o?void 0:o.content,onChange:function(e){return a((0,s.Z)((0,l.Z)({},o),{content:e.target.value}))},className:"input"})]})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsxs)("div",{className:"my-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Show Instagram handle"}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6 mt-2",children:[(0,u.jsx)("p",{className:"text-gray-500 text-sm leading-tight",children:"Show your Instagram handle at the bottom of the feed"}),(0,u.jsx)(b.Z,{enabled:null===o||void 0===o?void 0:o.showAccount,onChange:function(e){return a((0,s.Z)((0,l.Z)({},o),{showAccount:e}))}})]})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsx)(w.Z,{label:"Number of posts",value:(null===o||void 0===o?void 0:o.numPosts)||6,options:k,onChange:function(e){return a((0,s.Z)((0,l.Z)({},o),{numPosts:e}))}})]}):(0,u.jsxs)("div",{className:"flex-col justify-start items-start gap-6 inline-flex",children:[(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Connect Instagram account"}),(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"We'll need limited access to your Instagram account to display your feed."})]}),(0,u.jsx)(g.Z,{onClick:function(){Z(!0);var e=window.open(E,"_blank","popup=true width=600 height=600 noopener,noreferrer");window.onInstagramConnected=function(n){n.status?(e.close(),clearInterval(window.checkPopupTimer),delete window.checkPopupTimer,setTimeout((function(){window.onInstagramConnected&&h.Z9.success("Instagram account connected"),delete window.onInstagramConnected}),100),m((function(){Z(!1)})),(0,d.Wf)({type:"instagram-connected"})):(console.log("Failed to link account",n),h.Z9.error("Instagram connection failed, please try again"),e.close(),Z(!1),delete window.onInstagramConnected)},window.checkPopupTimer||(window.checkPopupTimer=setInterval((function(){(null===e||void 0===e?void 0:e.closed)&&(clearInterval(window.checkPopupTimer),delete window.checkPopupTimer,Z(!1),h.Z9.warn("Instagram connection window close before your account was linked, please try again"))}),500))},loading:N,className:"primary",children:"Connect Account"})]})}var Z=t(90748),C=t(96065),S=t(38717),_=t(43226),P=(t(59823),t(34122)),E=t(94051),I=t(33424),T=t(35781),B=t(49372);function A(e){var n,t=e.website,i=e.block,o=e.setEdit,a=e.setBlock;return!(null===i||void 0===i?void 0:i.align)&&(null===i||void 0===i||null===(n=i.headerFooterAlign)||void 0===n?void 0:n.horizontal)&&(i.align=i.headerFooterAlign.horizontal),(0,u.jsxs)("div",{children:[(0,u.jsx)(S._u,{website:t,block:i,onEdit:function(){return o("Colors")}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(I.Z,{block:i,setBlock:a}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(B.Z,{block:i,setBlock:a}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(T.Z,{label:"Alignment",labelClassName:"text-body font-semibold",block:i,setBlock:a}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(P.nR,{value:null===i||void 0===i?void 0:i.cornerRadius,defaultValue:null===t||void 0===t?void 0:t.cornerRadius,onChange:function(e){return a((0,s.Z)((0,l.Z)({},i),{cornerRadius:e}))}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6 mb-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Remove gaps"}),(0,u.jsx)(b.Z,{enabled:null===i||void 0===i?void 0:i.noGutters,onChange:function(e){return a((0,s.Z)((0,l.Z)({},i),{noGutters:e}))}})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Full width"}),(0,u.jsx)(b.Z,{enabled:null===i||void 0===i?void 0:i.fullWidth,onChange:function(e){return a((0,s.Z)((0,l.Z)({},i),{fullWidth:e}))}})]})]}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(E.ZP,{block:i,setBlock:a,spacing:!0,minHeight:!1,verticalAlign:!1}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(Z.iy,{block:i,setBlock:a,website:t}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(_.S,{block:i,setBlock:a,onEdit:function(){return o("Divider style")}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(C.x,{block:i,setBlock:a})]})}var R=(0,v.memo)((function(e){var n=e.block,t=e.businessConfig,i=e.getBusinessConfig,o=e.loading,a=e.open,r=e.rtl,c=e.setBlock,d=e.setOpen,p=e.setRtl,h=e.website,x=function(){d(!1)},g=(0,v.useState)(null),b=g[0],w=g[1],y={block:n,setBlock:c,website:h,edit:b,setEdit:w};return(0,u.jsxs)(m.Z,{title:"Instagram",open:a,rtl:r,setRtl:p,edit:b,setEdit:w,loading:o,onClose:x,hiddenTabs:["Colors","Divider style"],children:[(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(N,(0,s.Z)((0,l.Z)({},y),{businessConfig:t,getBusinessConfig:i}))}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(A,(0,l.Z)({},y))}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:h,block:n,setBlock:c,onTryPalette:x})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_.S,{block:n,setBlock:c,isEditing:!0})})]})})),O=t(2489),D=t.n(O);function F(e){if(!Array.isArray(e)||0===e.length)return e;var n=e.filter((function(e){return!["header","footer"].includes(e.WebsiteBlock.type)}));if(n.find((function(e){return(0,h.$K)(e.generating)}))&&(n=n.map((function(e){return(0,h.$K)(e.generating)&&delete e.generating,e}))),n.every((function(e){return!!e._id})))return e.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})}));var t=[],i=n.map((function(e){return e._id||(e._id=D()()),e}));i=i.map((function(e){var n,o,l;return e.buttons&&0!==(null===(n=e.buttons.items)||void 0===n?void 0:n.length)?(e.buttons.items=null===(o=e.buttons)||void 0===o||null===(l=o.items)||void 0===l?void 0:l.map((function(n){if("section"!==n.type)return n;if(D().isValid(n.link)&&!n.link.includes("-"))return n;var o=i.find((function(e,t){return(0,d.IF)(e,t,!0)===n.link}));return o?(n.link=o._id,n):(t.push({block:e,button:n}),n)})),e):e})),t.length>0&&window.console&&console.warn("Failed to migrate these links to objectIds",t);var o=i.length,a=(0,s.Z)((0,l.Z)({},e[0]),{idx:0}),c=(0,s.Z)((0,l.Z)({},e.find((function(e){var n;return"footer"===(null===e||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)}))),{idx:o});return[a].concat((0,r.Z)(i),[c])}var W="onboarding-survey-trigger",z=t(9459),L=t(11355),M=t(26713),G=t(25675),K=t.n(G),V=t(33299),$=t(43714),H=t(39260),q=[{title:"Banner",name:"banner",icon:"HomeIcon",iconVariant:"outlined"},{title:"Services",name:"services",icon:"WrenchScrewdriverIcon",iconVariant:"outlined"},{title:"Content",name:"content",icon:"TextIcon"},{title:"Clients",name:"clients",icon:"StarIcon",iconVariant:"outlined"},{title:"Image gallery",name:"image",icon:"PhotoIcon",iconVariant:"outlined"},{title:"Video content",name:"video",icon:"FilmIcon",iconVariant:"outlined"},{title:"Team members",name:"team",icon:"UserGroupIcon",iconVariant:"outlined"},{title:"Business hours",name:"business-hours",icon:"ClockIcon",iconVariant:"outlined"},{title:"Testimonials",name:"testimonials",icon:"ChatBubbleBottomCenterTextIcon",iconVariant:"outlined"},{title:"Map location",name:"location",icon:"MapIcon",iconVariant:"outlined"},{title:"Contact form",name:"contact",icon:"Bars3BottomLeftIcon",iconVariant:"outlined"},{title:"Schedule",name:"schedule",icon:"CalendarIcon",iconVariant:"outlined"},{title:"Social media",name:"social-media",icon:"ShareIcon",iconVariant:"outlined"},{title:"Custom code",name:"custom-code",icon:"CodeBracketIcon",iconVariant:"outlined"},{title:"External sections",name:"external",icon:"SquaresIcon"}];function U(e){var n=e.open,t=e.setOpen,o=e.onSelect,l=e.setOpenPaywall,s=(0,v.useState)(!1),a=s[0],r=s[1],d=(0,v.useState)((0,h.tl)("builder.blockTypes")),m=d[0],p=d[1],g=(0,v.useState)([]),b=g[0],w=g[1],k=(0,v.useState)(""),N=k[0],Z=k[1],C=(0,v.useState)(null),S=C[0],_=C[1],P=(0,v.useState)(0),E=P[0],I=P[1],T=(0,v.useState)(null),B=T[0],A=T[1],R=(0,V.useSession)().data,O=(0,$.Z)().track,D=(0,v.useRef)(null),F=(0,x.Z)(),W=F.get,z=F.post;(0,H.m)(B,!0);var G=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return r(!0),[4,W("/website/get-blocks").catch(console.log)];case 1:return(e=t.sent())&&!0===e.status&&e.content&&(n=e.content.filter((function(e){return e.active&&"header"!==e.type&&"footer"!==e.type})),p(n),(0,h.Fs)("builder.blockTypes",n)),r(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),U=function(e){var n,t,i;(null===R||void 0===R||null===(n=R.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))||"durable"===e.source?(z("/website/track-block-usage",{blockId:e._id}).catch(console.log),o(e)):l("premium_sections"),O("website:".concat("common-ninja"===(null===e||void 0===e?void 0:e.source)?"premium-":"","section-added"),{block:null===e||void 0===e?void 0:e.type})};return(0,v.useEffect)((function(){return n&&!m&&G(),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:n}})),function(){Z(""),I(0),_(null),w([])}}),[n]),(0,u.jsx)(L.u,{show:n,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:(0,h.AK)("max-w-full sticky top-0 flex items-center justify-between bg-white z-10 py-2 pr-1 md:pr-3 border-b md:rounded-t-lg",(0,h.$K)(S)?"pl-1 md:pl-3":"pl-4 md:pl-6"),children:[(0,u.jsxs)("div",{className:"relative flex items-center z-5",children:[(0,u.jsx)(L.u,{as:v.Fragment,show:(0,h.$K)(S),enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-x-3",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-3",children:(0,u.jsxs)("button",{type:"button",className:"absolute top-1/2 left-0 -translate-y-1/2 light transparent icon",onClick:function(){I(0),_(null),w([])},children:[(0,u.jsx)("span",{className:"sr-only",children:"Exit editing"}),(0,u.jsx)(M.Z,{icon:"ChevronLeftIcon",className:"h-5 w-5"})]})}),(0,u.jsx)("p",{className:(0,h.AK)("font-bold text-gray-900 ml-0 py-2.5 transition-all duration-300 capitalize-first-letter",(0,h.$K)(S)&&"ml-10"),children:(null===S||void 0===S?void 0:S.title)||"Add section"})]}),(0,u.jsxs)("button",{className:"light icon transparent",onClick:function(){return t(!1)},children:[(0,u.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,u.jsx)(M.Z,{icon:"XSolidIcon",className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,u.jsxs)(f.O.Group,{as:"div",className:"flex flex-col h-full md:h-auto",selectedIndex:E,children:[(0,u.jsxs)(f.O.List,{className:"hidden",children:[(0,u.jsx)(f.O,{className:"hidden",children:"Categories"}),(0,u.jsx)(f.O,{className:"hidden",children:"Blocks"})]}),(0,u.jsxs)(f.O.Panels,{ref:function(e){return A(e?{current:e}:null)},className:"tab-panels h-full !p-0",style:{minHeight:"235px",maxHeight:"calc(100vh - 138px)"},children:[(0===E||""!==N)&&(0,u.jsx)("div",{className:"sticky top-0 z-10 flex gap-4 justify-between p-4 md:px-6 border-b bg-white",children:(0,u.jsxs)("div",{className:"w-full relative",children:[(0,u.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,u.jsx)(M.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,u.jsx)(y.Z,{ref:D,inputClassName:"!pl-9",placeholder:"Search",value:N,autoFocus:!0,disabled:a,onChange:function(e){Z(e),_(null),""===e?I(0):(I(1),w(m.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())})).sort((function(e,n){return e.order-n.order}))))},onKeyUp:function(e){"Enter"===(null===e||void 0===e?void 0:e.key)&&(e.preventDefault(),1===b.length&&U(b[0]))}})]})}),(0,u.jsx)(f.O.Panel,{className:"pb-2 outline-none",unmount:!1,children:q.map((function(e,n){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4 py-3.5 px-4 md:px-6 cursor-pointer transition-colors hover:bg-indigo-50",onClick:function(){return!a&&function(e){Z(""),I(1),_(e),w(m.filter((function(n){var t;return null===(t=n.categories)||void 0===t?void 0:t.includes(e.name)})).sort((function(e,n){return e.order-n.order})))}(e)},children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(M.Z,{icon:e.icon||"SquaresIcon",variant:e.iconVariant,className:"w-5 h-5"}),(0,u.jsx)("div",{className:"font-medium",children:e.title})]}),(0,u.jsx)(M.Z,{icon:"ChevronRightIcon",className:"w-5 h-5"})]},"category-".concat(e.name,"-").concat(n)),n<q.length-1&&(0,u.jsx)("hr",{className:"my-0 mx-4 md:mx-6"})]})}))}),(0,u.jsxs)(f.O.Panel,{className:"p-4 md:px-6 space-y-4 outline-none",unmount:!1,children:[a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"})]}),!a&&b.map((function(e){var n,t,i;return(0,u.jsxs)("div",{className:"group relative flex items-center h-32 gap-4 border border-gray-300 p-4 rounded-md ring-0 ring-indigo-700 cursor-pointer transition-all hover:ring-1 hover:border-indigo-700 hover:shadow-md",onClick:function(){return U(e)},children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("p",{className:"text-sm font-semibold group-hover:text-indigo-700",children:e.name}),!(null===R||void 0===R||null===(n=R.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))&&"durable"!==e.source&&(0,u.jsx)("span",{className:"badge yellow",children:"Premium"})]}),(0,u.jsx)("p",{className:"text-sm mb-2 text-gray-500",children:e.description}),(0,u.jsx)("p",{className:"text-xs font-medium text-gray-800 capitalize",children:e.source&&"durable"!==e.source?"By ".concat(e.source.replaceAll("-"," ")):"By Durable"})]}),(0,u.jsx)("div",{className:"flex-shrink-0 self-center relative w-20 h-20",children:(null===e||void 0===e?void 0:e.previewUrl)?(0,u.jsx)(K(),{unoptimized:!0,className:"rounded",src:e.previewUrl,objectFit:"cover",layout:"fill",alt:e.name}):(0,u.jsx)(K(),{unoptimized:!0,className:"rounded",src:(0,h.sd)("new-blocks/".concat(e.type,".svg")),objectFit:"cover",height:80,width:80,alt:e.name})})]},e._id)})),!a&&""!==N&&0===b.length&&(0,u.jsx)("div",{className:"h-32 text-sm font-normal text-black-500",children:"No section found."})]})]})]})]})})})})})}var J=t(32130),Y=t(30120),Q=t(29064),X=t(12280),ee=t(46930),ne=t(11163),te=t(60728),ie=t(75511),oe=t(80360),le=[{id:"recommended",name:"Recommended"},{id:"most_popular",name:"Most popular"}],se={term:"",sortBy:"recommended"};function ae(e){var n=e.open,t=e.setOpen,o=e.onSelect,a=e.widgets,r=e.setOpenPaywall,d=(0,v.useState)([]),m=d[0],f=d[1],p=(0,v.useState)([]),g=p[0],b=p[1],w=(0,v.useState)(!1),k=w[0],N=w[1],Z=(0,v.useState)(se),C=Z[0],S=Z[1],_=(0,V.useSession)().data,P=(0,x.Z)(),E=P.get,I=P.post,T=function(e,n){var t;return e.source===n.source?"most_popular"===(null===C||void 0===C?void 0:C.sortBy)?(null===n||void 0===n?void 0:n.usage)-(null===e||void 0===e?void 0:e.usage):null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.localeCompare(null===n||void 0===n?void 0:n.name):"durable"===e.source?-1:1},B=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return N(!0),[4,E("/website/get-blocks",{taxonomy:"widget"}).catch(console.log)];case 1:return(e=t.sent())&&!0===e.status&&e.content&&((null===a||void 0===a?void 0:a.length)>0?(n=e.content.filter((function(e){return!(null===a||void 0===a?void 0:a.some((function(n){return n.type===e.type})))})),f(n),b(n.sort(T))):(f(e.content),b(e.content.sort(T)))),N(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){b(m.filter((function(e){return e.name.toLowerCase().includes(null===C||void 0===C?void 0:C.term.toLowerCase())})).sort(T))}),[C]),(0,v.useEffect)((function(){return n&&B(),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:n}})),function(){S(se),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:!1}}))}}),[n]),(0,u.jsx)(L.u,{show:n,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-white border-b p-4 md:pl-6 md:rounded-t-lg",children:[(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Widgets"}),(0,u.jsx)("button",{type:"button",className:"text-gray-600 hover:text-gray-400",onClick:function(){return t(!1)},children:(0,u.jsx)(M.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-4 py-6",children:[(0,u.jsxs)("div",{className:"flex gap-4 justify-between px-6",children:[(0,u.jsxs)("div",{className:"w-full md:w-50 relative",children:[(0,u.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,u.jsx)(M.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,u.jsx)(y.Z,{inputClassName:"!pl-9",value:null===C||void 0===C?void 0:C.term,onChange:function(e){return S((0,s.Z)((0,l.Z)({},C),{term:e}))},placeholder:"Search"})]}),(0,u.jsx)(oe.Z,{className:"w-full md:w-40",value:le.find((function(e){return e.id===(null===C||void 0===C?void 0:C.sortBy)}))||le[0],values:le,onChange:function(e){return S((0,s.Z)((0,l.Z)({},C),{sortBy:e.id}))}})]}),(0,u.jsxs)("div",{className:"space-y-4 px-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:[k&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"})]}),!k&&0===g.length&&(0,u.jsx)("p",{className:"text-sm font-normal text-black-500",children:"No block found."}),!k&&g.filter((function(e){return e.active&&"header"!==e.type&&"footer"!==e.type})).map((function(e){var n,t,i;return(0,u.jsxs)("div",{className:"group relative flex h-32 gap-4 border border-gray-300 p-4 rounded-md hover:bg-indigo-50 hover:border-indigo-600 cursor-pointer",onClick:function(){return function(e){var n,t,i;(null===_||void 0===_||null===(n=_.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))||"durable"===e.source?(I("/website/track-block-usage",{blockId:e._id}).catch(console.log),o(e)):r("premium_widgets")}(e)},children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("p",{className:"text-sm font-semibold group-hover:text-indigo-700",children:e.name}),!(null===_||void 0===_||null===(n=_.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))&&"durable"!==e.source&&(0,u.jsx)("span",{className:"badge yellow",children:"Premium"})]}),(0,u.jsx)("p",{className:"text-sm mb-2 text-gray-500",children:e.description}),(0,u.jsx)("p",{className:"text-xs font-medium text-gray-800",children:e.source&&"durable"!==e.source?"By ".concat(e.source.replaceAll("-"," ")):"By Durable"})]}),(0,u.jsx)("div",{className:"flex-shrink-0 self-center relative w-20 h-20",children:(null===e||void 0===e?void 0:e.previewUrl)?(0,u.jsx)(K(),{unoptimized:!0,className:"rounded",src:e.previewUrl,objectFit:"cover",layout:"fill",alt:e.name}):(0,u.jsx)(K(),{unoptimized:!0,className:"rounded",src:(0,h.sd)("blocks/".concat(e.type,".svg")),layout:"fill",objectFit:"cover",alt:e.name})})]},e._id)}))]})]})]})})})})})}var re=t(12799),ce=t(57713),ue=t(79454);function de(e){var n,t=e.open,o=e.setOpen,l=e.block,s=e.refreshWidget,a=(0,te.Z)(),r=a.confirm,d=a.ConfirmDialog,m=(0,v.useState)(!1),f=m[0],p=m[1],h=function(e){var n,t,i;"COMMONNINJA_EDITOR_STATE_CHANGED"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.type)&&!(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.saved)&&(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.widgetId)?p(!0):p(!1)};return(0,v.useEffect)((function(){return l&&window.addEventListener("message",h),function(){l&&window.removeEventListener("message",h)}}),[l]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d,{confirmText:"Discard",attention:!0}),(0,u.jsx)(L.u.Root,{show:t,as:v.Fragment,children:(0,u.jsx)("div",{className:"fixed z-100 inset-0 overflow-y-auto",children:(0,u.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"}),(0,u.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,u.jsxs)("div",{className:"inline-block align-middle bg-white rounded-lg md:my-8 w-full md:w-5/6 text-left overflow-visible shadow-xl transform transition-all",children:[(0,u.jsxs)("div",{className:"flex items-center py-6 px-6 border-b border-gray-200",children:[(0,u.jsxs)("h3",{className:"text-lg text-center leading-6 font-medium text-gray-900",children:["Configure ",(null===l||void 0===l||null===(n=l.WebsiteBlock)||void 0===n?void 0:n.name)||""]}),(0,u.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return function(){var e;f?r("Discard changes?","Are you sure you want to close without saving the ".concat(null===l||void 0===l||null===(e=l.WebsiteBlock)||void 0===e?void 0:e.name,"? Any unsaved changes will be discarded."),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return s(null===l||void 0===l?void 0:l.externalId),o(!1),[2]}))}))):(s(null===l||void 0===l?void 0:l.externalId),o(!1))}()},children:(0,u.jsx)(M.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsx)("div",{className:"flex flex-col gap-4 ",children:(0,u.jsx)("iframe",{className:"w-full min-h-180",src:null===l||void 0===l?void 0:l.editorUrl})})]})})]})})})]})}var ve=t(53371),me=t(61437),fe=t(40487);function pe(e){var n=e.website,t=e.pages,o=e.open,r=e.setOpen,m=e.aiCreatePageType,f=e.onCreatePage,p=e.onCreatePost,g=e.closeManagePagesModal,b=e.websitePages,w=(0,a.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],y=(0,h.ac)("(min-width: 1024px)"),k=(0,v.useState)({getting:!1,creating:!1}),N=k[0],Z=k[1],C=(0,v.useState)((0,h.tl)("website-page-templates")),S=C[0],_=C[1],P=(0,x.Z)(),E=P.get,I=P.post,T=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return Z((function(e){return(0,s.Z)((0,l.Z)({},e),{getting:!0})})),[4,E("/website/get-page-templates")];case 1:return!0===(null===(e=n.sent())||void 0===e?void 0:e.status)?_(null===e||void 0===e?void 0:e.content):h.Z9.error("Error loading page templates, please try again. ".concat(null===e||void 0===e?void 0:e.message),{autoClose:!0}),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{getting:!1})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((function(e,n){var i,o,a;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return m&&(null===t||void 0===t?void 0:t.map((function(e){return(null===e||void 0===e?void 0:e.fromTemplate)||null}))).includes(m)?(i=null===t||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.fromTemplate)===m})))&&(null===i||void 0===i?void 0:i.id)?(o=null===b||void 0===b?void 0:b.find((function(e){return e.id===(null===i||void 0===i?void 0:i.id)})),f({page:i,websitePage:o,pageTemplate:"open-only"},y),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]):(Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]):[4,I("/website/create-page-template",{template:e,label:n})];case 1:return!0===(null===(a=r.sent())||void 0===a?void 0:a.status)?f(null===a||void 0===a?void 0:a.content,y):h.Z9.error("Error saving this page, please try again. ".concat(null===a||void 0===a?void 0:a.message),{autoClose:!0}),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),A=function(e){if(Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!0})})),"website-post"===e)p(),r(!1),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})}));else{var i=null;if("service"===e){var o,a=(null===n||void 0===n||null===(o=n.business)||void 0===o?void 0:o.services)||[];if(a.length>0){var c;i=null===(c=(0,h.kd)(a))||void 0===c?void 0:c.toString()}else{var u=null===t||void 0===t?void 0:t.find((function(e){return null===e.slug})),v=(0,d.vP)(u);i=null===v||void 0===v?void 0:v.title}}g(),B(e,i)}};return(0,v.useEffect)((function(){window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:o}})),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:o})),w(o)}),[o]),(0,v.useEffect)((function(){T()}),[]),(0,v.useEffect)((function(){m&&A(m)}),[m]),(0,u.jsx)(L.u,{show:o,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-white border-b p-4 md:pl-6 md:rounded-t-lg",children:[(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Add page"}),(0,u.jsx)("button",{type:"button",className:"text-gray-600 hover:text-gray-400",onClick:function(){return r(!1)},children:(0,u.jsx)(M.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"space-y-4 !p-6 !pr-3.5 max-h-[calc(100vh-57px)] md:max-h-[calc(100vh-136px)] overflow-y-auto main-scrollbar",children:[N.creating&&(0,u.jsx)(fe.k,{text:"Creating page..."}),N.getting&&!S?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"})]}):null===S||void 0===S?void 0:S.map((function(e,n){var t=e.name,i=e.description,o=e.type;return(0,u.jsxs)("div",{className:"p-5 bg-white border border-gray-200 rounded-lg shadow ring-0 ring-indigo-200 cursor-pointer transition-all hover:border-indigo-600 active:ring-4",onClick:function(){return A(o)},children:[(0,u.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"font-semibold mb-2",children:t}),(0,u.jsx)("p",{className:"text-gray-500",children:i})]}),(0,u.jsxs)("button",{className:"link inline-flex items-center gap-0.5",children:[(0,u.jsx)(M.Z,{icon:"PlusSolidIcon",className:"w-5 h-5"}),(0,u.jsx)("span",{children:"Add"})]})]}),(0,u.jsx)("div",{className:"relative w-full h-[200px] pointer-events-none",children:(0,u.jsx)(K(),{unoptimized:!0,className:"rounded-lg",src:(0,h.sd)("new-templates/".concat(o,".svg")),alt:t,layout:"fill",objectFit:"cover"})})]},"page-template-".concat(o,"-").concat(n))}))]})]})})})})})}var he=t(43751);function xe(e){var n=e.open,t=e.onClose,i=e.onAction,o=e.scrolledDistance,l=(0,v.useState)(!1),s=l[0],a=l[1],r=(0,v.useState)(!1),c=r[0],d=r[1],m=(0,v.useState)(!1),f=m[0],p=m[1],x=(0,$.Z)().track,g=function(e){var n=e.detail;p(null===n||void 0===n?void 0:n.active)};return(0,v.useEffect)((function(){var e=setInterval((function(){var e=document.getElementsByClassName("Toastify__toast-container");d((null===e||void 0===e?void 0:e.length)>0)}),500);return window.addEventListener("website-builder-active-block-changed",g),function(){clearInterval(e),window.removeEventListener("website-builder-active-block-changed",g)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(L.u.Root,{show:n&&o<200&&!f&&!s,as:v.Fragment,children:(0,u.jsx)("div",{className:"absolute sm:fixed bottom-16 md:bottom-6 left-1/2 -translate-x-1/2 z-40 p-2 sm:px-0 md:py-0 mx-auto w-full sm:max-w-120",children:(0,u.jsx)(L.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsxs)("div",{className:(0,h.AK)("group flex flex-row items-center gap-2 p-2 opacity-100 transition-all duration-300 bg-white border-gray-300 rounded-xl shadow-md",c&&"!opacity-0"),children:[(0,u.jsxs)("div",{className:"flex-shrink-0 relative w-10 h-10",children:[(0,u.jsx)("div",{className:"hidden md:flex absolute inset-0 w-10 h-10 opacity-100 transition-opacity group-hover:opacity-0",children:(0,u.jsx)(K(),{src:(0,h.sd)("rocket.svg"),alt:"Upgrade",layout:"fill",objectFit:"cover"})}),(0,u.jsx)("div",{className:"relative z-10 flex justify-center items-center w-10 h-10 md:opacity-0 cursor-pointer transition-opacity md:group-hover:opacity-100",onClick:function(){a(!0),t()},children:(0,u.jsx)(he.Z,{className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full sm:px-2 text-sm",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-700",children:"Upgrade to get a custom domain name"}),(0,u.jsx)("span",{className:"hidden sm:block text-gray-500",children:"Plus unlimited pages, analytics, and more."})]}),(0,u.jsx)("button",{className:"flex-shrink-0 primary",onClick:function(){x("account:paywall-click",{context:"domain_alert"}),i()},children:"Upgrade"})]})})})})})}var ge=t(9008),be=t.n(ge),we=t(41664),ye=t.n(we);function je(e){var n,t,i,o=e.open,l=e.onPublish,s=e.onClose,a=e.scrolledDistance,r=(0,v.useState)(!1),c=r[0],d=r[1],m=(0,v.useState)(!1),f=m[0],p=m[1],x=(0,V.useSession)().data,g=function(e){var n=e.detail;p(null===n||void 0===n?void 0:n.active)};return(0,v.useEffect)((function(){var e=setInterval((function(){var e=document.getElementsByClassName("Toastify__toast-container");d((null===e||void 0===e?void 0:e.length)>0)}),500);return window.addEventListener("website-builder-active-block-changed",g),function(){clearInterval(e),window.removeEventListener("website-builder-active-block-changed",g)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(L.u.Root,{show:o&&a<200&&!f,as:v.Fragment,children:(0,u.jsx)("div",{className:"absolute sm:fixed bottom-16 md:bottom-6 left-1/2 -translate-x-1/2 z-40 p-2 sm:px-0 md:py-0 mx-auto w-full sm:max-w-120",children:(0,u.jsx)(L.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsxs)("div",{className:(0,h.AK)("group flex flex-row items-center gap-2 p-2 opacity-100 transition-all duration-300 bg-white border-gray-300 rounded-xl shadow-md",c&&"!opacity-0"),children:[(0,u.jsxs)("div",{className:"flex-shrink-0 relative w-10 h-10",children:[(0,u.jsx)("div",{className:"hidden md:flex absolute inset-0 w-10 h-10 opacity-100 transition-opacity group-hover:opacity-0",children:(0,u.jsx)(K(),{src:(0,h.sd)("rocket.svg"),alt:"Upgrade",layout:"fill",objectFit:"cover"})}),(0,u.jsx)("div",{className:"relative z-10 flex justify-center items-center w-10 h-10 md:opacity-0 cursor-pointer transition-opacity md:group-hover:opacity-100",onClick:function(){s()},children:(0,u.jsx)(he.Z,{className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full sm:px-2 text-sm",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-700",children:"Publish your website"}),(0,u.jsx)("span",{className:"hidden sm:block text-gray-500",children:"Go live with a custom domain name."})]}),!(null===x||void 0===x||null===(n=x.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("publish-website"))&&(0,u.jsx)("span",{className:"ml-auto px-2.5 py-0.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"PRO"}),(0,u.jsx)("button",{className:"primary",onClick:l,children:"Publish"})]})})})})})}var ke=t(96281),Ne=t(42341),Ze=t(38986),Ce=t(59522),Se=t(20534),_e=t(992),Pe=[{id:"solid",name:"Solid"},{id:"outline",name:"Outline"}],Ee=[{id:"round",name:"Round",cornerRadius:8},{id:"square",name:"Square",cornerRadius:0}];function Ie(e){var n,t,i,a,r,c,d,m,p,x,g,b,w,y,j,k,N,C=e.website,S=e.open,_=e.setOpen,E=e.rtl,I=e.setRtl,T=e.tryPalette,B=e.onChange,A=e.onPreviewMigration,R=e.scrollToLocation,O=void 0===R?null:R,D=e.setScrollToLocation,F=void 0===D?null:D,W=e.initialTab,z=void 0===W?0:W,G=(0,v.useState)(null),V=G[0],$=G[1],q=(0,v.useState)(z),U=q[0],J=q[1],Y=(0,v.useState)(0),Q=Y[0],X=Y[1],ee=(0,v.useState)(null),ne=ee[0],te=ee[1],ie=(0,v.useState)(null),le=ie[0],se=ie[1],ae=(0,v.useState)(null),re=ae[0],ce=ae[1],ue=(0,v.useState)(null),de=ue[0],ve=ue[1],me=(0,v.useState)(null),fe=me[0],pe=me[1],he=(0,v.useState)(!1),xe=he[0],ge=he[1];(0,H.m)(fe);var be=[{id:0,key:"theme",title:"Theme",parent:!1},{id:1,key:"palette",title:"Color palette",parent:!1},{id:2,key:"color-set",title:"Color ".concat(["A","B","C","D"][Q||0]),parent:"palette"},{id:3,key:"buttons",title:"Button styles",parent:!1},{id:4,key:"fonts",title:"Fonts",parent:!1},{id:5,key:"google-search",title:[{field:"head",label:"Headings"},{field:"body",label:"Body text"}].find((function(e){return e.field===(ne||"head")})).label,parent:"fonts"},{id:6,key:"other",title:"Other styles",parent:!1}],we=["PNG","ICO"],ye={button:{backgroundColor:"outline"===(null===V||void 0===V||null===(n=V.button)||void 0===n?void 0:n.style)?"transparent":(null===V||void 0===V||null===(t=V.button)||void 0===t?void 0:t.background)||(null===V||void 0===V?void 0:V.secondaryColor),color:"outline"===(null===V||void 0===V||null===(i=V.button)||void 0===i?void 0:i.style)?(null===V||void 0===V||null===(a=V.button)||void 0===a?void 0:a.background)||(null===V||void 0===V?void 0:V.secondaryColor):(0,h.$O)((null===V||void 0===V||null===(r=V.button)||void 0===r?void 0:r.background)||(null===V||void 0===V?void 0:V.secondaryColor)),borderRadius:null===V||void 0===V||null===(c=V.button)||void 0===c?void 0:c.cornerRadius,borderColor:(null===V||void 0===V||null===(d=V.button)||void 0===d?void 0:d.background)||(null===V||void 0===V?void 0:V.secondaryColor)}},je=function(){_(!1)},Ie=function(e){return be.find((function(n){return n.id===e}))},Te=function(e){return!!Ie(e).parent},Be=function(e){var n=be.find((function(n){return n.key===e}));J(n.id),"color-set"!==n.key&&X(0),"google-search"!==n.key&&te(null)};return(0,v.useEffect)((function(){S?($((0,h.p$)(C)),T&&setTimeout((function(){ge(!0),Be("palette")}),500)):setTimeout((function(){J(z)}),400)}),[S]),(0,v.useEffect)((function(){V&&B(V)}),[V]),(0,v.useEffect)((function(){if(O&&F){var e={fonts:le,button_style:re,favicon:de};O in e&&e[O]&&e[O].scrollIntoView({behavior:"smooth",block:"center"}),F(null)}}),[le,re,de]),(0,v.useEffect)((function(){J(z)}),[z]),(0,v.useEffect)((function(){return window.top.addEventListener("dropdown-open",je),function(){window.top.removeEventListener("dropdown-open",je)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(L.u,{show:S,appear:!0,children:(0,u.jsx)("div",{className:(0,h.AK)("builder-panel z-110",E?"right-0":"left-0"),children:(0,u.jsx)("div",{className:"relative w-full h-full md:max-w-90 md:p-2 z-100",children:(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:E?"translate-x-full":"-translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:E?"translate-x-full":"-translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:(0,h.AK)("max-w-full sticky top-0 flex items-center justify-between bg-white z-10 py-2 pr-1 md:pr-3 md:rounded-t-lg",Te(U)?"pl-1 md:pl-3":"pl-4 md:pl-6"),children:[(0,u.jsxs)("div",{className:"relative flex items-center z-5",children:[(0,u.jsx)(L.u,{as:v.Fragment,show:Te(U),enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-x-3",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-3",children:(0,u.jsxs)("button",{type:"button",className:"absolute top-1/2 left-0 -translate-y-1/2 light transparent icon",onClick:function(){var e=Ie(U);e.parent&&Be(e.parent),xe&&ge(!1)},children:[(0,u.jsx)("span",{className:"sr-only",children:"Exit editing"}),(0,u.jsx)(M.Z,{icon:"ChevronLeftIcon",className:"h-5 w-5"})]})}),(0,u.jsx)("p",{className:(0,h.AK)("font-bold text-gray-900 ml-0 py-2.5 transition-all duration-300",Te(U)&&"ml-10"),children:Ie(U).title})]}),(0,u.jsx)(L.u,{as:v.Fragment,show:!0,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsxs)("div",{className:"flex gap-1",children:[(0,u.jsx)("div",{className:"hidden md:flex items-center",title:"Move to ".concat(E?"left":"right"),children:(0,u.jsxs)("button",{type:"button",className:"flex-shrink-0 light icon transparent",onClick:function(){return I((function(e){return!e}))},children:[(0,u.jsx)("span",{className:"sr-only",children:"Move panel"}),(0,u.jsx)(M.Z,{icon:E?"MoveLeftIcon":"MoveRightIcon",className:"h-5 w-5","aria-hidden":"true"})]})}),(0,u.jsx)("button",{type:"button",className:"flex-shrink-0 primary transparent !py-2",onClick:je,children:"Done"})]})})]}),(0,u.jsxs)(f.O.Group,{as:"div",className:"flex flex-col h-full md:h-auto border-t",selectedIndex:U||1,children:[(0,u.jsx)(f.O.List,{className:"hidden",children:be.map((function(e,n){return(0,u.jsx)(f.O,{className:"hidden",children:e.name},"".concat(e.name,"-").concat(n))}))}),(0,u.jsxs)(f.O.Panels,{ref:function(e){return pe(e?{current:e}:null)},className:"tab-panels h-full",style:{maxHeight:"calc(100vh - 194px)"},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(null===V||void 0===V?void 0:V.noPaletteSupport)&&!xe?(0,u.jsx)(Se.qP,{onMigrate:function(){ge(!0),Be("palette")}}):(0,u.jsx)(Se.YU,{className:"pb-6",value:null===V||void 0===V?void 0:V.colorPalette,onEdit:function(){return Be("palette")}}),(0,u.jsx)(Ze.i_,{ref:se,className:"py-6",fonts:"custom"===(null===V||void 0===V||null===(m=V.fonts)||void 0===m?void 0:m.source)?null===V||void 0===V||null===(p=V.fonts)||void 0===p?void 0:p.custom:null===V||void 0===V?void 0:V.fonts,onEdit:function(){return Be("fonts")}}),(0,u.jsx)("div",{className:"py-6",ref:ce,children:(null===V||void 0===V?void 0:V.noPaletteSupport)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"mb-2 font-medium text-gray-900",children:"Button"}),(0,u.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"Choose a button style"}),(0,u.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md",children:[(0,u.jsx)("button",{style:ye.button,className:"primary lg !border-2 pointer-events-none mb-6",children:"Contact us"}),(0,u.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,u.jsx)(oe.Z,{label:"Style",placeholder:"Select",values:Pe,value:Pe.find((function(e){var n;return e.id===(null===V||void 0===V||null===(n=V.button)||void 0===n?void 0:n.style)}))||Pe[0],onChange:function(e){return $((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{style:e.id})})}))}}),(0,u.jsx)(oe.Z,{label:"Shape",placeholder:"Select",values:Ee,value:Ee.find((function(e){var n;return e.cornerRadius===(null===V||void 0===V||null===(n=V.button)||void 0===n?void 0:n.cornerRadius)}))||Ee[0],onChange:function(e){return $((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{cornerRadius:e.cornerRadius})})}))}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"mb-1",children:"Background"}),(0,u.jsx)(Ne.Z,{color:(null===V||void 0===V||null===(x=V.button)||void 0===x?void 0:x.background)||(null===V||void 0===V?void 0:V.secondaryColor),onChange:function(e,n){return $((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{background:e.hex})})}))}})]})]})]})]}):(0,u.jsx)(_e.rY,{buttons:null===V||void 0===V?void 0:V.buttons,onEdit:function(){return Be("buttons")}})})]}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(Se.ne,{settings:null===V||void 0===V?void 0:V.colorPalette,migrate:xe,setMigrate:function(){return(null===V||void 0===V?void 0:V.noPaletteSupport)&&ge(!0)},onEditColorSet:function(e){Be("color-set"),X(e)},onChange:function(e){xe?($((function(n){return(0,s.Z)((0,l.Z)({},n),{colorPalette:e,noPaletteSupport:!1,migratePalette:!0})})),A(!0),ge(!1)):$((function(n){return(0,s.Z)((0,l.Z)({},n),{colorPalette:e})}))}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(Se.Ln,{idx:Q,website:V,setWebsite:$})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(_e.jn,{website:V,setWebsite:$,onTryPalette:function(){return J(1)}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:4===U&&(0,u.jsx)(Ze.dh,{isWebsite:!0,value:V,onChange:function(e){$((function(n){return(0,s.Z)((0,l.Z)({},n),{fonts:{source:e.source,head:e.head,body:e.body,custom:e.custom}})}))},onEditCustom:function(e){Be("google-search"),te(e)}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:ne&&(0,u.jsx)(Ce.X,{scrollRef:fe,field:ne,value:null===V||void 0===V||null===(g=V.fonts)||void 0===g?void 0:g.custom,onChange:function(e){return $((function(n){return(0,s.Z)((0,l.Z)({},n),{fonts:(0,s.Z)((0,l.Z)({},n.fonts),{custom:(0,s.Z)((0,l.Z)({},n.fonts.custom),(0,o.Z)({},ne,e))})})}))}})}),(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(P.li,{className:"pb-6",website:V,setWebsite:$}),(0,u.jsx)(Z.VV,{className:"py-6",website:V,setWebsite:$}),(0,u.jsxs)("div",{className:"pt-6",ref:ve,children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Browser icon"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Add an icon to display on browser tabs"}),(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg my-4",children:[(0,u.jsx)("div",{className:(0,h.AK)("flex-shrink-0 relative flex items-center justify-center h-4 w-4 overflow-hidden rounded-sm",!(null===V||void 0===V||null===(b=V.favicon)||void 0===b?void 0:b._id)&&"bg-gray-300"),children:(null===V||void 0===V||null===(w=V.favicon)||void 0===w?void 0:w._id)&&(null===V||void 0===V||null===(y=V.favicon)||void 0===y?void 0:y.url)&&(0,u.jsx)(K(),{unoptimized:!0,className:"",src:null===V||void 0===V||null===(j=V.favicon)||void 0===j?void 0:j.url,objectFit:"cover",layout:"fill",alt:"favicon"})}),(0,u.jsx)(ke.Z,{upload:!0,library:!0,icons:!0,location:"logos",pictures:null===V||void 0===V?void 0:V.favicon,allowedExtensions:we,allowedFileSize:"1MB",maxWidth:"480",maxHeight:"480",onChange:function(e){return $((function(n){return(0,s.Z)((0,l.Z)({},n),{favicon:e&&e.length>0?e[0]:void 0})}))},content:(0,u.jsxs)("button",{className:"inline-flex gap-2 items-center link text-sm",children:[(0,u.jsx)("span",{children:(null===V||void 0===V||null===(k=V.favicon)||void 0===k?void 0:k._id)?"Change":"Add icon"}),!(null===V||void 0===V||null===(N=V.favicon)||void 0===N?void 0:N._id)&&(0,u.jsx)(M.Z,{icon:"PlusSolidIcon",className:"w-4 h-4"})]})})]}),(0,u.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,h.RF)(we)," image up to ","1MB",". At least 48x48px."]})]})]})]})]})]})})})})})})}var Te=t(51247),Be=t(26688),Ae=t(60031),Re=t(11653),Oe=t(31193),De=function(e){var n=e.onResume,t=e.onClose;return(0,u.jsxs)("div",{className:"relative flex flex-row flex-nowrap justify-between items-center w-full",children:[(0,u.jsx)("span",{onClick:function(){"function"===typeof t&&t()},className:"flex justify-center items-center w-10 h-10 cursor-pointer mr-2",children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),(0,u.jsxs)("button",{onClick:function(){"function"===typeof n&&n()},className:"flex flex-row flex-nowrap items-center justify-start w-full cursor-pointer",children:[(0,u.jsx)("span",{className:"mr-1",children:"Resume Tour"}),(0,u.jsx)(Oe.Z,{className:"text-white w-5 h-5"})]})]})},Fe=null,We=function(e){var n=e.target,t=e.targetMobile,i=e.targetIframe,o=e.clickTarget,l=e.clickTargetMobile,s=e.onResume,a=e.onClose,r=e.wide,c=e.isOnPause,d=e.noPause,m=e.hideHighlight,f=e.onFrame,p=e.children,h=10,x={bottom:0,left:0,width:0,height:0},g=(0,v.useState)(x),b=g[0],w=g[1],y=(0,v.useState)({top:"unset",left:"0",bottom:"0"}),j=y[0],k=y[1],N=(0,v.useRef)(),Z=function(){return window.innerWidth<=859},C=function(){var e=null,s=null;if(s=Z()?l||t||n:o||n)if(i){var a=document.querySelector(i);if(a)e=(a.contentDocument||a.contentWindow.document).querySelector(s)}else e=document.querySelector(s);return e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=Z()&&t?t:n;if(o){var l=null,s=0;if(i){"function"===typeof f&&f();var a=document.querySelector(i);if(a){var r=a.contentDocument||a.contentWindow.document;l=r.querySelector(o),s=a.getBoundingClientRect().top}}else l=document.querySelector(o);if(l){var c,u,d,v=l.getBoundingClientRect(),m="unset",p="unset",g=!0,b=(null===N||void 0===N||null===(c=N.current)||void 0===c?void 0:c.clientWidth)||0,y=(null===N||void 0===N||null===(u=N.current)||void 0===u?void 0:u.clientHeight)||0;if((m=window.innerHeight-v.top-v.height-y-s-h-6)<0&&(g=!1),g||(m+=y+v.height+h+18),window.innerWidth>v.left+b)p=v.left-6;else p=window.innerWidth-(null===N||void 0===N||null===(d=N.current)||void 0===d?void 0:d.clientWidth)-h;w({left:v.left-6,bottom:window.innerHeight-v.top-v.height-6-s,width:v.width+12,height:v.height+12}),k({bottom:"".concat(m,"px"),left:"".concat(p,"px"),top:"unset"})}else w(x),k({top:"unset",left:"1rem",bottom:"1rem"})}else k({top:"unset",left:"1rem",bottom:"4rem"});e||setTimeout((function(){S(!0)}),700)},_=function(){window._keyTourGuideRunning=window._keyTourGuideRunning||!1,!0!==window._keyTourGuideRunning&&(S(),window._keyTourGuideRunning=!0,clearTimeout(Fe),Fe=setTimeout((function(){window._keyTourGuideRunning=!1}),500))};return(0,v.useEffect)((function(){return setTimeout((function(){S()}),100),window.addEventListener("resize",_),function(){clearTimeout(Fe),window.removeEventListener("resize",_)}}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{id:"card-tour",className:"".concat(c?"w-47":r?"w-80":"w-70"," ").concat(c?"z-50 p-2":"z-130 p-4"," fixed  block bg-indigo-600 rounded-xl text-ceramic-medium font-normal text-white text-left shadow-md transition-position duration-700 ease-in-out"),ref:N,style:c?{bottom:"".concat(Z()?"5rem":"1rem"),left:"1rem"}:j,children:(0,u.jsxs)(u.Fragment,{children:[c&&(0,u.jsx)(De,{onResume:function(){s(),setTimeout((function(){S()}),700)},onClose:function(){a(!0)}}),!c&&(0,u.jsxs)("div",{className:"relative block w-full",children:[(0,u.jsx)("button",{tabIndex:0,className:"absolute flex justify-center items-center w-10 h-10 -right-2 -top-2 cursor-pointer",onKeyDown:function(e){if(e.shiftKey&&9===e.keyCode)return e.preventDefault(),!1},onClick:function(){"function"===typeof a&&a(!!d)},children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),p]})]})}),!m&&!c&&(0,u.jsx)("div",{className:"shadow-tour rounded-md w-100 h-100 absolute z-[111] transition-all duration-700 ease-in-out cursor-pointer",style:b,onClick:function(){"function"===typeof a&&a(!1);var e=C();e&&setTimeout((function(){e.click()}),100)}})]})},ze=function(e){var n=e.onClick,t=e.extraClasses,i=e.children,o="bg-transparent hover:bg-white/20 text-white border-1 border-transparent rounded-sm p-2 mr-1 box-border text-ceramic-small text-center cursor-pointer ".concat(t||"");return(0,u.jsx)("button",{tabIndex:0,onClick:n,className:o,children:i})},Le=function(e){var n=e.tourKey,t=e.steps,i=e.onResume,o=e.onClose,s=(0,$.Z)().track,a=(0,v.useState)(1),r=a[0],c=a[1],d=(0,v.useState)(null),m=d[0],f=d[1],p=(0,v.useState)(!0),h=p[0],x=p[1],g=(0,v.useState)(!1),b=g[0],w=g[1],y=(0,v.useState)(0),j=y[0],k=y[1],N=(0,v.useRef)(),Z=function(){if(r<t.length){var e=r+1,n=t[e-1],i=(0,l.Z)({},m);c(e),f(n),R(i),A(n),T(n,i),s("website:tour-next")}},C=function(){if(r>1){var e=r-1,n=t[e-1],i=(0,l.Z)({},m);c(e),f(n),R(i),A(n),T(n,i),s("website:tour-prev")}},S=function(){x(!1),function(){var e=new Event("tour:closed");window.dispatchEvent(e)}(),s("website:tour-closed"),o()},_=function(){w(!0),R(m),function(){var e=new Event("tour:paused");window.dispatchEvent(e)}(),s("website:tour-dismissed",{step:r})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?S():_()},E=function(e){"static"===B(e)&&e.classList.add("relative"),e.classList.contains("z-tourHighlight")||e.classList.add("z-tourHighlight")},I=function(e){if(e){if(null===e||void 0===e?void 0:e.target){var n=document.querySelector(e.target);n&&n.classList.remove("z-tourHighlight")}if(null===e||void 0===e?void 0:e.targetMobile){var t=document.querySelector(e.targetMobile);t&&t.classList.remove("z-tourHighlight")}}},T=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=null===e||void 0===e?void 0:e.target,i=null===e||void 0===e?void 0:e.targetMobile,o=window.document;if(null===e||void 0===e?void 0:e.iframe){var l=document.querySelector(e.iframe);l&&(o=l.contentDocument||l.contentWindow.document)}var s=null===o||void 0===o?void 0:o.querySelector(t),a=null===o||void 0===o?void 0:o.querySelector(i);s&&E(s),a&&E(a),n&&I(n)},B=function(e){return e?window.getComputedStyle(e).getPropertyValue("position"):""},A=function(e){"function"===typeof(null===e||void 0===e?void 0:e.onStep)&&e.onStep()},R=function(e){e&&"function"===typeof(null===e||void 0===e?void 0:e.outStep)&&e.outStep()};return(0,v.useEffect)((function(){if(t&&t.length>0&&Array.isArray(t)){var e=function(){var e=t.length;return t.map((function(n){(null===n||void 0===n?void 0:n.hidePagination)&&e--})),e}();k(e),c(1),f(t[0]),A(t[0]),T(t[0]),s("website:tour-started")}}),[n]),(0,v.useEffect)((function(){var e;null===N||void 0===N||null===(e=N.current)||void 0===e||e.focus()}),[m]),(0,u.jsx)(u.Fragment,{children:h&&m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(We,{target:null===m||void 0===m?void 0:m.target,targetMobile:null===m||void 0===m?void 0:m.targetMobile,targetIframe:null===m||void 0===m?void 0:m.iframe,clickTarget:null===m||void 0===m?void 0:m.clickTarget,clickTargetMobile:null===m||void 0===m?void 0:m.clickTargetMobile,wide:!!(null===m||void 0===m?void 0:m.wide),isOnPause:b,noPause:!!(null===m||void 0===m?void 0:m.noPause),hideHighlight:!!(null===m||void 0===m?void 0:m.hideHighlight),onClose:P,onResume:function(){w(!1),A(m),function(){var e=new Event("tour:resumed");window.dispatchEvent(e)}(),s("website:tour-resumed"),i()},onFrame:null===m||void 0===m?void 0:m.onFrame,children:[(0,u.jsx)("span",{ref:N,className:"reset-index w-0 h-0 p-0 m-0 outline-none focus:outline-none",tabIndex:-1}),m.content,(0,u.jsxs)("div",{className:"w-full flex flex-row flex-nowrap justify-between items-center mt-2",children:[!(null===m||void 0===m?void 0:m.hidePagination)&&(0,u.jsx)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:(0,u.jsxs)("span",{className:"text-label text-white font-normal",children:[function(){for(var e=r,n=0;n<r;n++){var i;(null===(i=t[n])||void 0===i?void 0:i.hidePagination)&&e--}return e}()," / ",j]})}),(null===m||void 0===m?void 0:m.buttons)&&(0,u.jsx)("div",{className:"".concat((null===m||void 0===m?void 0:m.hidePagination)?"w-full justify-start":"justify-end"," flex flex-row flex-nowrap items-center"),children:m.buttons.map((function(e,n){return(0,u.jsx)(ze,{onClick:function(){!function(e){if(null===e||void 0===e?void 0:e.action)switch(e.action){case"prev":C();break;case"next":Z();break;case"pause":_();break;case"close":S();break;default:(null===e||void 0===e?void 0:e.action)&&"function"===typeof e.action&&e.action(C,Z,_,S)}}(e)},extraClasses:null===e||void 0===e?void 0:e.extraClasses,children:e.content},"".concat(r,"-tour-button-").concat(n))}))})]})]}),!b&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"w-full absolute inset-0 z-110 transparent",onClick:function(){P(!1)}})})]})})},Me=function(e){var n=e.onClick,t=e.onClose,i=(0,$.Z)().track,o=function(){i("website:tour-notnow"),t()};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(L.u,{as:v.Fragment,show:!0,appear:!0,enter:"transition duration-500 ease-linear delay-1500",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100 scale-100",leave:"transition duration-500 ease-linear",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-75",children:(0,u.jsx)("div",{className:"".concat(window.innerWidth<=859?"bottom-20":"bottom-4"," z-130 p-4 w-60 fixed left-4 block bg-indigo-600 rounded-xl text-ceramic-medium font-normal text-white text-left shadow-md transition-all"),children:(0,u.jsxs)("div",{className:"relative block w-full",children:[(0,u.jsx)("button",{tabIndex:0,className:"absolute flex justify-center items-center w-10 h-10 -right-2 -top-2 cursor-pointer",onKeyDown:function(e){if(e.shiftKey&&9===e.keyCode)return e.preventDefault(),!1},onClick:o,children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),(0,u.jsx)("p",{className:"block pr-4",children:"Welcome to Durable!"}),(0,u.jsx)("p",{className:"block pr-4",children:"How about a quick tour to learn how to customize your website?"}),(0,u.jsx)("div",{className:"w-full flex flex-row flex-nowrap justify-between items-center mt-4",children:(0,u.jsxs)("div",{className:"w-full justify-start flex flex-row flex-nowrap items-center",children:[(0,u.jsx)(ze,{onClick:n,extraClasses:"border-1 !rounded-3xl border-white/30",children:"Yes, please"}),(0,u.jsx)(ze,{onClick:o,extraClasses:"border-1 !rounded-3xl border-white/30",children:"Not now"})]})})]})})})})},Ge=t(6328),Ke=t(53120),Ve=t(15564),$e=function(e){var n=e.onClose,t=e.websitePublished,i=e.showOnboarding,o=void 0===i||i,l=(0,V.useSession)().data,s=(0,$.Z)().track,a=(0,x.Z)().post,r=(0,h.ac)("(max-width: 860px)"),c=(0,v.useState)(!1),d=c[0],m=c[1],f=(0,u.jsx)("div",{className:"pr-8",children:"Change colors, fonts, and other styles."}),p=(0,u.jsx)("div",{className:"pr-8",children:"Click on any element to edit it."}),g=(0,u.jsx)("div",{className:"pr-8",children:"Add new sections like Google Reviews, pricing tables, and more."}),b=(0,u.jsx)("div",{className:"pr-8",children:"Quickly change section images and style."}),w=(0,u.jsx)("div",{className:"pr-8",children:"Create and manage your website pages."}),y=(0,u.jsx)("div",{className:"pr-8",children:t?"See how your site will looks.":"Publish or preview your website."}),j=(0,u.jsxs)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:[(0,u.jsx)(Ge.Z,{className:"text-white w-4"}),(0,u.jsx)("span",{className:"pl-1",children:"Back"})]}),k=(0,u.jsxs)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:[(0,u.jsx)("span",{className:"pr-1",children:"Next"}),(0,u.jsx)(Ke.Z,{className:"text-white w-4"})]}),N=function(e,n){var t=new CustomEvent("tour:add-section-step",{detail:{blockId:e,type:n}});window.dispatchEvent(t)},Z=function(e,n){var t=new CustomEvent("tour:out-add-section-step",{detail:{blockId:e,type:n}});window.dispatchEvent(t)},C=function(){var e=document.querySelector("#iframe-builder-preview");if(e){var n,t=e.contentDocument||e.contentWindow.document;if(t)null===(n=t.querySelector("#main-preview"))||void 0===n||n.scrollTo({top:0,behavior:"instant"})}},S=function(){s("website:tour-completed"),a("/user/onboarding-tour-completed",{}).then((function(e){(0,Ve.k)(l)})),n()},_=[{target:'[data-tour="theme"]',targetMobile:'[data-tour="theme-mobile"]',clickTarget:'[data-tour="theme"] button',clickMobileTarget:'[data-tour="theme-mobile"] button',content:f,buttons:[{content:k,action:"next"}]},{target:'[data-tour="section"]',content:g,wide:!0,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return N("header","section")},outStep:function(){return Z("header","section")},iframe:"#iframe-builder-preview",onFrame:C},{target:'[data-tour="edit-sections"]',clickTarget:'[data-tour="edit-sections"] button',content:b,wide:!0,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return N("page-block-0","actions")},outStep:function(){return Z("page-block-0","actions")},iframe:"#iframe-builder-preview",onFrame:C},{target:'[data-tour="pages"]',targetMobile:'[data-tour="pages-mobile"]',clickTarget:'[data-tour="pages"] button',clickMobileTarget:'[data-tour="pages-mobile"] button',content:w,buttons:[{content:j,action:"prev"},{content:k,action:"next"}]},{target:'[data-tour="preview"]',targetMobile:'[data-tour="preview"]',clickTarget:t?'[data-tour="preview"]':'[data-tour="preview"] button',content:y,buttons:[{content:j,action:"prev"},{content:"Done",action:"close"}]}];return r||_.splice(1,0,{target:'[data-tour="logo"]',clickTarget:'[data-tour="logo"]',content:p,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return function(e){var n=new CustomEvent("tour:show-inline-edit-step",{detail:{elem:e,location:"header"}});window.dispatchEvent(n)}("logo")},outStep:function(){return function(e){var n=new CustomEvent("tour:out-inline-edit-step",{detail:{elem:e,location:"header"}});window.dispatchEvent(n)}("logo")},iframe:"#iframe-builder-preview",onFrame:C}),(0,v.useEffect)((function(){m(!1);var e=setTimeout((function(){m(!0)}),500);return function(){return clearTimeout(e)}}),[r]),(0,u.jsxs)(u.Fragment,{children:[!d&&o&&(0,u.jsx)(Me,{onClick:function(){m(!0)},onClose:S}),d&&(0,u.jsx)(Le,{tourKey:"onboarding-tour-builder",steps:_,onResume:function(){var e;null===window||void 0===window||null===(e=window.top)||void 0===e||e.closeBlock()},onClose:S})]})},He=t(49470),qe=t(72521),Ue=t(52699);function Je(e){var n=e.sourceWebsite,t=e.sourcePage,o=e.iframeId,a=(0,v.useState)(n),u=a[0],m=a[1],f=(0,v.useState)(t),p=f[0],g=f[1],b=(0,v.useState)(!1),w=b[0],y=b[1],j=(0,Ae.Z)(u),k=j.chooseTemplate,N=j.generateBlock,Z=function(e,n){o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:e,website:n}},o),y(!e.blocks.find((function(e){return null===e||void 0===e?void 0:e.generating})))},C=(0,x.Z)().get;function S(e,n,t,i){return _.apply(this,arguments)}function _(){return _=(0,i.Z)((function(e,n,t,i){var o,a;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return"durable"!==(null===e||void 0===e||null===(o=e.WebsiteBlock)||void 0===o?void 0:o.source)?[3,2]:[4,N((0,h.p$)(e),n?(0,h.p$)(n):null,!1,null,t?(0,h.p$)(t):null)];case 1:(a=c.sent())&&g((function(e){var n=(0,h.p$)(e),t=(0,r.Z)((null===n||void 0===n?void 0:n.blocks)||[]),o=t.findIndex((function(e){return e.idx===a.idx}));return delete a.generating,delete a.regenerating,t[o]=a,n=(0,s.Z)((0,l.Z)({},e),{blocks:t}),Z(n,i),n})),c.label=2;case 2:return[2]}}))})),_.apply(this,arguments)}var P=function(){var e=(0,i.Z)((function(e,n,t,i,o){var a;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return"durable"===(null===n||void 0===n||null===(a=n.WebsiteBlock)||void 0===a?void 0:a.source)&&(n.generating="block",n.regenerating=!0),g((function(t){var i=(0,r.Z)((null===t||void 0===t?void 0:t.blocks)||[]);i[e]=n;var a=(0,s.Z)((0,l.Z)({},t),{blocks:i});return Z(a,o),a})),[4,S(n,t,i,o)];case 1:return c.sent(),[2]}}))}));return function(n,t,i,o,l){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,C("/website/get-blocks").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content?[2,e.content]:[2,[]]}}))}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((function(e){var i,a,u,v,f,p,x,b,w,y,j,N,Z,C,S,_,I,T,B,A,R,O,D,F,W,z,L,M;return(0,c.__generator)(this,(function(G){switch(G.label){case 0:return i=function(e){var n,t;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return n=B[e],t=function(e,n){var t,i=-1;switch(null===n||void 0===n?void 0:n.type){case"service":case"team":i=e.findIndex((function(e){return e.type===(null===n||void 0===n?void 0:n.type)}));break;case"service-list":case"services":var o={type:"service-list",WebsiteBlock:{type:"service-list"},showHeading:!1,showButton:!1,items:[]},a=e.filter((function(e){return"services"===e.type||"service-list"===e.type}));if((null===a||void 0===a?void 0:a.length)>1){for(var c=function(n){var t,i=(0,h.p$)(a[n]);e.splice(e.findIndex((function(e){return("services"===e.type||"service-list"===e.type)&&e.idx===i.idx})),1),(t=o.items).push.apply(t,(0,r.Z)(i.items||[]))},u=0;u<a.length;u++)c(u);return o}if(-1===(i=e.findIndex((function(e){return"services"===e.type||"service-list"===e.type})))){var v=e.filter((function(e){return"service"===e.type}));if(null===v||void 0===v?void 0:v.length)for(var m=function(n){var t=(0,h.p$)(v[n]);e.splice(e.findIndex((function(e){return"service"===e.type&&e.idx===t.idx})),1);var i=(0,d.qZ)(t.content);o.items.push((0,s.Z)((0,l.Z)({},i),{idx:n,button:{label:"View more",type:"url",link:"#"}}))},f=0;f<v.length;f++)m(f);return o}break;case"team-list":if(-1===(i=e.findIndex((function(e){return"team-list"===e.type})))){var p=e.filter((function(e){return"team"===e.type})),x={type:"team-list",WebsiteBlock:{type:"team-list"},showHeading:!1,showButton:!1,items:[]};if(null===p||void 0===p?void 0:p.length)for(var g=function(n){var t,i=(0,h.p$)(p[n]);e.splice(e.findIndex((function(e){return"service"===e.type&&e.idx===i.idx})),1);var o=(0,d.qZ)(i.content);x.items.push((0,s.Z)((0,l.Z)({},o),{idx:n,image:null===(t=i.image)||void 0===t?void 0:t.media}))},b=0;b<p.length;b++)g(b);return x}break;default:i=-1}if(-1===i)switch(null===n||void 0===n||null===(t=n.WebsiteBlock)||void 0===t?void 0:t.type){case"banner":case"banner-grid":case"banner-carousel":i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)&&("banner"===e.type||"banner-grid"===e.type||"banner-carousel"===e.type)})),-1===i&&(i=e.findIndex((function(e){var n;return"banner"===e.type||"banner-grid"===e.type||"banner-carousel"===e.type||"banner"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)&&"default"===e.type})));break;default:i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)&&e.type===(null===n||void 0===n?void 0:n.type)})),-1===i&&(i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)})))}if(-1!==i){var w=(0,h.p$)(e[i]);return e.splice(i,1),w}return null}(O,n),[4,P(e,{type:n.type,WebsiteBlock:C.find((function(e){return e.type===n.WebsiteBlock.type})),idx:e+1},n,t,I)];case 1:return i.sent(),[2]}}))},console.log("Start changing template"),window.marsUsedPictures=[],[4,k(e,!0)];case 1:return Z=G.sent(),[4,E()];case 2:C=G.sent(),S=(0,h.p$)(n),I=(0,s.Z)((0,l.Z)({},S),{colorPalette:(null===Z||void 0===Z?void 0:Z.colorPalette)||(null===S||void 0===S?void 0:S.colorPalette),cornerRadius:(null===Z||void 0===Z?void 0:Z.cornerRadius)||"no-rounded",fonts:null===Z||void 0===Z?void 0:Z.fonts,buttons:(0,l.Z)({},null===S||void 0===S?void 0:S.buttons,null===Z||void 0===Z?void 0:Z.buttons),header:(0,s.Z)((0,l.Z)({},null===S||void 0===S?void 0:S.header),{WebsiteBlock:C.find((function(e){return"header"===e.type})),fullWidth:!!(null===Z||void 0===Z||null===(a=Z.header)||void 0===a?void 0:a.fullWidth),sticky:!!(null===Z||void 0===Z||null===(u=Z.header)||void 0===u?void 0:u.sticky),style:(null===Z||void 0===Z||null===(v=Z.header)||void 0===v?void 0:v.style)||"left",spacing:(null===Z||void 0===Z||null===(f=Z.header)||void 0===f?void 0:f.spacing)||(null===S||void 0===S||null===(p=S.header)||void 0===p?void 0:p.spacing),navStyle:(null===Z||void 0===Z||null===(x=Z.header)||void 0===x?void 0:x.navStyle)||"default"}),footer:(0,s.Z)((0,l.Z)({},null===S||void 0===S?void 0:S.footer),{WebsiteBlock:C.find((function(e){return"footer"===e.type})),style:null!==(_=null===Z||void 0===Z||null===(b=Z.footer)||void 0===b?void 0:b.style)&&void 0!==_?_:"split-right",spacing:(null===Z||void 0===Z||null===(w=Z.footer)||void 0===w?void 0:w.spacing)||(null===S||void 0===S||null===(y=S.footer)||void 0===y?void 0:y.spacing),layers:(null===Z||void 0===Z||null===(j=Z.footer)||void 0===j?void 0:j.layers)||(null===S||void 0===S||null===(N=S.footer)||void 0===N?void 0:N.layers)})}),m(I),T=(0,h.p$)(Z),B=T.blocks,A=B.findIndex((function(e){var n;return"header"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==A&&B.splice(A,1),R=B.findIndex((function(e){var n;return"footer"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==R&&B.splice(R,1),O=(0,h.p$)((null===t||void 0===t?void 0:t.blocks)||[]),D=O.findIndex((function(e){var n;return"header"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==D&&O.splice(D,1),F=O.findIndex((function(e){var n;return"footer"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==F&&O.splice(F,1),g((function(){var e=null===B||void 0===B?void 0:B.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n+1,generating:"block"})})),n=(0,s.Z)((0,l.Z)({},(0,h.p$)(t)),{blocks:(0,h.p$)(e)});return o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:n,website:I}},o),n})),W=0,G.label=3;case 3:return W<B.length?[5,(0,c.__values)(i(W))]:[3,6];case 4:G.sent(),G.label=5;case 5:return W++,[3,3];case 6:if(!(null===O||void 0===O?void 0:O.length))return[3,10];g((function(e){var n=null===O||void 0===O?void 0:O.map((function(e){return(0,s.Z)((0,l.Z)({},e),{generating:"block"})})),t=(0,r.Z)(e.blocks).concat((0,r.Z)((0,h.p$)(n))),i=(0,s.Z)((0,l.Z)({},(0,h.p$)(e)),{blocks:t.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n+1})}))});return o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:i,website:I}},o),i})),z=0,G.label=7;case 7:return z<O.length?(L=B.length+z,(M=O[z]).idx=L+1,M.generating="block",M.added=!0,[4,P(L,M,M,M,I)]):[3,10];case 8:G.sent(),G.label=9;case 9:return z++,[3,7];case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){(0,d.Wf)({type:"simulated-website-changed",payload:{website:u}},o)}),[u]),{website:u,page:p,changeTemplate:I,isReady:w}}var Ye=t(49456),Qe=t(60508),Xe=t(7118),en=function(e){var n=e.website,t=e.page,i=e.selected,o=e.onGenerate,l=(0,a.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],s=Je({sourceWebsite:n,sourcePage:t,iframeId:"iframe-builder-preview-1"}),r=s.changeTemplate,c=s.website,d=s.page,m=s.isReady,f=function(e){l(e),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:e}))};return(0,v.useEffect)((function(){m&&o(i,c,d),f((0,h.$K)(i))}),[m]),(0,v.useEffect)((function(){f((0,h.$K)(i))}),[i]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:(0,h.AK)("flex-shrink-0 overflow-hidden transition-all duration-500 absolute inset-0",i?"translate-y-0 opacity-100 delay-400 z-40":"translate-y-10 opacity-0 pointer-events-none z-20"),children:(0,u.jsxs)("div",{className:"relative w-full h-full flex-shrink-0",children:[i&&(0,u.jsx)("iframe",{name:"preview",id:"iframe-builder-preview-1",src:"/website/preview?blank=true",className:(0,h.AK)("bg-white mx-auto duration-200 w-full h-full flex-shrink-0 use-gpu"),onLoad:function(){i&&(r(i),setTimeout((function(){f(!!i)}),1e3))}}),(0,u.jsx)(Qe.f,{show:!m,animation:"slideFromBottom",children:(0,u.jsx)("div",{className:"fixed z-100 bottom-4 md:bottom-10 inset-x-4",children:(0,u.jsxs)("div",{className:"relative max-w-max mx-auto rounded-lg bg-white overflow-hidden shadow-xl transition-all duration-300",children:[(0,u.jsx)("div",{className:"absolute h-full bg-gradient-to-r from-indigo-800 to-red-100 transition-all animate-pulse",style:{width:"100%",background:"linear-gradient(90deg, #3E35DE 0%, #FFACDE 100%)",filter:"blur(0.5px)"}}),(0,u.jsxs)("div",{className:"relative z-10 flex items-center justify-center gap-3 p-4 md:py-3.5 md:px-6 text-sm md:text-lg font-semibold bg-white rounded-sm",style:{margin:"3px"},children:[(0,u.jsx)(v.Suspense,{fallback:(0,u.jsx)("div",{}),children:(0,u.jsx)(Xe.default,{className:"w-8 h-6",animation:Ye})}),(0,u.jsx)("span",{className:"flex-1",children:"Generating..."})]})]})})})]})})})},nn=t(78704),tn=t(2740);function on(e){var n=e.track,t=e.generatingPost,o=e.setOpenChangeTemplate,r=e.openChangeTemplate,d=e.onApply,m=e.website,f=e.page,p=e.previewMode,b=e.previewUrl,w=e.blockActions,y=(0,v.useState)(null),k=y[0],N=y[1],Z=(0,v.useState)(!1),C=Z[0],S=Z[1],_=(0,v.useState)(!1),P=_[0],E=_[1],I=(0,v.useState)({}),T=I[0],B=I[1],A=(0,a.Z)((0,me.Z)("website:open-change-template"),2)[1],R=(0,a.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],O=(0,v.useState)(!1),D=O[0],F=O[1],W=(0,v.useState)({left:!1,right:!0}),z=W[0],L=W[1],G=(0,v.useState)(),V=G[0],$=G[1],H=(0,v.useState)(),q=H[0],U=H[1],J=(0,v.useState)((0,h.tl)("website:templates")||[]),Y=J[0],Q=J[1],X=(0,v.useState)(1),ee=X[0],ne=X[1],te=(0,h.ac)("(min-width: 768px)"),ie=(0,v.useRef)(),oe=(0,v.useRef)(),le=(0,x.Z)().get,se=function(e){ie.current.scrollTo({left:ie.current.scrollLeft+("left"===e?-400:400),behavior:"smooth"})},ae=function(){var e=(0,i.Z)((function(){var e,n,t;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return[4,le("/website/get-templates",{categories:null===m||void 0===m||null===(e=m.business)||void 0===e?void 0:e.categories,vertical:null===m||void 0===m||null===(n=m.business)||void 0===n?void 0:n.vertical})];case 1:return!0===(null===(t=i.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)?(Q(null===t||void 0===t?void 0:t.content),(0,h.Fs)("website:templates",null===t||void 0===t?void 0:t.content)):Q([]),[2]}}))}));return function(){return e.apply(this,arguments)}}(),re=function(e){R(e),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:e}))};return(0,v.useEffect)((function(){var e={};if(!r||C)e={transformOrigin:"top left",transform:"scale(1) translateX(0)"};else{var n,t=(te?400:300)/window.innerWidth,i=t>1?1:t,o=null===(n=oe.current)||void 0===n?void 0:n.clientHeight;o=o?"".concat(o/i,"px"):"".concat(100/i,"%"),e={transformOrigin:"top left",transform:"scale(".concat(i,")"),width:"100vw",height:o};var l=document.getElementById("iframe-builder-preview");if(l){var s=l.contentWindow.document.getElementById("main-preview");s&&s.scrollTo(0,0)}}B(e),L((function(e){var n,t,i;return{left:!k&&(null===(n=ie.current)||void 0===n?void 0:n.scrollLeft)>300,right:!k&&(null===(t=ie.current)||void 0===t?void 0:t.scrollLeft)<(null===(i=ie.current)||void 0===i?void 0:i.scrollWidth)-window.innerWidth}}))}),[r,k,te,C,ie,oe]),(0,v.useEffect)((function(){if(ie.current&&ie.current.scrollTo(0,0),A(r&&!k),r){var e=setTimeout((function(){return E(!0)}),250);return function(){return clearTimeout(e)}}E(!1)}),[r,k,ie]),(0,v.useEffect)((function(){r&&(ae().catch(console.error),$(m))}),[m,r]),(0,v.useEffect)((function(){U(f)}),[f]),(0,v.useEffect)((function(){p.active?"mobile"===p.device?B((function(e){return(0,s.Z)((0,l.Z)({},e),{maxWidth:406,maxHeight:860})})):"tablet"===p.device?B((function(e){return(0,s.Z)((0,l.Z)({},e),{maxWidth:876,maxHeight:1040})})):B((function(e){return(0,s.Z)((0,l.Z)({},e),{maxWidth:"100%",maxHeight:"100%"})})):B((function(e){return(0,s.Z)((0,l.Z)({},e),{maxWidth:"100%",maxHeight:"100%"})}))}),[p]),(0,u.jsxs)("div",{id:"builder-wrapper",className:(0,h.AK)("bg-white w-full h-full relative mx-auto flex flex-col items-start mt-0",!r&&(D||t)&&"pointer-events-none","overflow-hidden"),children:[(0,u.jsxs)("div",{className:(0,h.AK)("bg-white fixed top-0 w-full flex justify-between items-center z-50 transition-all duration-500 border-b border-gray-300 px-6 py-3",k&&r?"opacity-100 translate-y-0":"opacity-80 -translate-y-full"),children:[(0,u.jsx)("h2",{className:(0,h.AK)("font-semibold text-black transition-all text-base md:text-xl"),children:"Change template"}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("button",{disabled:C,className:"btn light",onClick:function(){N(null),F(!1),re(!1)},children:"Revert"}),(0,u.jsxs)("button",{className:"btn primary gap-2",onClick:function(){S(!0),setTimeout((function(){d(V,q).then((function(){re(!1),setTimeout((function(){o(!1),S(!1),N(null),n("website:template-applied")}),2e3)}))}),1e3)},disabled:D||C,children:[(C||D)&&(0,u.jsx)(j.Z,{variant:"icon"}),(0,u.jsx)("span",{className:(0,h.AK)((C||D)&&"hidden md:block"),children:C?"Applying...":D?"Generating...":"Apply"})]})]})]}),(0,u.jsxs)("div",{className:(0,h.AK)("fixed z-30 bg-white top-0 transition-all duration-500 overflow-hidden pl-8 flex justify-between w-full items-start gap-8 h-24 ",r?k?"-translate-y-full delay-400":"translate-y-0 delay-400":"-translate-y-full"),children:[(0,u.jsxs)("div",{className:"mb-8 w-full mt-6",children:[(0,u.jsx)("h2",{className:(0,h.AK)("font-semibold text-black transition-all text-2xl"),children:"Change template"}),(0,u.jsxs)("p",{className:"text-gray-500 w-full flex items-center ",children:[(0,u.jsx)("span",{className:" text-sm lg:text-base hidden md:flex pt-2",children:"Choose the template that best suits your business. Don't worry \u2013 all your original text and images will be preserved."}),Y.length>0&&Y.length>5&&(0,u.jsxs)(g.Z,{className:"link flex items-center md:ml-auto mt-2 md:mt-0",onClick:function(){ne((function(e){return e===Math.ceil(Y.length/5)?1:e+1})),ie.current&&ie.current.scrollTo(0,0),n("website:template-regenerate")},disabled:D,children:[(0,u.jsx)(M.Z,{icon:"BoltIcon",className:"w-5 h-5 mr-2"})," Regenerate"]})]})]}),(0,u.jsx)("button",{className:"btn mt-8 mr-4",onClick:function(){o(!1),N(null),E(!1)},children:(0,u.jsx)(M.Z,{icon:"XIcon",className:"h-6 w-6"})})]}),(0,u.jsxs)("div",{id:"builder-content",ref:ie,className:(0,h.AK)("bg-white relative flex gap-4 md:gap-8 transition-all duration-500 delay-200 smooth-scroll no-scrollbar h-full",!C&&r?"z-20 pb-4 pt-20 md:pt-16 ml-4 md:ml-8 h-full overflow-x-auto w-screen pr-28":"z-40 mt-0",!C&&null===k&&r?"opacity-100 translate-y-0":!C&&r?"opacity-0 translate-y-10 pointer-events-none":""),style:{scrollSnapType:"x mandatory"},onScroll:function(e){r&&L({left:!k&&e.target.scrollLeft>300,right:!k&&e.target.scrollLeft<e.target.scrollWidth-window.innerWidth})},children:[r&&(0,u.jsx)(tn.h,{children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:(0,h.AK)("fixed z-40 left-16 hidden md:flex items-center justify-center cursor-pointer shadow-lg bg-indigo-700 hover:bg-indigo-500 rounded-full top-1/2 translate-y-1/2 w-12 h-12 transition-all duration-500",r?"opacity-100 translate-x-0":"opacity-0 pointer-events-none -translate-x-full",!(null===z||void 0===z?void 0:z.left)&&"!opacity-0 pointer-events-none",k&&"opacity-0 pointer-events-none"),onClick:function(){return se("left")},children:(0,u.jsx)(M.Z,{icon:"ArrowLeftSolidIcon",className:"text-white w-5 h-5"})}),(0,u.jsx)("div",{className:(0,h.AK)("fixed z-40 right-8 hidden md:flex items-center justify-center cursor-pointer shadow-lg bg-indigo-700 hover:bg-indigo-500 rounded-full top-1/2 translate-y-1/2 w-12 h-12 transition-all duration-500",r?"opacity-100 translate-x-0":"opacity-0 pointer-events-none translate-x-full",!(null===z||void 0===z?void 0:z.right)&&"!opacity-0 pointer-events-none",k&&"opacity-0 pointer-events-none"),onClick:function(){return se("right")},children:(0,u.jsx)(M.Z,{icon:"ArrowRightSolidIcon",className:"text-white w-5 h-5"})})]})}),(0,u.jsxs)("div",{className:(0,h.AK)("relative left-0 duration-750 flex-shrink-0 transition-all group z-20",r?"h-screen border-4 border-l-3 border-indigo-600 rounded-b-lg rounded-tr-lg w-75 md:w-100":"h-full border-0 border-transparent w-screen"),onClick:function(){return N(null)},style:{maxHeight:r?te?"calc(100vh - 144px)":"calc(100vh - 14rem)":"100%",scrollSnapAlign:"start"},children:[(0,u.jsx)("div",{className:(0,h.AK)("absolute z-30 flex items-center -top-8 h-8 -left-1 bg-indigo-700 text-white py-1.5 px-4 font-medium rounded-t-md text-sm cursor-auto duration-500 delay-200",r?"opacity-100":"opacity-0 pointer-events-none translate-y-1/2 translate-x-1"),children:"Your template"}),(0,u.jsx)("div",{ref:oe,className:(0,h.AK)("relative h-full",r?"overflow-hidden rounded-b-sm rounded-tr-sm bg-indigo-700":"",p.active&&["mobile","tablet"].includes(p.device)?"py-5":""),children:(0,u.jsx)("iframe",{id:"iframe-builder-preview",name:"preview",src:(null===p||void 0===p?void 0:p.active)&&b?b:"/website/preview",scrolling:r?"no":"yes",className:(0,h.AK)("relative bg-white mx-auto w-screen h-full use-gpu transform-gpu transition-transform duration-750",r?"pointer-events-none no-scrollbar overflow-hidden rounded-b-3xl rounded-tr-3xl ml-px":"pointer-events-auto",p.active&&["mobile","tablet"].includes(p.device)?"border-12 border-white rounded-3xl shadow-xl":""),style:T,onLoad:function(){window.dispatchEvent(new CustomEvent("website-builder-preview-loaded")),(0,h.$K)(w)&&re(w)}})})]}),null===Y||void 0===Y?void 0:Y.slice(5*(ee-1),5*ee).map((function(e,t){var i,o,l,s;return(0,u.jsxs)("div",{id:e.subdomain,className:(0,h.AK)("flex-shrink-0 w-75 md:w-100 h-screen rounded-md border relative z-10 transition-all duration-500 overflow-hidden","cursor-pointer hover:shadow-lg group",P?"opacity-100 scale-100":"opacity-0 scale-120"),onClick:function(){F(!0),N(e.subdomain),n("website:template-selected",{template:e.subdomain})},style:{maxHeight:r?te?"calc(100vh - 144px)":"calc(100vh - 14rem)":"100%",scrollSnapAlign:"start"},children:[(0,u.jsx)("div",{className:"absolute inset-0 z-10 transition-all opacity-0 group-hover:opacity-100 bg-gray-700 bg-opacity-30 flex items-center justify-center duration-400",children:(0,u.jsx)("button",{className:"btn light transition-all delay-100 translate-y-1/2 group-hover:translate-y-0 duration-500",children:"Preview"})}),(null===(i=e.screenshots)||void 0===i?void 0:i.desktop)||(null===(o=e.screenshots)||void 0===o?void 0:o.mobile)?(0,u.jsxs)(u.Fragment,{children:[(null===(l=e.screenshots)||void 0===l?void 0:l.desktop)&&(0,u.jsx)("div",{className:"absolute inset-0 z-0 bg-gray-300 hidden md:block",children:(0,u.jsx)(K(),{src:e.screenshots.desktop.url,alt:"Template preview",layout:"fill",objectFit:"cover",objectPosition:"top"})}),(null===(s=e.screenshots)||void 0===s?void 0:s.mobile)&&(0,u.jsx)("div",{className:"absolute inset-0 z-0 bg-gray-300 md:hidden",children:(0,u.jsx)(K(),{src:e.screenshots.mobile.url,alt:"Template preview",layout:"fill",objectFit:"cover",objectPosition:"top"})})]}):(0,u.jsx)(nn.Z,{className:"bg-white absolute inset-0 z-5"})]},"template-".concat(t))}))]}),r&&k&&m&&f&&(0,u.jsx)(en,{website:m,page:f,selected:k,onGenerate:function(e,n,t){F(!1),$(n),U(t)}})]})}var ln,sn=t(65785),an=t(47914),rn=t(74906),cn=t(5152),un=t.n(cn),dn=t(37882),vn=t(51523),mn=t(4156),fn=t(18362),pn=function(e){var n=e.onAction,t=e.onClose,i=e.visible,o=(0,ne.useRouter)();return(0,u.jsx)(fn.Z,{visible:i,context:{context:"publish_website",page:o.pathname},image:(0,h.sd)("paywalls/pw-upgrade-domain-pro-bg.png"),title:"Upgrade to publish your site",description:"Get a free custom domain name when you upgrade your plan .",buttonTitle:"View Plans",buttonAction:n,featTitle:"Upgrade to premium and also get:",features:["More website pages","Premium website features","CRM and automation tools","Invoices and payment tracking"],bgColor:"bg-gray-900",closeColor:"text-white",onClose:function(){t()}})},hn=t(26125),xn=(t(40735),t(95350));function gn(e){var n,t,o,l,s,r,d=e.preview,m=(e.status,e.open),f=e.setOpen,p=e.onPublish,b=e.setOpenPaywall,w=e.website,y=e.onOpenLinkDomain,k=(0,v.useState)(!0),N=k[0],Z=k[1],C=(0,v.useState)(null),S=C[0],_=C[1],P=(0,v.useState)(null),E=P[0],I=P[1],T=(0,v.useState)(!1),B=T[0],A=T[1],R=(0,v.useState)(""),O=R[0],D=(R[1],(0,v.useState)("home")),F=D[0],W=D[1],z=(0,v.useRef)(null),G=(0,v.useRef)(null),K=(0,v.useRef)(null),H=(0,v.useState)(!1),q=H[0],U=H[1],J=(0,a.Z)((0,me.Z)("websiteBuilder.paywall",""),2),Y=J[0],Q=J[1],X=(0,v.useState)([]),ee=X[0],ne=X[1],te=(0,v.useState)(!1),ie=te[0],oe=te[1],le=(0,v.useState)(""),se=(le[0],le[1],(0,a.Z)((0,me.Z)("support.modal",!1),2)[1],(0,x.Z)()),ae=se.get,re=se.post,ce=(0,vn.Z)(O),ue=ce.copied,de=(ce.copy,ce.reset),ve=(0,$.Z)().track,fe=(0,h.ac)("(min-width: 768px)"),pe=(0,V.useSession)().data,he=function(e){return(0,u.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,u.jsx)("p",{className:"text-sm break-all",children:e})})},xe=function(){var e=(0,i.Z)((function(){var e,n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return A(!0),[4,ae("/website/get-subdomain-details")];case 1:return(null===(e=o.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&(n=e.content,t=n.subdomain,i=n.durableDomain,_(t),I(i)),A(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return A(!0),[4,ae("/website/verify-subdomain",{subdomain:S})];case 1:return(e=n.sent())&&!0===e.status&&!0===e.content?Z(!0):Z(!1),A(!1),[2,e.content]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return A(!0),[4,re("/website/save-subdomain",{subdomain:S})];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)?[4,p(!0)]:[3,3];case 2:return n.sent(),f(!1),[3,4];case 3:xn.Z.error(e.message),n.label=4;case 4:return A(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return clearTimeout(ln),ln=setTimeout((0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,ge()]}))})),500),[2]}))}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return"free"!==(null===pe||void 0===pe||null===(e=pe.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?[3,1]:(U(!0),[3,3]);case 1:return[4,be()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return ne([]),ae("/custom-domain/suggestion").then((function(e){e&&!0===e.status&&e.content&&ne(e.content)})),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){var e=setTimeout((function(){de()}),2e3);return function(){clearTimeout(e)}}),[ue]),(0,v.useEffect)((function(){m&&(xe(),ke())}),[m]),(0,u.jsx)(L.u.Root,{show:m,as:v.Fragment,children:(0,u.jsx)(dn.V,{static:!0,open:m&&!Y,as:"div",className:"fixed z-100 inset-0 overflow-y-auto",initialFocus:z,onClose:function(){},children:(0,u.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(dn.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,u.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,u.jsxs)("div",{className:"inline-block align-bottom w-full bg-white rounded-t-lg md:rounded-lg text-left shadow-xl transform transition-all md:my-8 md:align-middle",style:{width:ie?"720px":"640px"},children:[(0,u.jsxs)("div",{className:"flex w-full items-center py-4 px-5 border-b border-gray-200",children:[(0,u.jsx)(dn.V.Title,{className:"",children:(0,u.jsx)("div",{className:"flex flex-col gap-2",children:(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Get a domain and publish"})})}),(0,u.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return f(!1)},tabIndex:-1,children:(0,u.jsx)(M.Z,{icon:"XMarkIcon",from:"heroicons",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{ref:z,className:"",children:["home"===F&&(0,u.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:["agency"!==(null===pe||void 0===pe||null===(n=pe.user)||void 0===n||null===(t=n.plan)||void 0===t?void 0:t.priceId)&&"agency"!==(null===pe||void 0===pe||null===(o=pe.user)||void 0===o||null===(l=o.customPlan)||void 0===l?void 0:l.type)&&(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){W("custom"),ve("app:get-custom-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Get a custom domain"}),(0,u.jsx)("span",{className:"text-sm badge text-green-800 bg-green-100",children:"Recommended"})]}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Get your own custom domain for free!"}),(null===ee||void 0===ee?void 0:ee.length)>0?(0,u.jsxs)("div",{className:"flex gap-2 items-center",children:[ee.slice(0,1).map((function(e){return he(e.domain)})),(0,u.jsx)("div",{className:"text-gray-500 text-sm",children:"+ more"})]}):(0,u.jsx)("div",{className:"flex gap-2 ",children:(0,u.jsx)(j.Z,{classNameChild:"h-10 w-40",variant:"skeleton"})})]}),(0,u.jsx)(M.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]}),(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){W("durable"),ve("app:use-durable-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2 ",children:[(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Use a Durable domain"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Start quickly with a free Durable domain."}),(0,u.jsx)("div",{className:"flex gap-2",children:(null===w||void 0===w?void 0:w.subdomain)&&(null===w||void 0===w?void 0:w.durableDomain)&&he("".concat(null===w||void 0===w?void 0:w.subdomain,".").concat(null===w||void 0===w?void 0:w.durableDomain))})]}),(0,u.jsx)(M.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]}),(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){y(),ve("app:use-existing-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Use a domain you already own"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Connect your existing domain easily with any paid plan."})]}),(0,u.jsx)(M.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]})]}),"custom"===F&&(0,u.jsx)("div",{className:(0,h.AK)("pt-6 pb-4 pl-4 md:pl-6"),children:(0,u.jsx)(mn.Z,{refresh:function(){f(!1),p(!0)},seeMoreSteps:3,setSelectedDomain:function(){},onAction:function(){},fromBuilder:!0,onPaywall:Q})}),"external"===F&&(0,u.jsx)("div",{className:(0,h.AK)("overflow-y-auto mt-4"),style:{height:ie&&fe?"600px":"400px",maxHeight:ie&&fe?"600px":"400px"},children:(0,u.jsx)(hn.Z,{open:m,setOpen:f,isModal:!1,fromBuilder:!0,refreshWebsite:function(){},afterComplete:function(){f(!1),p(!0)},onStepChange:function(e){oe("configure-manually"===e)}})}),"durable"===F&&(0,u.jsxs)("div",{className:"flex flex-col gap-2 px-4 md:px-6 mb-6 mt-6",children:[(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"Your website address"}),(0,u.jsxs)("label",{className:"relative flex items-center gap-2 border border-indigo-400 rounded-full py-3 px-4 overflow-hidden",style:{paddingRight:(null===K||void 0===K||null===(s=K.current)||void 0===s?void 0:s.offsetWidth)+16||16},children:[(0,u.jsx)(M.Z,{icon:"LockClosedIcon",from:"heroicons",className:"text-gray-500 h-3 w-3"}),(0,u.jsx)("input",{ref:G,className:"w-full border-0 p-0 font-medium text-body md:text-sm outline-none placeholder-gray-400",value:S,onKeyUp:function(){return we()},onChange:function(e){return _((0,h.nv)(e.target.value,E))}}),(0,u.jsxs)("div",{className:"absolute inset-0 flex items-center py-3 pl-9 pr-4 font-medium text-body md:text-sm pointer-events-none",children:[(0,u.jsx)("div",{className:"opacity-0",style:{maxWidth:(null===G||void 0===G||null===(r=G.current)||void 0===r?void 0:r.offsetWidth)||"100%"},children:S}),(0,u.jsx)("div",{ref:K,className:"text-gray-400",children:(0,h.lz)({subdomain:S,durableDomain:E},!1)})]}),(0,u.jsx)(ye(),{href:O,children:(0,u.jsx)("a",{target:"_blank",className:(0,h.AK)("absolute right-0 flex items-center py-3 px-4 bg-white text-indigo-600 cursor-pointer transition-opacity hover:text-indigo-700"),children:(0,u.jsx)(M.Z,{icon:"ExternalLinkIcon",className:"w-5 h-5"})})})]})]}),"home"!==F&&(0,u.jsxs)("div",{className:"flex justify-between gap-3 p-4 lg:px-6 border-t border-gray-200",children:[(0,u.jsx)(g.Z,{className:"light",tabIndex:1,onClick:function(){return W("home")},disabled:B,loading:B,children:"Back"}),"custom"!==F&&(0,u.jsx)(g.Z,{className:"primary",tabIndex:1,onClick:function(){ve("app:durable-domain-publish"),"durable"===F?je():f(!0)},disabled:B||!S||!N,loading:B,children:"Publish"})]})]}),(0,u.jsx)(pn,{visible:q,onAction:function(){ve("account:paywall-click",{context:"".concat(d?"preview":"publish","_flow")}),b("".concat(d?"preview":"publish")),U(!1)},onClose:function(){return U(!1)}})]})})]})})})}var bn=t(68093),wn=t(22295),yn=t(40318),jn=t(53511),kn=t(43443),Nn=t(28774),Zn=t(62748),Cn=t(99887),Sn=(t(29022),[{id:"top",icon:"ImageTopIcon"},{id:"bottom",icon:"ImageBottomIcon"}]),_n=[{id:"top",icon:"ObjectAlignTopSolidIcon"},{id:"middle",icon:"ObjectAlignVCenterSolidIcon"},{id:"bottom",icon:"ObjectAlignBottomSolidIcon"}],Pn=[{id:"vertical",icon:"ArrowDownIcon"},{id:"horizontal",icon:"ArrowRightIcon"}],En=function(e){var n,t=e.className,i=e.block,o=e.setBlock,a=e.imagePlacement,r=void 0===a||a,c=e.verticalAlignment,d=void 0===c||c,v=e.sliderOrientation,m=void 0===v||v;return(0,u.jsxs)("div",{className:(0,h.AK)("space-y-6",t),children:[(0,u.jsx)("p",{className:"font-semibold",children:"Layout"}),(0,u.jsxs)(u.Fragment,{children:[r&&(0,u.jsx)(w.Z,{label:"Carousel position",value:(null===i||void 0===i||null===(n=i.image)||void 0===n?void 0:n.align)||"bottom",options:Sn,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{image:(0,s.Z)((0,l.Z)({},i.image),{align:e})}))}}),d&&(0,u.jsx)(w.Z,{label:"Content alignment",value:i.verticalAlign||"middle",options:_n,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{verticalAlign:e}))}}),m&&(0,u.jsx)(w.Z,{label:"Slider orientation",value:(null===i||void 0===i?void 0:i.sliderOrientation)||"vertical",options:Pn,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{sliderOrientation:e}))}})]})]})},In=[{id:22,name:"Slow"},{id:44,name:"Normal"},{id:66,name:"Fast"},{id:88,name:"Very fast"}];function Tn(e){var n,t=e.className,i=e.block,o=e.setBlock;return(0,u.jsxs)("div",{className:(0,h.AK)("space-y-6",t),children:[(0,u.jsx)("p",{className:"font-semibold",children:"Carousel speed"}),(0,u.jsx)(oe.Z,{value:In.find((function(e){return e.id===(null!==(n=i.speed)&&void 0!==n?n:44)})),values:In,onChange:function(e){return o((function(n){return(0,s.Z)((0,l.Z)({},n),{speed:e.id})}))}})]})}var Bn=t(78174),An=t(88268);function Rn(e){var n,t,o,a,r,d,p,x,g=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),A=T[0],R=T[1],O=(0,v.useState)(null),D=O[0],F=O[1],W=(0,v.useState)(!1),z=W[0],L=W[1],G=(0,v.useState)(null),K=G[0],V=G[1],$=(0,te.Z)(),H=$.confirm,q=$.ConfirmDialog,U=function(){b(!1)},J=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[D]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},Y=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Zn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner image slider horizontal",open:g,rtl:j,setRtl:k,edit:A,setEdit:R,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:U,invalid:z,onSelectItem:function(e,n){if("buttons"===n)F(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(Bn.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(On,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:Y,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),R("Image")},onRemove:function(e){H("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),R("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(M.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(yn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return R("Button settings")},setSelected:F,text:"Add a button with a link to a page, phone number, email or section"}),(0,u.jsx)(An.Z,{block:w,setBlock:y,purpose:!0})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return R("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(a=o.items)||void 0===a?void 0:a.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){F(e),R("Button style")},onTryPalette:U}),(0,u.jsx)(Tn,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(En,{className:"pt-6",block:w,setBlock:y,verticalAlignment:!1,sliderOrientation:!1}),(0,u.jsx)(Cn.Z,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!0,verticalAlign:!1,rightAlign:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(B.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"pt-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(r=w.buttons)||void 0===r||null===(d=r.items)||void 0===d?void 0:d[D],onChange:J})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(x=p.items)||void 0===x?void 0:x[D],onChange:J,onValid:function(e){_(e),L(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Nn.Z,{item:K,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var On=(0,kn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Dn,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Dn=(0,kn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,a=e.last,r=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!a&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Fn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(K(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return r(l,s)},children:(0,u.jsx)(M.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(M.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Fn=(0,kn.JV)((function(){return(0,u.jsx)(M.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function Wn(e){var n,t,o,a,r,d,p,x,g=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),A=T[0],R=T[1],O=(0,v.useState)(null),D=O[0],F=O[1],W=(0,v.useState)(!1),z=W[0],L=W[1],G=(0,v.useState)(null),K=G[0],V=G[1],$=(0,te.Z)(),H=$.confirm,q=$.ConfirmDialog,U=function(){b(!1)},J=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[D]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},Y=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Zn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner double image slider",open:g,rtl:j,setRtl:k,edit:A,setEdit:R,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:U,invalid:z,onSelectItem:function(e,n){if("buttons"===n)F(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(Bn.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(zn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:Y,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),R("Image")},onRemove:function(e){H("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),R("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(M.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(yn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return R("Button settings")},setSelected:F,text:"Add a button with a link to a page, phone number, email or section"}),(0,u.jsx)(An.Z,{block:w,setBlock:y,purpose:!0})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return R("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(a=o.items)||void 0===a?void 0:a.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){F(e),R("Button style")},onTryPalette:U}),(0,u.jsx)(Tn,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(En,{className:"pt-6",block:w,setBlock:y,imagePlacement:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(B.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"pt-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(r=w.buttons)||void 0===r||null===(d=r.items)||void 0===d?void 0:d[D],onChange:J})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(x=p.items)||void 0===x?void 0:x[D],onChange:J,onValid:function(e){_(e),L(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Nn.Z,{item:K,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var zn=(0,kn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Ln,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Ln=(0,kn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,a=e.last,r=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!a&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Mn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(K(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return r(l,s)},children:(0,u.jsx)(M.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(M.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Mn=(0,kn.JV)((function(){return(0,u.jsx)(M.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function Gn(e){var n,t,o,a,r,d,p,x,g=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),A=T[0],R=T[1],O=(0,v.useState)(null),D=O[0],F=O[1],W=(0,v.useState)(!1),z=W[0],L=W[1],G=(0,v.useState)(null),K=G[0],V=G[1],$=(0,te.Z)(),H=$.confirm,q=$.ConfirmDialog,U=function(){b(!1)},J=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[D]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},Y=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Zn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner carousel",open:g,rtl:j,setRtl:k,edit:A,setEdit:R,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:U,invalid:z,onSelectItem:function(e,n){if("buttons"===n)F(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(Bn.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(Kn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:Y,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),R("Image")},onRemove:function(e){H("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),R("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(M.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(yn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return R("Button settings")},setSelected:F,text:"Add a button with a link to a page, phone number, email or section"}),(0,u.jsx)(An.Z,{block:w,setBlock:y,purpose:!0})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return R("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(a=o.items)||void 0===a?void 0:a.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){F(e),R("Button style")},onTryPalette:U}),(0,u.jsx)(En,{className:"pt-6",block:w,setBlock:y,imagePlacement:!1,sliderOrientation:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(B.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"pt-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(r=w.buttons)||void 0===r||null===(d=r.items)||void 0===d?void 0:d[D],onChange:J})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(x=p.items)||void 0===x?void 0:x[D],onChange:J,onValid:function(e){_(e),L(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Nn.Z,{item:K,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var Kn=(0,kn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Vn,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Vn=(0,kn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,a=e.last,r=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!a&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)($n,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(K(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return r(l,s)},children:(0,u.jsx)(M.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(M.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),$n=(0,kn.JV)((function(){return(0,u.jsx)(M.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function Hn(e){var n,t,o,a,r,d,p,x,g=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),A=T[0],R=T[1],O=(0,v.useState)(null),D=O[0],F=O[1],W=(0,v.useState)(!1),z=W[0],L=W[1],G=(0,v.useState)(null),K=G[0],V=G[1],$=(0,te.Z)(),H=$.confirm,q=$.ConfirmDialog,U=function(){b(!1)},J=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[D]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},Y=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Zn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner bento grid",open:g,rtl:j,setRtl:k,edit:A,setEdit:R,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:U,invalid:z,onSelectItem:function(e,n){if("buttons"===n)F(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(Bn.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 3 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(qn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:Y,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),R("Image")},onRemove:function(e){H("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<3)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),R("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(M.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(yn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return R("Button settings")},setSelected:F,text:"Add a button with a link to a page, phone number, email or section"}),(0,u.jsx)(An.Z,{block:w,setBlock:y,purpose:!0})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return R("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(a=o.items)||void 0===a?void 0:a.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){F(e),R("Button style")},onTryPalette:U}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(B.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"pt-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(r=w.buttons)||void 0===r||null===(d=r.items)||void 0===d?void 0:d[D],onChange:J})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(x=p.items)||void 0===x?void 0:x[D],onChange:J,onValid:function(e){_(e),L(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Nn.Z,{item:K,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var qn=(0,kn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Un,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Un=(0,kn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,a=e.last,r=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!a&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Jn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(K(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return r(l,s)},children:(0,u.jsx)(M.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(M.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Jn=(0,kn.JV)((function(){return(0,u.jsx)(M.Z,{icon:"DragIcon",className:"w-5 h-5"})})),Yn=t(92265),Qn=t(42734);function Xn(e){var n=e.open,t=e.setOpen,o=e.onRegenerate,a=e.setWebsiteToRegenerate,r=(0,v.useState)(),d=r[0],m=r[1],f=(0,Yn.Z)(),p=f.aiSettings,x=f.setAiSettings,b=f.saveAiSettings,w=(0,v.useRef)(null),y=function(){t(!1)},j=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return x((function(n){return(0,s.Z)((0,l.Z)({},n),{voiceAndTone:e})})),a((function(n){return(0,s.Z)((0,l.Z)({},n),{business:(0,s.Z)((0,l.Z)({},n.business),{voiceAndTone:e})})})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return y(),setTimeout((function(){o()}),200),b(!1),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){n&&m(null===p||void 0===p?void 0:p.voiceAndTone)}),[n,p]),(0,u.jsx)(L.u,{show:n,as:v.Fragment,children:(0,u.jsx)(dn.V,{as:"div",className:"fixed inset-0 z-100 overflow-hidden",initialFocus:w,onClose:y,children:(0,u.jsxs)("div",{className:"flex items-end md:items-center justify-center h-full",children:[(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(dn.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,u.jsx)(L.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,u.jsxs)("div",{className:"relative flex flex-col h-full md:h-auto w-full md:max-w-120 bg-white md:rounded-md md:shadow-xl",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pl-6 pr-4 py-3",children:[(0,u.jsx)(dn.V.Title,{className:"font-semibold",children:"Regenerate text"}),(0,u.jsx)("button",{className:"light icon transparent",onClick:y,children:(0,u.jsx)(M.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,u.jsx)("div",{ref:w,className:"flex-1 p-6 overflow-y-auto max-h-[calc(100dvh-136px)]",children:(0,u.jsx)("div",{className:"block w-full mb-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"flex py-2.5 font-semibold text-base cursor-pointer sticky top-0 bg-white",children:"Tone of voice"})}),Qn.i4.filter((function(e){return"tone"===e.type})).map((function(e,n){return(0,u.jsx)("div",{onClick:function(){m(e.id),j(e.id)},children:(0,u.jsxs)("div",{className:"flex items-center gap-1.5 pr-4 py-2.5 hover:bg-gray-100 cursor-pointer rounded-md",children:[(0,u.jsx)(M.Z,{icon:"CheckCircleSolidIcon",className:(0,h.AK)("w-5 h-5 text-indigo-700 transition-all ml-2 flex-shrink-0",e.id===d?"opacity-100":"opacity-0")}),(0,u.jsx)("span",{className:"text-sm font-medium whitespace-nowrap text-gray-700",children:e.name})]})},"tone-".concat(n))}))]}),(0,u.jsxs)("div",{className:" flex-1 flex-shrink",children:[(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"flex py-2.5 font-semibold text-base cursor-pointer sticky top-0 bg-white mt-4 md:mt-0",children:"Personalities"})}),Qn.i4.filter((function(e){return"personality"===e.type})).map((function(e,n){return(0,u.jsx)("div",{onClick:function(){m(e.id),j(e.id)},children:(0,u.jsxs)("div",{className:"flex items-center gap-1.5 pr-4 py-2.5 hover:bg-gray-100 cursor-pointer rounded-md",children:[(0,u.jsx)(M.Z,{icon:"CheckCircleSolidIcon",className:(0,h.AK)("w-5 h-5 text-indigo-700 transition-all ml-2 flex-shrink-0",e.id===d?"opacity-100":"opacity-0")}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]})},"tone-".concat(n))}))]})]})})}),(0,u.jsxs)("div",{className:"flex justify-end gap-4 px-6 p-4 border-t border-gray-300",children:[(0,u.jsx)("button",{className:"light",onClick:y,children:"Cancel"}),(0,u.jsx)(g.Z,{className:"primary",onClick:k,children:"Regenerate"})]})]})})]})})})}var et,nt=t(56214),tt=un()((function(){return t.e(7786).then(t.bind(t,67040))}),{loadableGenerated:{webpack:function(){return[67040]}},loading:function(){return""},ssr:!0}),it=un()((function(){return t.e(4969).then(t.bind(t,54969))}),{loadableGenerated:{webpack:function(){return[54969]}},loading:function(){return""},ssr:!0}),ot=un()((function(){return t.e(2426).then(t.bind(t,42426))}),{loadableGenerated:{webpack:function(){return[42426]}},loading:function(){return""},ssr:!0}),lt=un()((function(){return t.e(2659).then(t.bind(t,12659))}),{loadableGenerated:{webpack:function(){return[12659]}},loading:function(){return""},ssr:!0}),st=un()((function(){return Promise.all([t.e(6235),t.e(8622),t.e(3994),t.e(4513),t.e(1484)]).then(t.bind(t,91719))}),{loadableGenerated:{webpack:function(){return[91719]}},loading:function(){return""},ssr:!0}),at=un()((function(){return t.e(1443).then(t.bind(t,31443))}),{loadableGenerated:{webpack:function(){return[31443]}},loading:function(){return""},ssr:!0}),rt=un()((function(){return t.e(6388).then(t.bind(t,96388))}),{loadableGenerated:{webpack:function(){return[96388]}},loading:function(){return""},ssr:!0}),ct=un()((function(){return Promise.all([t.e(6235),t.e(9455)]).then(t.bind(t,9455))}),{loadableGenerated:{webpack:function(){return[9455]}},loading:function(){return""},ssr:!0}),ut=un()((function(){return t.e(932).then(t.bind(t,90932))}),{loadableGenerated:{webpack:function(){return[90932]}},loading:function(){return""},ssr:!0}),dt=un()((function(){return t.e(7647).then(t.bind(t,27647))}),{loadableGenerated:{webpack:function(){return[27647]}},loading:function(){return""},ssr:!0}),vt=un()((function(){return Promise.resolve().then(t.bind(t,4490))}),{loadableGenerated:{webpack:function(){return[4490]}},loading:function(){return""},ssr:!0}),mt=un()((function(){return t.e(378).then(t.bind(t,90378))}),{loadableGenerated:{webpack:function(){return[90378]}},loading:function(){return""},ssr:!0}),ft=un()((function(){return Promise.all([t.e(6235),t.e(9294)]).then(t.bind(t,59294))}),{loadableGenerated:{webpack:function(){return[59294]}},loading:function(){return""},ssr:!0}),pt=un()((function(){return t.e(5965).then(t.bind(t,45965))}),{loadableGenerated:{webpack:function(){return[45965]}},loading:function(){return""},ssr:!0}),ht=un()((function(){return Promise.all([t.e(6235),t.e(6289)]).then(t.bind(t,76289))}),{loadableGenerated:{webpack:function(){return[76289]}},loading:function(){return""},ssr:!0}),xt=un()((function(){return Promise.all([t.e(6235),t.e(1025)]).then(t.bind(t,41025))}),{loadableGenerated:{webpack:function(){return[41025]}},loading:function(){return""},ssr:!0}),gt=un()((function(){return Promise.all([t.e(1172),t.e(7687)]).then(t.bind(t,14387))}),{loadableGenerated:{webpack:function(){return[14387]}},loading:function(){return""},ssr:!0}),bt=un()((function(){return t.e(4533).then(t.bind(t,4533))}),{loadableGenerated:{webpack:function(){return[4533]}},loading:function(){return""},ssr:!0}),wt=un()((function(){return t.e(3143).then(t.bind(t,3143))}),{loadableGenerated:{webpack:function(){return[3143]}},loading:function(){return""},ssr:!0}),yt=un()((function(){return t.e(3521).then(t.bind(t,13521))}),{loadableGenerated:{webpack:function(){return[13521]}},loading:function(){return""},ssr:!0}),jt=un()((function(){return t.e(4417).then(t.bind(t,14417))}),{loadableGenerated:{webpack:function(){return[14417]}},loading:function(){return""},ssr:!0}),kt=un()((function(){return t.e(6855).then(t.bind(t,66855))}),{loadableGenerated:{webpack:function(){return[66855]}},loading:function(){return""},ssr:!0}),Nt=un()((function(){return Promise.all([t.e(6235),t.e(5973)]).then(t.bind(t,85973))}),{loadableGenerated:{webpack:function(){return[85973]}},loading:function(){return""},ssr:!0}),Zt=un()((function(){return t.e(2825).then(t.bind(t,92825))}),{loadableGenerated:{webpack:function(){return[92825]}},loading:function(){return""},ssr:!0}),Ct=un()((function(){return Promise.all([t.e(6235),t.e(646)]).then(t.bind(t,40646))}),{loadableGenerated:{webpack:function(){return[40646]}},loading:function(){return""},ssr:!0}),St=un()((function(){return t.e(3755).then(t.bind(t,13755))}),{loadableGenerated:{webpack:function(){return[13755]}},loading:function(){return""},ssr:!0}),_t=un()((function(){return t.e(4216).then(t.bind(t,64216))}),{loadableGenerated:{webpack:function(){return[64216]}},loading:function(){return""},ssr:!0}),Pt=un()((function(){return t.e(9164).then(t.bind(t,39164))}),{loadableGenerated:{webpack:function(){return[39164]}},loading:function(){return""},ssr:!0}),Et=un()((function(){return t.e(6492).then(t.bind(t,66492))}),{loadableGenerated:{webpack:function(){return[66492]}},loading:function(){return""},ssr:!0}),It=un()((function(){return Promise.all([t.e(6235),t.e(431),t.e(3986),t.e(4679),t.e(4513),t.e(3900)]).then(t.bind(t,83900))}),{loadableGenerated:{webpack:function(){return[83900]}},loading:function(){return""},ssr:!0}),Tt=un()((function(){return t.e(1644).then(t.bind(t,11644))}),{loadableGenerated:{webpack:function(){return[11644]}},loading:function(){return""},ssr:!0}),Bt=un()((function(){return t.e(2194).then(t.bind(t,32194))}),{loadableGenerated:{webpack:function(){return[32194]}},loading:function(){return""},ssr:!0}),At=un()((function(){return t.e(187).then(t.bind(t,10187))}),{loadableGenerated:{webpack:function(){return[10187]}},loading:function(){return""},ssr:!0}),Rt=un()((function(){return t.e(4745).then(t.bind(t,24745))}),{loadableGenerated:{webpack:function(){return[24745]}},loading:function(){return""},ssr:!0}),Ot=un()((function(){return t.e(1427).then(t.bind(t,61427))}),{loadableGenerated:{webpack:function(){return[61427]}},loading:function(){return""},ssr:!0}),Dt=!0;function Ft(){var e,n,t,m,f=function(e,n){n||(n=Ce.find((function(e){return e.id===ge.id})));var t=n&&(null===n||void 0===n?void 0:n.blocks)?(0,h.p$)(n.blocks):null;if(t){var o=t.shift(),l=t.pop();e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Mi("/website/save-header-and-footer-blocks",{idPage:n.id,header:o,footer:l,wipeCache:!1})];case 1:if(null===(e=t.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))}))),e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Mi("/website/save-social",{social:q,wipeCache:!1})];case 1:if(null===(e=n.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))})));var s=t;e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Mi("/website/save-blocks",{idPage:n.id,blocks:s,wipeCache:!1})];case 1:if(null===(e=t.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))})))}return n},p=(0,h.ac)("(min-width: 1024px)"),g=(0,v.useState)(!1),b=g[0],w=g[1],y=(0,v.useState)(!1),j=y[0],k=y[1],N=(0,v.useState)(!1),Z=N[0],C=N[1],_=(0,v.useState)(!1),P=_[0],E=_[1],I=(0,v.useState)((0,h.tl)("business.config")),T=I[0],B=I[1],A=(0,v.useState)(null),O=A[0],L=A[1],M=(0,v.useState)((0,h.tl)("pages")),G=M[0],K=M[1],H=(0,a.Z)((0,me.Z)("website-social",{}),2),q=H[0],oe=H[1],le=(0,v.useState)(!0),se=le[0],fe=le[1],he=(0,v.useState)(G?G[0]:null),ge=he[0],we=he[1],ke=(0,v.useState)("desktop"),Ne=(ke[0],ke[1]),Ze=(0,v.useState)([]),Ce=Ze[0],Se=Ze[1],_e=(0,v.useState)(null),Pe=_e[0],Ee=_e[1],Oe=(0,v.useState)(!1),De=Oe[0],Fe=Oe[1],We=(0,v.useState)(!1),ze=We[0],Le=We[1],Me=(0,v.useState)(!1),Ge=Me[0],Ke=Me[1],Ve=(0,v.useState)(!1),Je=Ve[0],Ye=Ve[1],Qe=(0,v.useState)(!1),Xe=Qe[0],en=Qe[1],nn=(0,v.useState)(!1),tn=nn[0],ln=nn[1],cn=(0,v.useState)(!1),un=cn[0],dn=cn[1],vn=(0,v.useState)(!1),mn=vn[0],fn=vn[1],pn=(0,v.useState)(!1),xn=pn[0],yn=pn[1],jn=(0,v.useState)(!1),kn=(jn[0],jn[1]),Nn=(0,v.useState)(0),Zn=Nn[0],Cn=Nn[1],Sn=(0,a.Z)((0,me.Z)("websiteBuilder.paywall",""),2),_n=Sn[0],Pn=Sn[1],En=(0,v.useState)(!1),In=En[0],Tn=En[1],Bn=(0,v.useState)(!1),An=Bn[0],On=Bn[1],Dn=(0,v.useState)(!1),Fn=Dn[0],zn=Dn[1],Ln=(0,v.useState)(!1),Mn=Ln[0],Kn=Ln[1],Vn=(0,v.useState)(!1),$n=(Vn[0],Vn[1]),qn=(0,v.useState)(!1),Un=qn[0],Jn=qn[1],Yn=(0,v.useState)(null),Qn=Yn[0],Dt=Yn[1],Ft=(0,v.useState)(!1),Wt=Ft[0],zt=Ft[1],Lt=(0,v.useState)(!1),Mt=Lt[0],Gt=Lt[1],Kt=(0,v.useState)(!1),Vt=Kt[0],$t=Kt[1],Ht=(0,v.useState)(!1),qt=Ht[0],Ut=Ht[1],Jt=(0,v.useState)(null),Yt=Jt[0],Qt=Jt[1],Xt=(0,v.useState)(0),ei=Xt[0],ni=Xt[1],ti=(0,v.useState)(0),ii=ti[0],oi=ti[1],li=(0,v.useState)(!1),si=li[0],ai=li[1],ri=(0,v.useState)(!1),ci=ri[0],ui=ri[1],di=(0,v.useState)(!1),vi=di[0],mi=di[1],fi=(0,v.useState)("Generating..."),pi=fi[0],hi=fi[1],xi=(0,v.useState)([]),gi=xi[0],bi=xi[1],wi=(0,v.useState)(null),yi=wi[0],ji=wi[1],ki=(0,v.useState)([]),Ni=ki[0],Zi=ki[1],Ci=(0,v.useState)(null),Si=Ci[0],_i=Ci[1],Pi=(0,v.useState)([]),Ei=Pi[0],Ii=Pi[1],Ti=(0,v.useState)({active:!1,device:"desktop"}),Bi=Ti[0],Ai=Ti[1],Ri=(0,V.useSession)().data,Oi=(0,Ae.Z)(Yt),Di=Oi.generateBlock,Fi=Oi.chooseTemplate,Wi=(Oi.generateLoadingLabel,(0,ne.useRouter)()),zi=(0,x.Z)(),Li=zi.get,Mi=zi.post,Gi=(zi.remove,(0,rn.Z)().post),Ki=(0,te.Z)(),Vi=Ki.confirm,$i=Ki.ConfirmDialog,Hi=(0,te.Z)(),qi=Hi.confirm,Ui=Hi.ConfirmDialog,Ji=(0,te.Z)(),Yi=Ji.confirm,Qi=Ji.ConfirmDialog,Xi=(0,te.Z)(),eo=Xi.confirm,no=Xi.ConfirmDialog,to=(0,te.Z)(),io=to.confirm,oo=to.ConfirmDialog,lo=(0,Be.Z)(),so=lo.confirm,ao=lo.ConfirmDialog,ro=(0,te.Z)(),co=ro.confirm,uo=ro.ConfirmDialog,vo=(0,v.useRef)(null),mo=(0,v.useState)(""),fo=mo[0],po=mo[1],ho=(0,v.useState)(0),xo=ho[0],go=ho[1],bo=(0,v.useState)(!1),wo=bo[0],yo=bo[1],jo=(0,v.useState)(!1),ko=jo[0],No=jo[1],Zo=(0,v.useState)(!1),Co=Zo[0],So=Zo[1],_o=(0,v.useState)(!1),Po=_o[0],Eo=_o[1],Io=(0,v.useState)(!1),To=Io[0],Bo=Io[1],Ao=(0,v.useState)(null===(e=Wi.query)||void 0===e?void 0:e.routerAction),Ro=Ao[0],Oo=Ao[1],Do=(0,v.useState)(!1),Fo=Do[0],Wo=Do[1],zo=(0,v.useState)({website:{},page:{},selectedPageId:null}),Lo=zo[0],Mo=zo[1],Go=(0,a.Z)((0,me.Z)("month-posts-count",0),2),Ko=Go[0],Vo=Go[1],$o=(0,v.useState)(!1),Ho=$o[0],qo=$o[1],Uo=(0,v.useState)(!1),Jo=Uo[0],Yo=Uo[1],Qo=(0,ie.S)(),Xo=Qo.openSupport,el=Qo.closeSupport,nl=Qo.isOpenSupport;!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldWarn,n=(0,ne.useRouter)();(0,v.useEffect)((function(){var t=function(n){if(e){var t="You have unsaved changes. Are you sure you want to leave?";return n.returnValue=t,t}},i=function(){if(e&&!confirm("You have unsaved changes. Are you sure you want to leave?"))throw n.events.emit("routeChangeError"),"routeChange aborted."};return window.addEventListener("beforeunload",t),n.events.on("routeChangeStart",i),function(){window.removeEventListener("beforeunload",t),n.events.off("routeChangeStart",i)}}),[e,n.events])}({shouldWarn:j&&!_n});var tl=(0,v.useState)([]),il=tl[0],ol=tl[1],ll=(0,v.useState)(null),sl=ll[0],al=ll[1],rl=(0,v.useState)(!1),cl=rl[0],ul=rl[1],dl=(0,v.useState)(!1),vl=dl[0],ml=dl[1],fl=(0,a.Z)((0,me.Z)("website:inline-edit",null,!1),2),pl=(fl[0],fl[1]),hl=(0,a.Z)((0,me.Z)("support.modal",!1),2)[1],xl=(0,a.Z)((0,me.Z)("afterUpgrade"),2),gl=xl[0],bl=xl[1],wl=(0,v.useState)(0),yl=wl[0],jl=wl[1],kl=(0,v.useState)(null),Nl=kl[0],Zl=kl[1],Cl=(0,v.useState)(!1),Sl=Cl[0],_l=Cl[1],Pl=(0,v.useState)(!1),El=Pl[0],Il=Pl[1],Tl=(0,v.useState)(!1),Bl=Tl[0],Al=Tl[1],Rl=(0,v.useState)(!1),Ol=Rl[0],Dl=Rl[1],Fl=(0,v.useState)(null),Wl=(Fl[0],Fl[1],(0,v.useState)(!1)),zl=Wl[0],Ll=Wl[1],Ml=(0,a.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],Gl="blog"===(null===ge||void 0===ge?void 0:ge.type),Kl=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return e.id===(null===ge||void 0===ge?void 0:ge.id)})),Vl=(0,$.Z)().track,$l=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Li("/business/get-config")];case 1:return(n=t.sent())&&!0===n.status&&n.content&&((0,h.Fs)("business.config",n.content),B(n.content),e&&e(n.content)),e&&e(T),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Hl=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,a,r,u,v,m,f,p,x,g,b,w,y,j,k,N;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,Li("/website/get",{populate:!0,withOfficeLocation:!0})];case 1:return(e=c.sent())&&!0===e.status&&e.content?(b=null===(n=e.content)||void 0===n||null===(t=n.Business)||void 0===t||null===(i=t.settings)||void 0===i?void 0:i.ai,(null===(w=(0,s.Z)((0,l.Z)({},e.content),{business:{name:null===(o=e.content)||void 0===o||null===(a=o.Business)||void 0===a?void 0:a.name,vertical:(0,qe.xk)(null===(r=e.content)||void 0===r?void 0:r.Business),location:(0,Ue.P)({office:{address:null===(u=e.content)||void 0===u?void 0:u.completeLocation}}),language:(0,d.YJ)(null===(v=e.content)||void 0===v?void 0:v.Business),categories:null===(m=e.content)||void 0===m||null===(f=m.Business)||void 0===f?void 0:f.categories,description:null===b||void 0===b?void 0:b.description,services:null===b||void 0===b?void 0:b.services,imageQuery:null===b||void 0===b?void 0:b.imageQuery,llmQuery:null===b||void 0===b?void 0:b.llmQuery}}))||void 0===w||null===(p=w.business)||void 0===p?void 0:p.categories)?[3,3]:(y=w.business,[4,(0,qe.RS)(Li,w.business.vertical)])):[3,9];case 2:y.categories=c.sent(),Mi("/business/save-categories",{categories:w.business.categories}),c.label=3;case 3:return(null===w||void 0===w||null===(x=w.business)||void 0===x?void 0:x.imageQuery)||(null===w||void 0===w||null===(g=w.business)||void 0===g?void 0:g.llmQuery)?[3,5]:[4,(0,qe.m2)(Li,w.business.vertical)];case 4:j=c.sent(),k=j.imageQuery,N=j.llmQuery,w.business.imageQuery=k,w.business.llmQuery=N,b&&(b.imageQuery=k,b.llmQuery=N,Mi("/business/save-settings",{path:"ai",value:b})),c.label=5;case 5:return Qt((0,h.p$)(w)),"disabled"!==w.status?[3,7]:[4,Wi.push("/website/settings")];case 6:return c.sent(),[3,8];case 7:w&&!w.generatedAt&&w.generate&&(console.log("Website not generated yet. Generating..."),$n(!0)),c.label=8;case 8:return(0,h.Fs)("website",w),L((0,h.p$)(w)),Mo((function(e){return(0,s.Z)((0,l.Z)({},e),{website:w})})),[2,w];case 9:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ql=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return w(!0),[4,Li("/website/get-pages").catch(console.log)];case 1:return(n=s.sent())&&!0===n.status&&n.content?(t=n.content.map((function(e){return{id:e._id,Parent:e.Parent,name:e.label,slug:e.slug,showOnFooter:e.showOnFooter,showOnHeader:e.showOnHeader,type:e.type,hasPosts:e.hasPosts,fromTemplate:(null===e||void 0===e?void 0:e.fromTemplate)||null}})),(0,h.Fs)("pages",t),K(t),i=n.content.map((function(e){return{id:e._id,slug:e.slug,blocks:F(e.blocks),type:e.type}})),Se(i),(o=n.content.find((function(e){return"blog"===e.type})))&&(0,h.Fs)("website.blog",{id:o._id,hasPosts:o.hasPosts,block:o.blocks.find((function(e){return"blog"===e.WebsiteBlock.type}))}),e?(we(t.find((function(n){return n.id===e}))),ls(i.find((function(n){return n.id===e})))):((l=n.content.find((function(e){return e.default&&null===e.slug})))||(l=n.content.find((function(e){return"parent"!==e.type}))),we(t.find((function(e){return e.id===l._id}))),ls(i.find((function(e){return e.id===l._id})))),w(!1),[2,{pagesMapped:i,pages:t}]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ul=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Li("/website/count-blog-posts-this-month").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content&&Vo(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Jl=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return[4,Mi("/website/add-external-block",{block:e,websiteId:O._id})];case 1:return(n=a.sent())&&!0===(null===n||void 0===n?void 0:n.status)&&(null===n||void 0===n?void 0:n.content)&&((null===(t=n.content)||void 0===t?void 0:t.externalId)?(e.editorUrl=null===(i=n.content)||void 0===i?void 0:i.editorUrl,e.embedCode=null===(o=n.content)||void 0===o?void 0:o.embedCode,e.externalId=null===(l=n.content)||void 0===l?void 0:l.externalId,"common-ninja"===(null===(s=n.content)||void 0===s?void 0:s.source)&&(Eo(!0),Ee(e))):h.Z9.error("Error while adding your block! Try again later.")),[2,e]}}))}));return function(n){return e.apply(this,arguments)}}(),Yl=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return hi("Publishing your website"),mi(!0),e?[4,Mi("/website/toggle-status",{status:"public"})]:[3,2];case 1:if(!(null===(n=t.sent())||void 0===n?void 0:n.status))return h.Z9.error("Error while publishing your website! Try again later."),mi(!1),[2];t.label=2;case 2:return[4,Hl()];case 3:return t.sent(),setTimeout((function(){mi(!1),dn(!0)}),2e3),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ql=function(){var e,n,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&j?co("Save changes?","Save your changes to ".concat(o?"preview":"publish"," your website"),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,ts()];case 1:return e.sent(),[4,(0,h._v)(1500)];case 2:return e.sent(),Ql(!1,o),[2]}}))})),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2]}))}))):"free"===(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?o?(Vl("website:previewed",{}),qo(o),Le(!0)):(""===(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O||O.externalDomain),Vl("account:paywall-click",{context:"publish_flow_top_nav"}),Pn("publish")):o?(es(),Vl("website:previewed",{})):""===(null===O||void 0===O?void 0:O.customDomain)&&""===(null===O||void 0===O?void 0:O.externalDomain)?Dl(!0):Yl(!0)},Xl=function(){var e,n,t,i="active"!==(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e?void 0:e.subscriptionStatus)||"private"===(null===O||void 0===O?void 0:O.status)?"?pt=".concat((0,d.lQ)(null===O||void 0===O?void 0:O._id)):"",o=(0,h.lz)(O),l=o.includes(":7000")?"http://":"https://",s="".concat(l).concat("active"===(null===O||void 0===O||null===(n=O.cloudflare)||void 0===n||null===(t=n.ssl)||void 0===t?void 0:t.status)&&(null===O||void 0===O?void 0:O.domain)?O.domain:o),a=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return e.id===(null===ge||void 0===ge?void 0:ge.id)})),r=(null===a||void 0===a?void 0:a.slug)?"/".concat(a.slug):"",c=(null===Qn||void 0===Qn?void 0:Qn.published)&&(null===Qn||void 0===Qn?void 0:Qn.slug)?"/".concat(Qn.slug):"";return"".concat(s).concat(r).concat(c).concat(i)},es=function(){O&&window.open(Xl(),"_blank")},ns=(function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,Hl().then((function(e){"public"===(null===e||void 0===e?void 0:e.status)&&((null===e||void 0===e?void 0:e.externalDomain)||(null===e||void 0===e?void 0:e.customDomain))&&Vi("Website published!",(0,u.jsxs)(u.Fragment,{children:[(null===e||void 0===e?void 0:e.externalDomain)&&(0,u.jsxs)("div",{children:["Your custom domain name ",(0,u.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.externalDomain})," will be ready soon. This process usually takes around 15 minutes but can take up to a few hours."]}),(null===e||void 0===e?void 0:e.customDomain)&&(0,u.jsxs)("div",{children:["Your linked domain ",(0,u.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.customDomain})," will be ready soon. You'll need to change your DNS records with your registrar to complete this process. ",(0,u.jsx)(ye(),{href:"https://help.durable.co/en/articles/8482657-connect-an-existing-domain-with-entri",children:(0,u.jsx)("a",{className:"link",target:"_blank",children:"Learn more"})})]})]}))}))];case 1:return e.sent(),[2]}}))}))}(),function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return f(e=[]),w(!0),[4,ns(e)];case 1:return n.sent()&&(h.Z9.success("Website is live!"),w(!1),k(!1),Fe(!1)),[2]}}))}))}(),function(){var e=(0,i.Z)((function(e){var n,t,i,o,l,s,a,r;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:n=!0,t=!1,i=void 0,c.label=1;case 1:c.trys.push([1,9,10,11]),o=e[Symbol.iterator](),c.label=2;case 2:if(n=(l=o.next()).done)return[3,8];s=l.value,c.label=3;case 3:return c.trys.push([3,6,,7]),[4,s()];case 4:return c.sent(),[4,(0,h._v)(250)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),h.Z9.error("Error while saving your website! Try again later.".concat(a)),w(!1),[2,!1];case 7:return n=!0,[3,2];case 8:return[3,11];case 9:return r=c.sent(),t=!0,i=r,[3,11];case 10:try{n||null==o.return||o.return()}finally{if(t)throw i}return[7];case 11:return[2,!0]}}))}));return function(n){return e.apply(this,arguments)}}()),ts=function(){var e=(0,i.Z)((function(e){var n,t,o,l,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return e=f(o=[],e),l={favicon:O.favicon,fonts:O.fonts,button:O.button,idTemplate:null===e||void 0===e||null===(n=e.template)||void 0===n?void 0:n.id,idWebsite:null===e||void 0===e||null===(t=e.template)||void 0===t?void 0:t.idWebsite,widgets:O.widgets,animation:O.animation,cornerRadius:O.cornerRadius},O.noPaletteSupport||(l.buttons=O.buttons,l.palette=O.colorPalette),o.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Mi("/website/save",l)];case 1:if(null===(e=n.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))}))),w(!0),[4,ns(o)];case 1:return a.sent()?("public"===O.status?h.Z9.success("Website is live!"):h.Z9.success("Website saved!"),delete e.addBlockPosition,delete e.clearGenerating,Le(!1),w(!1),Ke(!1),So(!1),Fe(!1),Mo({website:(0,h.p$)(O),page:(0,h.p$)(e),selectedPageId:null===e||void 0===e?void 0:e.id}),[4,ql(e.id)]):[3,3];case 2:s=a.sent().pagesMapped,Ds(e.id,s),a.label=3;case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),is=function(e){Gl?_s(sl):j?eo("Discard changes and exit?","Are you sure you want to exit the editor without saving? Any unsaved changes will be discarded.",(0,i.Z)((function(){return(0,c.__generator)(this,(function(n){return Wi.push(e||"/website/dashboard"),[2]}))}))):Wi.push(e||"/website/dashboard")},os=function(e){E(!e)},ls=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.websitePage=(0,h.p$)(e),window.dispatchEvent(new CustomEvent("website-builder-page-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),ss=function(e){for(var n,t=new Date,i=0;i<(null===e||void 0===e||null===(n=e.blocks)||void 0===n?void 0:n.length);i++)e.blocks[i].idx=i;console.log("Change page 1",new Date-t,"ms");var o=(0,h.p$)(Ce),l=o.findIndex((function(n){return n.id===e.id}));console.log("Change page 2",new Date-t,"ms");var s=!0,a=!1,r=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d.blocks[0]=e.blocks[0],d.blocks[d.blocks.length-1]=e.blocks[e.blocks.length-1]}}catch(v){a=!0,r=v}finally{try{s||null==u.return||u.return()}finally{if(a)throw r}}console.log("Change page 3",new Date-t,"ms"),-1!==l&&(o[l]=(0,h.p$)(e),Se(o)),console.log("Change page 4",new Date-t,"ms"),ls(e).catch(console.log),console.log("Change page took",new Date-t,"ms")},as=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.social=e.items,window.socialSettings=e.settings,L((function(n){return(0,s.Z)((0,l.Z)({},n),{social:e.items,socialSettings:e.settings})})),window.dispatchEvent(new CustomEvent("website-builder-social-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),rs=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){return n={favicon:e.favicon,fonts:e.fonts,button:e.button,buttons:e.buttons,colorPalette:e.colorPalette,animation:e.animation,cornerRadius:e.cornerRadius},window.styles=n,e.migratePalette&&(n.noPaletteSupport=!1,n.migratePalette=!0),L((function(e){return(0,l.Z)({},e,n)})),window.dispatchEvent(new CustomEvent("website-builder-styles-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),cs=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,ql(e)];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),us=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return n=e.page,e.pageTemplate,[4,ql(null===n||void 0===n?void 0:n._id)];case 1:return t.sent(),window.dispatchEvent(new CustomEvent("website-builder-changed")),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),ds=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Li("/website/get-blocks").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content&&bi(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}(),vs=function(){var e=(0,i.Z)((function(e,n){var t,i,o;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return zn(!0),i=null!==n&&void 0!==n?n:xo,yo(!1),void 0===(o=(0,h.p$)(window.websitePage)).blocks&&(o.blocks=[]),e={type:e.type,idx:i,WebsiteBlock:e,generating:"block"},o.blocks.splice(i,0,e),o.addBlockPosition=i,window.scrollToBlock=e.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),"durable"!==(null===e||void 0===e||null===(t=e.WebsiteBlock)||void 0===t?void 0:t.source)?[3,2]:(ss(o),[4,Di(e,void 0,void 0,Nl)]);case 1:return e=l.sent(),[3,4];case 2:return[4,Jl(e)];case 3:l.sent(),l.label=4;case 4:return delete e.generating,o.blocks[e.idx]=e,o.clearGenerating=!0,ss(o),window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),zn(!1),(0,d.n2)(e)&&(Ee(e),Fe(!0)),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),ms=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.updatedWidgets=e,window.dispatchEvent(new CustomEvent("handle-widgets-change")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),fs=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return w(!0),No(!1),"durable"!==(null===(e={type:e.type,idx:xo,WebsiteBlock:e,generating:"block"})||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.source)?[3,2]:[4,Di(e,void 0,void 0,Nl)];case 1:return t.sent(),Yo(!0),Ee(e),Bo(!0),[3,4];case 2:return[4,Jl(e)];case 3:t.sent(),L((function(n){var t=(null===n||void 0===n?void 0:n.widgets)?(0,r.Z)(n.widgets).concat([e]):[e];return ms(t),(0,s.Z)((0,l.Z)({},n),{widgets:t})})),t.label=4;case 4:return w(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),ps=function(){var e=(0,i.Z)((function(e,n,t,i,o){var l,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return"durable"!==(null===n||void 0===n||null===(l=n.WebsiteBlock)||void 0===l?void 0:l.source)?[3,2]:[4,Di(n,t,o,Nl,i)];case 1:return n=a.sent(),[3,3];case 2:n=t,a.label=3;case 3:return n.idx===e.blocks.length&&(s=e.blocks[n.idx],e.blocks[n.idx+1]=s),e.blocks[n.idx]=n,e.clearGenerating=!0,ss(e),[2]}}))}));return function(n,t,i,o,l){return e.apply(this,arguments)}}(),hs=function(e,n){var t=e.blocks[e.blocks.length-1],i=1,o=!0,a=!1,r=void 0;try{for(var c,u=function(){var n=c.value,t={type:n.type,WebsiteBlock:gi.find((function(e){var t;return e.type===(null===(t=n.WebsiteBlock)||void 0===t?void 0:t.type)})),idx:i};e.blocks[i]=(0,s.Z)((0,l.Z)({},t),{generating:"block"}),i++},d=n.blocks[Symbol.iterator]();!(o=(c=d.next()).done);o=!0)u()}catch(v){a=!0,r=v}finally{try{o||null==d.return||d.return()}finally{if(a)throw r}}e.blocks.push(t),ss(e)},xs=function(){var e=(0,i.Z)((function(e){var n,t,i,o,a;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return console.log("Generating page..."),(null===e||void 0===e||null===(n=e.blocks)||void 0===n?void 0:n.length)>0&&Ws(!0,"Your page is being generated..."),window.marsUsedPictures=[],t=Ce.find((function(e){return null===e.slug})),i=(0,h.p$)(window.websitePage),ss(i),oi(e.blocks.length+1),hs(i,e),o=[],i.blocks.forEach((function(n,a){if(0!==a&&a!==i.blocks.length-1){var r=(0,d.cq)(t,e.blocks[a-1],e.type),c=null;"service"===e.type&&(c=e.label),o.push(ps(i,i.blocks[a],(0,s.Z)((0,l.Z)({},e.blocks[a-1]),{pageType:e.type,serviceName:c}),r).then((function(){ni((function(e){return e+1}))})))}})),[4,Promise.all(o)];case 1:return r.sent(),ai(!0),[4,ts(i)];case 2:return r.sent(),[4,ql(i.id)];case 3:return a=r.sent().pagesMapped,Ds(i.id,a),ni((function(e){return e+1})),[4,Wi.replace("/website/builder",null,{shallow:!1})];case 4:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),gs=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,l,s,a,r,u;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return console.log("Regenerating page..."),Ws(!0,"Your website is being generated..."),window.marsUsedPictures=[],e=(0,h.p$)(window.websitePage),n=null,e.slug?((n={}).blocks=e.blocks.filter((function(e){return null===e||void 0===e?void 0:e.type})),[3,3]):[3,1];case 1:return l=!(null===O||void 0===O||null===(t=O.template)||void 0===t?void 0:t.WebsiteTemplate)&&(null===O||void 0===O||null===(i=O.template)||void 0===i?void 0:i.Website)?null===O||void 0===O||null===(o=O.template)||void 0===o?void 0:o.Website:null,[4,Fi(l)];case 2:n=c.sent(),c.label=3;case 3:return s=e.blocks[0],a=e.blocks[e.blocks.length-1],e.slug?[3,6]:[4,Di(s,n.header,void 0,Nl)];case 4:return s=c.sent(),[4,Di(a,n.footer,void 0,Nl)];case 5:a=c.sent(),(s.socialSettings||a.socialSettings)&&as({items:null===O||void 0===O?void 0:O.social,settings:s.socialSettings||a.socialSettings}),c.label=6;case 6:return e.blocks=[s,a],oi(n.blocks.length+1),hs(e,n),r=[],e.blocks.forEach((function(t,i){0!==i&&i!==e.blocks.length-1&&r.push(ps(e,e.blocks[i],n.blocks[i-1]).then((function(){ni((function(e){return e+1}))})))})),[4,Promise.all(r)];case 7:return c.sent(),ai(!0),Yt&&!Yt.generatedAt&&Yt.generate?[4,ts(e)]:[3,10];case 8:return c.sent(),[4,ql(e.id)];case 9:u=c.sent().pagesMapped,Ds(e.id,u),_l(!0),c.label=10;case 10:return ni((function(e){return e+1})),Vl("website:page-regenerated",{slug:e.slug,id:e._id}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),bs=function(){var e=(0,i.Z)((function(){var e,n,t,o,l,s,a,r=arguments;return(0,c.__generator)(this,(function(u){switch(u.label){case 0:for(e=function(e){l.blocks[e].generating=n||"block",s.push(new Promise(function(){var t=(0,i.Z)((function(t,i){var o,s,a;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return"durable"!==(null===(s=l.blocks[e])||void 0===s||null===(o=s.WebsiteBlock)||void 0===o?void 0:o.source)?[3,2]:[4,Di(s,null,n)];case 1:return a=i.sent(),[3,3];case 2:a=s,i.label=3;case 3:return l.blocks[e]=a,l.blocks[e].generating=null,ss(l),ni((function(e){return e+1})),t(),[2]}}))}));return function(e,n){return t.apply(this,arguments)}}()))},n=r.length>0&&void 0!==r[0]?r[0]:void 0,Ws(!0,"Your page content is being regenerated..."),l=(0,h.p$)(window.websitePage),console.log("Regenerating all blocks...",l),oi(null===l||void 0===l||null===(t=l.blocks)||void 0===t?void 0:t.length),s=[],a=0;a<(null===l||void 0===l||null===(o=l.blocks)||void 0===o?void 0:o.length);a++)e(a);return ss(l),[4,Promise.all(s)];case 1:return u.sent(),Ws(!1),ss(l),Vl("website:all-blocks-regenerated",{slug:l.slug,id:l._id,randomize:n}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ws=function(){var e=(0,i.Z)((function(e,n){return(0,c.__generator)(this,(function(t){return L(e),rs(e),as({settings:null===e||void 0===e?void 0:e.socialSettings,items:Array.isArray(e.social)?e.social:[]}),ms(e.widgets),ss((0,s.Z)((0,l.Z)({},n),{blocks:[e.header].concat((0,r.Z)(n.blocks),[e.footer])})),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),ys=function(){No(!1),Bo(!1),Le(!1),Ke(!1),So(!1),Fe(!1),Ye(!1),ln(!1),yo(!1),en(!1),Yo(!1),Il(!1),window.closeAllPanels=void 0},js=function(e){},ks=function(e,n){var t,i,o,l,s,a,r=(null===Ri||void 0===Ri||null===(t=Ri.user)||void 0===t||null===(i=t.plan)||void 0===i||null===(o=i.limits)||void 0===o?void 0:o.blogPosts)>=0?null===Ri||void 0===Ri||null===(l=Ri.user)||void 0===l||null===(s=l.plan)||void 0===s||null===(a=s.limits)||void 0===a?void 0:a.blogPosts:-1;-1!==r&&Ko>=r?Pn("manage_posts"):Ps(e,null,n)},Ns=function(e,n){ys(),Ye(e),n&&(!function(){var e,n,t,i,o,l,s,a=(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e||null===(n=e.plan)||void 0===n||null===(t=n.limits)||void 0===t?void 0:t.pages)>=0?null===Ri||void 0===Ri||null===(i=Ri.user)||void 0===i||null===(o=i.plan)||void 0===o||null===(l=o.limits)||void 0===l?void 0:l.pages:-1,r=(null===(s=null===G||void 0===G?void 0:G.filter((function(e){return"blog"!==e.type&&"parent"!==e.type})))||void 0===s?void 0:s.length)||0;return-1===a||r<a}()?Pn("manage_pages"):ln(n))},Zs=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return Ii((0,r.Z)(Ei).concat([Si])),Ni.length>0?(n=(e=Ni).pop(),Zi(e),setTimeout((0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return _i(n),[2]}))})),1e3),[3,3]):[3,1];case 1:return[4,Mi("/ai-workflows/mark-pages-as-created",{createdPages:(0,r.Z)(Ei).concat([Si])})];case 2:t.sent(),_i(null),t.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Cs=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,l,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return i=null===T||void 0===T?void 0:T.business,[4,Gi("/ai/generate",{body:{prompt:"website-post-subjects",data:{vertical:(0,qe.xk)(i),quantity:5},output_language:null!==(o=null===T||void 0===T||null===(e=T.business)||void 0===e||null===(n=e.settings)||void 0===n||null===(t=n.ai)||void 0===t?void 0:t.language)&&void 0!==o?o:"en",stream:!1}})];case 1:return(l=a.sent())&&!0===(null===l||void 0===l?void 0:l.status)&&(null===l||void 0===l?void 0:l.content)&&(s=l.content[Math.floor(Math.random()*l.content.length)],setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-create",{detail:{subject:s}}))}),500)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ss=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return n=e.page,t=e.websitePage,"open-only"!==(i=e.pageTemplate)?[3,4]:(ss(t),we(n),"blog"!==Si?[3,2]:[4,Cs()]);case 1:o.sent(),o.label=2;case 2:return[4,Zs()];case 3:return o.sent(),[2];case 4:return n&&i?(ln(!1),[4,cs(null===n||void 0===n?void 0:n._id)]):[3,10];case 5:return o.sent(),[4,xs(i)];case 6:return o.sent(),we(n),"blog"!==Si?[3,8]:[4,Cs()];case 7:o.sent(),o.label=8;case 8:return[4,Zs()];case 9:o.sent(),o.label=10;case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),_s=function(){var e=(0,i.Z)((function(e,n){var t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return"blog"!==(null===ge||void 0===ge?void 0:ge.type)&&al(null===ge||void 0===ge?void 0:ge.id),e?[3,3]:(t=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return null===e.slug})),we(t),ss(t),(null===t||void 0===t?void 0:t.id)?[4,ql(null===t||void 0===t?void 0:t.id)]:[3,2]);case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:i=null===G||void 0===G?void 0:G.find((function(n){return n.id===e})),we(i),ss(null===Ce||void 0===Ce?void 0:Ce.find((function(n){return n.id===e}))),n||Ye(!1),"blog"!==(null===i||void 0===i?void 0:i.type)&&(Dt(null),Gt(!1)),o.label=4;case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),Ps=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l,s=arguments;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:null,t=s.length>2&&void 0!==s[2]&&s[2],Gl?[3,6]:(i=null===(n=n||Ce)||void 0===n?void 0:n.find((function(e){return"blog"===e.type})))?(we(i),ss(null===n||void 0===n?void 0:n.find((function(e){return e.id===(null===i||void 0===i?void 0:i.id)}))),[3,6]):[3,1];case 1:return w(!0),[4,Mi("/website/create-page",{slug:"blog",label:"Blog",showOnHeader:!0,type:"blog",seo:{title:"Blog"}}).catch(console.log)];case 2:return(o=a.sent())&&!0===o.status&&o.content?(l=o.content._id,[4,ql(l)]):[3,4];case 3:return a.sent(),window.dispatchEvent(new CustomEvent("website-builder-page-created")),[3,5];case 4:h.Z9.error("Error creating the blog page, please try again. ".concat(o.message)),a.label=5;case 5:t&&Cs(),w(!1),a.label=6;case 6:return setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-create",{detail:{subject:e}}))}),500),Vl("website:blog-started"),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Es=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){if("common-ninja"===(null===e||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.source))Ee(e),Eo(!0);return[2]}))}));return function(n){return e.apply(this,arguments)}}(),Is=function(){$t(!0)},Ts=function(){Ut(!0)},Bs=function(){Wo(!0),Ke(!0)},As=function(){var e=setInterval((function(){(null===window||void 0===window?void 0:window.websitePage)&&(clearInterval(e),po("social"),window.editBlock("header"))}),300)},Rs=function(){P||(De&&Fe(!1),Ge&&Ke(!1),Co&&So(!1),Wt&&zt(!1),El&&Il(!1),ko&&No(!1),wo&&yo(!1),tn&&ln(!1))},Os=function(e,n,t){switch(ys(),n){case"style":Ke(!0),So(!1),jl(t);break;case"widget":var i;Ke(!1),(null===O||void 0===O?void 0:O.widgets)&&0!==(null===O||void 0===O||null===(i=O.widgets)||void 0===i?void 0:i.length)?(So(!0),Bo(!1)):No(!0);break;case"blocks":Il(!0),Ke(!1)}},Ds=function(e,n){var t=n.find((function(n){return n.id===e}));if(t){(0,h.$K)(t.type)||delete t.type;for(var i=0;i<t.blocks.length;i++)t.blocks[i].idx=i;Mo((function(n){return(0,s.Z)((0,l.Z)({},n),{page:(0,h.p$)(t),selectedPageId:e})}))}},Fs=function(){Yl(!0).catch((function(){}))},Ws=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";hi(n),zs(e),ui(e),w(e),zn(e),oi(0),ni(0)},zs=function(e){Ml(e),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:e}))};(0,v.useEffect)((function(){"openPublishFlow"===gl&&(Dl(!0),bl(null))}),[gl]),(0,v.useEffect)((function(){var e,n,t,i;!0===(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e||null===(n=e.onboarding)||void 0===n||null===(t=n.tourGuide)||void 0===t?void 0:t.displayTour)&&!b&&Sl&&(ul(!0),ml(!0)),!O||b||Sl||(0,qe.xk)(null===O||void 0===O?void 0:O.Business)||!(0,sn.np)(null===Ri||void 0===Ri||null===(i=Ri.user)||void 0===i?void 0:i.experiments,"signup-first","variant")||Wi.push("/website/onboarding")}),[Ri,b,Sl]),(0,v.useEffect)((function(){var e;ol((e={},(0,o.Z)(e,z.In.IN_EDITOR_WEBSITE_PAGE_REGENERATE,[function(){so("Regenerate page?","Are you sure you want to regenerate this page?","All content, styles, and details for this page will be lost.","to regenerate",(function(){return gs(),!0}))}]),(0,o.Z)(e,z.In.IN_EDITOR_BLOG_POST_CREATE,[function(){var e=(0,i.Z)((function(e,n){return(0,c.__generator)(this,(function(e){return ks(null===n||void 0===n?void 0:n.blogPostTitle),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),{dirty:j,save:ts}]),(0,o.Z)(e,z.In.IN_EDITOR_CREATE_NEW_PAGE,[function(e,n){var t=n.createPageInformation,i=n.createPageType;i&&["about","contact","services"].includes(i)?(t&&Zl(t),_i(i)):Ns(!0,!0)},{dirty:j,save:ts}]),(0,o.Z)(e,z.In.IN_EDITOR_PUBLISH_WEBSITE,[function(){!function(){var e;"active"!==(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e?void 0:e.subscriptionStatus)&&Pn("publish")}()}]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_SOCIAL_LINKS,[As]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_FONT_PAIRINGS,[function(e){po(e),Ke(!0)},"fonts"]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_BUTTON_STYLE,[function(e){po(e),Ke(!0)},"button_style"]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_FAVICON,[function(e){po(e),Ke(!0)},"favicon"]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_THEME,[function(e){po(e),Ke(!0)},null]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_COLOR_PALETTE,[function(e){po(e),Ke(!0)},null]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_ANIMATION,[function(e){po(e),Ke(!0)},null]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_ROUNDED_CORNERS,[function(e){po(e),Ke(!0)},null]),(0,o.Z)(e,z.In.IN_EDITOR_ADD_GLOBAL_WIDGET,[function(){Os(0,"widget")}]),(0,o.Z)(e,z.In.IN_EDITOR_EDIT_HEADER_LOGO,[function(){po("logo"),window.editBlock("header")}]),(0,o.Z)(e,z.In.IN_EDITOR_VIEW_WEBSITE_MOBILE,[function(){Ne("mobile")}]),(0,o.Z)(e,z.In.IN_EDITOR_VIEW_WEBSITE_TABLET,[function(){Ne("tablet")}]),e))}),[Yt,Ce]),(0,v.useEffect)((function(){nl?(Xo(),Un&&Jn(!1)):el()}),[nl]),(0,v.useEffect)((function(){Un&&nl&&el()}),[Un]),(0,v.useEffect)((function(){if(clearTimeout(et),Pe)return et=setTimeout((function(){var e;if("section"===(null===Pe||void 0===Pe||null===(e=Pe.WebsiteBlock)||void 0===e?void 0:e.category)||"external"===Pe.WebsiteBlock.category){var n,t=window.websitePage;"header"===Pe.WebsiteBlock.type?t.blocks[0]=Pe:"footer"===Pe.WebsiteBlock.type?t.blocks[t.blocks.length-1]=Pe:t.blocks[Pe.idx]=Pe,ss(t);["blog","scheduler"].includes(null===Pe||void 0===Pe||null===(n=Pe.WebsiteBlock)||void 0===n?void 0:n.type)||(window.scrollToBlock=Pe.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")))}else if("widget"===Pe.WebsiteBlock.category&&"durable"===Pe.WebsiteBlock.source){var i,o=!1,a=null===(i=O.widgets)||void 0===i?void 0:i.map((function(e){return e.type===Pe.type?(o=!0,Pe):e}));o||(a=a?(0,r.Z)(a).concat([Pe]):[Pe]),L((function(e){return(0,s.Z)((0,l.Z)({},e),{widgets:a})})),ms(a)}}),200),function(){clearTimeout(et)}}),[Pe]),(0,v.useEffect)((function(){if(clearTimeout(et),Qn)return et=setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-changed",{detail:{post:Qn}}))}),200),function(){clearTimeout(undefined)}}),[Qn]),(0,v.useEffect)((function(){return window.click=function(){Rs()},window.scrolled=function(e){kn(e)},window.scrolledDistance=function(e){Cn(e)},window.changePage=function(e){ss(e)},window.reloadPages=function(){ql(null===ge||void 0===ge?void 0:ge.id)},window.activeBlock=function(e){window.dispatchEvent(new CustomEvent("website-builder-active-block-changed",{detail:{active:e}}))},window.addBlock=function(e){go(e),yo(!0)},window.editBlock=function(e,n,t){if(window.websitePage){if("header"===e){var i=window.websitePage.blocks.find((function(e){return"header"===e.WebsiteBlock.type}));Ee(i)}else if("footer"===e){var o=window.websitePage.blocks.find((function(e){return"footer"===e.WebsiteBlock.type}));Ee(o)}else if("blog"===e){var l=window.websitePage.blocks.find((function(e){return"blog"===e.WebsiteBlock.type}));Ee(l)}else{var s=window.websitePage.blocks[e];s.idx=e,Ee(s)}Fe(!n||{item:n,itemIdx:t}),Ke(!1),Bo(!1),So(!1),yo(!1)}},window.closeBlock=function(){Fe(!1)},window.deleteBlock=function(e){Yi("Delete section?","Are you sure you want to delete this section?",(0,i.Z)((function(){var n;return(0,c.__generator)(this,(function(t){return(n=window.websitePage).blocks.splice(e,1),ss(n),[2]}))})))},window.duplicateBlock=function(e){var n=window.websitePage,t=(0,h.p$)(n.blocks[e]);t._id=D()().toString(),n.blocks.splice(e,0,t),ss(n)},window.moveBlock=function(){var e=(0,i.Z)((function(e,n){var t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return t=window.websitePage,i=(0,h.p$)(t.blocks[e]),t.blocks.splice(e,1),t.blocks.splice(e+n,0,i),[4,ss(t)];case 1:return o.sent(),window.scrollToBlock=e+n,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),window.regenerateBlock=function(){var e=(0,i.Z)((function(e,n){var t,i,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return o=(0,h.p$)(e),l=(0,h.p$)(window.websitePage),[4,Di(e,null,n,Nl)];case 1:return e=s.sent(),l.blocks[e.idx]=e,l.clearGenerating=!0,ss(l),"header"!==e.WebsiteBlock.type&&"footer"!==e.WebsiteBlock.type||!e.socialSettings||as({items:null===O||void 0===O?void 0:O.social,settings:e.socialSettings}),(null===e||void 0===e||null===(t=e.spacing)||void 0===t?void 0:t.minHeight)!==(null===o||void 0===o||null===(i=o.spacing)||void 0===i?void 0:i.minHeight)&&(window.scrollToBlock=e.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block"))),Vl("website:block-regenerated",{type:e.WebsiteBlock.type}),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),window.createPost=function(){ks()},window.changePost=function(e){Dt(e)},window.editPost=function(e){Dt(e),Gt(!!e)},window.settingsPost=function(){zt(!0)},window.deletePost=function(e){Yi("Delete blog post?",(0,u.jsxs)(u.Fragment,{children:["Are you sure you want to delete the blog post ",(0,u.jsxs)("span",{className:"font-medium",children:['"',e.title,'"']}),"?"]}),(function(){window.dispatchEvent(new CustomEvent("website-builder-post-delete",{detail:{idPost:e._id}}))}))},window.dirtyPost=function(e){C(e)},window.loadingPost=function(e){w(e)},window.generatingPost=function(e){Kn(e)},window.regeneratePost=function(e){qi("Regenerate blog post?",(0,u.jsxs)(u.Fragment,{children:["Are you sure you want to regenerate the blog post ",(0,u.jsxs)("span",{className:"font-medium",children:['"',e.title,'"']}),"? The current blog post will be deleted and all content and media will be lost."]}),(function(){window.dispatchEvent(new CustomEvent("website-builder-post-regenerate"))}))},window.openPaywall=function(e){Pn(e)},function(){window.click=void 0,window.scrolled=void 0,window.changePage=void 0,window.reloadPages=void 0,window.activeBlock=void 0,window.addBlock=void 0,window.editBlock=void 0,window.deleteBlock=void 0,window.duplicateBlock=void 0,window.moveBlock=void 0,window.regenerateBlock=void 0,window.createPost=void 0,window.changePost=void 0,window.editPost=void 0,window.settingsPost=void 0,window.deletePost=void 0,window.dirtyPost=void 0,window.loadingPost=void 0,window.generatingPost=void 0,window.regeneratePost=void 0,window.openPaywall=void 0,window.closeBlock=void 0,window.scrolledDistance=void 0}}),[ss]),(0,v.useEffect)((function(){var e,n;O&&(oe({settings:null===O||void 0===O?void 0:O.socialSettings,items:Array.isArray(O.social)?O.social:[]}),"public"===(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||fn(!0),"public"!==(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||yn(!0),!1===(null===O||void 0===O?void 0:O.onboardingSurveyCompleted)&&(null===O||void 0===O||null===(e=O.Business)||void 0===e?void 0:e._id)&&(n=O.Business._id,"object"===typeof localStorage&&localStorage.setItem("".concat(n,"-").concat(W),"yes")));_l(!(!O||O&&!O.generatedAt&&O.generate))}),[O]),(0,v.useEffect)((function(){window.dispatchEvent(new CustomEvent("website-builder-page-changed"))}),[G]),(0,v.useEffect)((function(){var e,n,t,i,o,l,s,a,r,c,u,d,v=!1;if("publish"===(null===Wi||void 0===Wi||null===(e=Wi.query)||void 0===e?void 0:e.open)&&O)v=!0;else if("view"===(null===Wi||void 0===Wi||null===(n=Wi.query)||void 0===n?void 0:n.open))Ql(),v=!0;else if("settings"===(null===Wi||void 0===Wi||null===(t=Wi.query)||void 0===t?void 0:t.open)&&O)Ke(!0),v=!0;else if("page"===(null===Wi||void 0===Wi||null===(i=Wi.query)||void 0===i?void 0:i.open)&&(null===Wi||void 0===Wi||null===(o=Wi.query)||void 0===o?void 0:o.id)&&G&&(null===Ce||void 0===Ce?void 0:Ce.length)>0){var m;_s(null===Wi||void 0===Wi||null===(m=Wi.query)||void 0===m?void 0:m.id),v=!0}else if("page"===(null===Wi||void 0===Wi||null===(l=Wi.query)||void 0===l?void 0:l.create))Ns(!0,!0),v=!0;else if("folder"===(null===Wi||void 0===Wi||null===(s=Wi.query)||void 0===s?void 0:s.create))Ns(!0,"folder"),v=!0;else if("page"===(null===Wi||void 0===Wi||null===(a=Wi.query)||void 0===a?void 0:a.edit)&&(null===Wi||void 0===Wi||null===(r=Wi.query)||void 0===r?void 0:r.id)&&G&&(null===Ce||void 0===Ce?void 0:Ce.length)>0&&!Je)Ye(!0);else if(null===Wi||void 0===Wi||null===(c=Wi.query)||void 0===c?void 0:c.blog){var f;ji(null===Wi||void 0===Wi||null===(f=Wi.query)||void 0===f?void 0:f.blog),v=!0}else(null===Wi||void 0===Wi||null===(u=Wi.query)||void 0===u?void 0:u.createPages)?(setTimeout((function(){var e,n=null===Wi||void 0===Wi||null===(e=Wi.query)||void 0===e?void 0:e.createPages.split(","),t=n.pop();Zi(n),_i(t)}),2e3),v=!0):(null===Wi||void 0===Wi||null===(d=Wi.query)||void 0===d?void 0:d.editHeaderLogo)&&(v=!0);v&&Wi.replace("/website/builder",null,{shallow:!1})}),[Wi,Ri,O,G,Ce]),(0,v.useEffect)((function(){fn(!Fn&&!j&&!ze&&"public"!==(null===O||void 0===O?void 0:O.status)&&(!(null===O||void 0===O?void 0:O.customDomain)||!(null===O||void 0===O?void 0:O.externalDomain))),yn(!Fn&&!j&&"public"===(null===O||void 0===O?void 0:O.status)&&(!(null===O||void 0===O?void 0:O.customDomain)||!(null===O||void 0===O?void 0:O.externalDomain))),ze||setTimeout((function(){qo(!1)}),300)}),[Fn,j,ze,O]),(0,v.useEffect)((function(){j?(fn(!1),yn(!1)):("public"===(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||fn(!0),"public"!==(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||yn(!0))}),[j]),(0,v.useEffect)((function(){var e=window.websitePage;e&&ge&&null==e.slug&&Yt&&!Yt.generatedAt&&Yt.generate&&e.blocks.length<=2&&(null===Yt||void 0===Yt?void 0:Yt.business)&&!si&&!ci&&(null===gi||void 0===gi?void 0:gi.length)>0&&O&&(ai(!0),setTimeout((function(){gs()}),2e3))}),[window.websitePage,ge,Yt,gi,O]),(0,v.useEffect)((function(){(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return Ro?((e={createBlogPost:function(){return ks(null,!0)},addSocialLinks:As})[Ro]&&e[Ro](),Oo(null),[4,Wi.push("/website/builder",null,{shallow:!0})]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))()}),[Ro,window.websitePage]),(0,v.useEffect)((function(){var e=De||Wt||Ge||Co;window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:e}})),e||pl(null),Fo&&!Ge&&Wo(!1)}),[De,Wt,Ge,Co]),(0,v.useEffect)((function(){var e=Vt||qt;window.dispatchEvent(new CustomEvent("website-builder-post-media-manage-toggle",{detail:{open:e}}))}),[Vt,qt]),(0,v.useEffect)((function(){(null===Ce||void 0===Ce?void 0:Ce.length)>0&&ge&&(null===Lo||void 0===Lo?void 0:Lo.selectedPageId)!==(null===ge||void 0===ge?void 0:ge.id)&&Ds(ge.id,Ce)}),[Ce,ge,Lo]),(0,v.useEffect)((function(){if(O&&(null===Ce||void 0===Ce?void 0:Ce.length)>0&&ge&&(null===Lo||void 0===Lo?void 0:Lo.selectedPageId)===(null===ge||void 0===ge?void 0:ge.id)&&(null===Lo||void 0===Lo?void 0:Lo.website)&&(null===Lo||void 0===Lo?void 0:Lo.page)){var e=Ce.find((function(e){return e.id===ge.id})),n={website:O,page:e,selectedPageId:ge.id};JSON.stringify(Lo)===JSON.stringify(n)?k(!1):k(!0)}}),[O,Ce,ge,Lo]),(0,v.useEffect)((function(){return ql(),$l(),Hl(),ds(),Ul(),window.addEventListener("openManagePostImage",Is),window.addEventListener("openManagePostVideo",Ts),window.addEventListener("tryPalette",Bs),function(){window.removeEventListener("openManagePostImage",Is),window.removeEventListener("openManagePostVideo",Ts),window.removeEventListener("tryPalette",Bs),vo.current&&clearTimeout(vo.current),window.websitePage=void 0,window.updatedWidgets=void 0}}),[]),(0,v.useEffect)((function(){return window.addEventListener("keyup",js),function(){window.removeEventListener("keyup",js)}}),[_n]),(0,v.useEffect)((function(){setTimeout((0,i.Z)((function(){var e,n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return Ce.length>0&&yi?(n=null===(e=null===G||void 0===G?void 0:G.find((function(e){return"blog"===e.type})))||void 0===e?void 0:e.id)?[4,_s(n)]:[3,3]:[3,4];case 1:return o.sent(),[4,Li("/website/get-post-by-id",{id:yi})];case 2:!0===(null===(t=o.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)&&((i=t.content).publishedAt=i.publishedAt?Y.ou.fromISO(i.publishedAt).toJSDate():null,i.createdAt=i.createdAt?Y.ou.fromISO(i.createdAt).toJSDate():Y.ou.now().toJSDate(),window.dispatchEvent(new CustomEvent("website-builder-post-changed",{detail:{post:i}}))),o.label=3;case 3:ji(null),o.label=4;case 4:return[2]}}))})),1e3)}),[Ce]),(0,v.useEffect)((function(){return window.addEventListener("entri-finished-setup",Fs),function(){window.removeEventListener("entri-finished-setup",Fs)}}),[]),(0,v.useEffect)((function(){Bl&&ys()}),[Bl]),(0,v.useEffect)((function(){!p&&(null===Bi||void 0===Bi?void 0:Bi.active)&&Ai((function(e){return(0,s.Z)((0,l.Z)({},e),{active:!1})}))}),[p,Bi]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ve.Z,{context:_n,open:!!_n&&["premium_widgets","manage_pages","manage_posts","premium_sections","made_with_durable","domain","publish","preview","page_counter","domain_alert","external_domain"].includes(_n),setOpen:function(){return Pn("")},canClose:!0,onBuy:(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,ts()]}))}))}),Jo&&(0,u.jsx)(X.u,{open:Jo,title:"Cookie notice added",buttons:(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{className:"secondary",onClick:function(){return Yo(!1)},children:"Close"}),(0,u.jsx)("a",{className:"button primary",href:"https://help.durable.co/en/articles/8561007-learn-about-cookies-notice-bar",rel:"noreferrer",target:"_blank",children:"Learn more"})]}),setOpen:Yo,contentClassName:"max-w-[420px]",footerHasMarginTop:!1,children:(0,u.jsx)(J.U,{text:"A cookie notice may be sufficient for you, but every business is unique. Make sure you understand the requirements that apply to your website.",variant:"info"})}),(0,u.jsxs)(be(),{children:[(0,u.jsx)("title",{children:"Website builder - Durable"}),(0,u.jsx)("meta",{name:"description",content:"Durable for your business"}),(0,u.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,u.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,u.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,u.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"})]}),(0,u.jsxs)("div",{id:"main-builder",className:"bg-white flex flex-col min-h-dyn lg:min-h-full justify-start no-scrollbar",onClick:Rs,children:[(0,u.jsx)(Te.Z,{track:Vl,website:O,loading:b,disabled:P,generating:Fn,generatingPost:Mn,dirty:Mt?Z:j,blogMode:Gl,postMode:Mt,pages:G,selectedPage:ge,selectedBlock:Pe,selectedPost:Qn,openManage:De,handleOpenManage:Os,openManageWidgets:Co,handleOpenPostAssistant:ks,handleViewWebsite:Ql,openAssistant:Un,setOpenAssistant:Jn,openSupport:function(){return hl(!0)},handleOpenManagePage:Ns,openManagePages:Je,openManagePost:Wt,setDevice:Ne,onExit:function(e){return is(e)},onDiscard:function(){io("Discard changes?","Are you sure you want to close without saving? Any unsaved changes will be discarded.",(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){return e=(0,h.p$)(Lo.website),n=(0,h.p$)(Lo.page),L(e),ss(n),rs(e),as({settings:null===e||void 0===e?void 0:e.socialSettings,items:Array.isArray(e.social)?e.social:[]}),ms(e.widgets),Ke(!1),So(!1),Fe(!1),Bo(!1),[2]}))})))},onSave:function(){return ts()},setOpenChangeTemplate:Al,openChangeTemplate:Bl,setOpenRegenerate:Tn,setOpenRegenerateText:On,onSelectPage:_s,previewMode:Bi,setPreviewMode:Ai}),(0,u.jsx)(on,{track:Vl,generatingPost:Mn,setOpenChangeTemplate:Al,openChangeTemplate:Bl,website:O,page:Kl,onApply:ws,previewMode:Bi,previewUrl:Xl(),blockActions:ci}),b&&!ci&&(0,u.jsx)(ue.Z,{}),(0,u.jsx)(ce.Z,{track:Vl,website:O,dirty:j,pages:G,selectedPage:ge,selectedPost:Qn,loading:b,blogMode:Gl,postMode:Mt,generating:Fn||Mn,openAssistant:Un,setOpenAssistant:Jn,openSupport:function(){return hl(!0)},isOpenSupport:nl,handleOpenManage:Os,handleOpenManagePage:Ns,openManageWidgets:Co,onView:Ql,setOpenChangeTemplate:Al,openChangeTemplate:Bl,setOpenRegenerateText:On,setOpenRegenerate:Tn,onSelectPage:_s,onExit:function(e){return is(e)}})]}),De&&Pe&&function(){var e;if("durable"!==(null===Pe||void 0===Pe||null===(e=Pe.WebsiteBlock)||void 0===e?void 0:e.source)){var n;if("common-ninja"===(null===Pe||void 0===Pe||null===(n=Pe.WebsiteBlock)||void 0===n?void 0:n.source))return(0,u.jsx)(lt,{open:De,setOpen:Fe,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,loading:b,website:O,editWidget:Es})}else{var t={open:De,setOpen:Fe,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,website:O,loading:b};switch(Pe.WebsiteBlock.type){case"header":return(0,u.jsx)(mt,(0,s.Z)((0,l.Z)({},t),{updateSocial:as,scrollToLocation:fo,setScrollToLocation:po,onValid:os,onChangeIcon:function(e){return rs((0,s.Z)((0,l.Z)({},O),{favicon:e}))},onRedirect:is}));case"banner":return(0,u.jsx)(tt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-carousel":return(0,u.jsx)(Bt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-slider-carousel":return(0,u.jsx)(Rn,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-double-slider-carousel":return(0,u.jsx)(Wn,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-progress-bar-carousel":return(0,u.jsx)(Gn,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-grid-cards":return(0,u.jsx)(Hn,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"banner-grid":return(0,u.jsx)(At,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"hero":return(0,u.jsx)(ft,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"quote":return(0,u.jsx)(kt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"gallery":case"image-grid":case"image-carousel":return(0,u.jsx)(dt,(0,l.Z)({},t));case"video":return(0,u.jsx)(Zt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"list":case"service-list":case"team-list":return(0,u.jsx)(ht,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"pricing-table":return(0,u.jsx)(jt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"business-hours":return(0,u.jsx)(_t,(0,l.Z)({},t));case"text":return(0,u.jsx)(Nt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"plain-text":return(0,u.jsx)(Rt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"location":case"map":return(0,u.jsx)(xt,(0,l.Z)({},t));case"contact":return(0,u.jsx)(st,(0,l.Z)({},t));case"embed":return(0,u.jsx)(rt,(0,l.Z)({},t));case"image":return(0,u.jsx)(pt,(0,l.Z)({},t));case"footer":return(0,u.jsx)(ut,(0,s.Z)((0,l.Z)({},t),{updateSocial:as,onValid:os,onPaywall:Pn,onRedirect:is}));case"calendly-scheduling":return(0,u.jsx)(ot,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"instagram":return(0,d.n2)(Pe)?(0,u.jsx)(R,(0,s.Z)((0,l.Z)({},t),{businessConfig:T,getBusinessConfig:$l})):(0,u.jsx)(Tt,(0,l.Z)({},t));case"blog":return(0,u.jsx)(it,(0,l.Z)({},t));case"faq":return(0,u.jsx)(ct,(0,l.Z)({},t));case"google-reviews":return(0,u.jsx)(vt,(0,l.Z)({},t));case"scheduler":return(0,u.jsx)(It,(0,s.Z)((0,l.Z)({},t),{exitConfirm:j?eo:null}));case"cta":return(0,u.jsx)(at,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"logo-showcase":return(0,u.jsx)(Pt,(0,s.Z)((0,l.Z)({},t),{onValid:os}));case"recent-posts":return(0,u.jsx)(Et,(0,l.Z)({},t))}}}(),Wt&&Qn&&(0,u.jsx)(bt,{open:Wt,setOpen:zt,post:Qn,setPost:Dt,rtl:se,setRtl:fe,website:O,onValid:os}),(0,u.jsx)($i,{confirmText:"Got it"}),(0,u.jsx)(Ui,{confirmText:"Regenerate"}),(0,u.jsx)(Qi,{attention:!0}),(0,u.jsx)(no,{confirmText:"Discard and exit",attention:!0}),(0,u.jsx)(oo,{confirmText:"Discard",attention:!0}),(0,u.jsx)(ao,{attention:!0,confirmText:"Regenerate"}),(0,u.jsx)(uo,{confirmText:"Save",cancelText:"Cancel"}),vi&&(0,u.jsx)(ue.Z,{text:pi}),(0,u.jsx)(ee.P,{status:null===O||void 0===O?void 0:O.status,preview:Ho,previewToken:(0,d.lQ)(),open:ze,setOpen:Le,setOpenPaywall:Pn,loading:b,setLoading:w,onPreview:(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,es()]}))})),onPublish:function(){return Yl()}}),!(null===Ri||void 0===Ri||null===(n=Ri.user)||void 0===n?void 0:n.customPlan)&&(0,u.jsx)(je,{open:!Bl&&!cl&&mn&&!Mt&&""===_n&&!ze,scrolledDistance:Zn,onClose:function(){return fn(!1)},onPublish:function(){var e,n;"free"!==(null===Ri||void 0===Ri||null===(e=Ri.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?Yl(!0):(Vl("account:paywall-click",{context:"publish_flow_banner"}),Pn("publish"))}},"publish-alert-key-".concat(cl?"-0":"-1")),(0,u.jsx)(Re.Z,{open:un,setOpen:dn,website:O}),"free"===(null===Ri||void 0===Ri||null===(t=Ri.user)||void 0===t||null===(m=t.plan)||void 0===m?void 0:m.priceId)&&"public"===(null===O||void 0===O?void 0:O.status)&&(0,u.jsx)(xe,{open:!cl&&xn&&!Mt&&""===_n,scrolledDistance:Zn,onClose:function(){return yn(!1)},onAction:function(){return Pn("domain_alert")}},"custom-domain-alert-key-".concat(cl?"-0":"-1")),(0,u.jsx)(Ie,{website:O,open:Ge,setOpen:Ke,tryPalette:Fo,onChange:rs,onPreviewMigration:function(e){var n=(0,h.p$)(window.websitePage),t=!0,i=!1,o=void 0;try{for(var a,r=n.blocks[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var c=a.value;if(e){if(!c.layers||"footer"===c.WebsiteBlock.type&&!c.layers.palette){var u=(0,S.SH)(c,O);c.layers=(0,l.Z)({},c.layers,u),c.layers.image=(0,Q.Dn)(c),c.migratedFromOld=!0}var d;if("header"===c.WebsiteBlock.type?c.layers.palette="color1":"footer"===c.WebsiteBlock.type||"banner"===c.WebsiteBlock.type?c.layers.palette="color2":c.layers.palette=(0,h.kd)(["color3","color4"]),c.button||c.showButton||"contact"===c.WebsiteBlock.type)c.button=(0,s.Z)((0,l.Z)({},c.button),{style:(0,s.Z)((0,l.Z)({},null===(d=c.button)||void 0===d?void 0:d.style),{name:"style1"})})}else{var v;if(c.migratedFromOld?delete c.layers:c.layers.palette="custom",c.button||c.showButton||"contact"===c.WebsiteBlock.type)c.button=(0,s.Z)((0,l.Z)({},c.button),{style:(0,s.Z)((0,l.Z)({},null===(v=c.button)||void 0===v?void 0:v.style),{name:"custom"})})}}}catch(m){i=!0,o=m}finally{try{t||null==r.return||r.return()}finally{if(i)throw o}}ss(n),window.dispatchEvent(new CustomEvent("website-builder-changed",{detail:{previewMigration:e}}))},rtl:se,setRtl:fe,scrollToLocation:fo,setScrollToLocation:po,initialTab:yl}),Je&&!tn&&(0,u.jsx)(gt,{open:Je,setOpen:Ye,currentPage:ge,isOpenCreatePage:tn,setIsOpenCreatePage:ln,isOpenManagePage:Xe,setIsOpenManagePage:en,postsCount:Ko,setOpenPaywall:Pn,onSortEnd:ql,onSelectPage:_s,onCreatePage:Ss,onDuplicatePage:ql,onUpdatePage:us,onCreatePost:Ps}),(0,u.jsx)(pe,{website:Yt,pages:Ce,open:tn,setOpen:ln,aiCreatePageType:Si,websitePages:Ce,onCreatePage:Ss,onCreatePost:ks,closeManagePagesModal:function(){return Ye(!1)}}),(0,u.jsx)(re.Z,{open:Un,setOpen:Jn,contextualAiFunctions:il}),(0,u.jsx)(U,{open:wo,setOpen:yo,setOpenPaywall:Pn,onSelect:vs}),(0,u.jsx)(Ot,{open:El,setOpen:Il,rtl:se,setRtl:fe,websiteToRegenerate:Yt,onChangePage:function(e){return ss(e)}}),Vt&&(0,u.jsx)(wt,{open:Vt,setOpen:$t,rtl:se,setRtl:fe,website:O}),qt&&(0,u.jsx)(yt,{open:qt,setOpen:Ut,rtl:se,setRtl:fe,website:O}),Eo&&(0,u.jsx)(de,{open:Po,setOpen:Eo,block:Pe,refreshWidget:function(e){e&&window.dispatchEvent(new CustomEvent("widget-reload",{detail:e}))}}),To&&(0,u.jsx)(Ct,{open:To,setOpen:Bo,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,loading:b,website:O,onClose:function(){return So(!0)}}),ko&&(0,u.jsx)(ae,{open:ko,setOpen:No,widgets:null===O||void 0===O?void 0:O.widgets,onSelect:fs,setOpenPaywall:Pn}),Co&&(0,u.jsx)(St,{sortWidgets:function(e){L((function(n){return(0,s.Z)((0,l.Z)({},n),{widgets:e})})),ms(e)},open:Co,setOpen:So,rtl:se,setRtl:fe,widgets:null===O||void 0===O?void 0:O.widgets,addWidget:function(){return No(!0)},editWidget:function(e){Ee(e),"common-ninja"===(null===e||void 0===e?void 0:e.WebsiteBlock.source)?Eo(!0):(Bo(!0),So(!1))},deleteWidget:function(e){L((function(n){var t=(null===n||void 0===n?void 0:n.widgets)?n.widgets.filter((function(n){return n.type!==e})):[];return ms(t),(0,s.Z)((0,l.Z)({},n),{widgets:t})}))}}),!Bl&&cl&&vl&&(0,u.jsx)($e,{showOnboarding:!1,onClose:function(){ul(!1)},onOpenAI:function(){Jn(!0)},websitePublished:"public"===(null===O||void 0===O?void 0:O.status)}),(0,u.jsx)(He.Z,{onlyExchangeToken:!0}),(0,u.jsx)(an.Z,{}),Ol&&(0,u.jsx)(gn,{open:Ol,setOpen:Dl,status:null===O||void 0===O?void 0:O.status,website:O,showAlert:mn,onPublish:Yl,setOpenPaywall:Pn,onOpenLinkDomain:function(){Ll(!0),Dl(!1)}}),zl&&(0,u.jsx)(hn.Z,{open:zl,setOpen:Ll,fromBuilder:!0,refreshWebsite:function(){},afterComplete:function(){Ll(!1),Yl(!0).catch((function(){}))},onClose:function(){Ll(!1),Dl(!1)},onBack:function(){Ll(!1),Dl(!0)}}),In&&(0,u.jsx)(wn.Z,{open:In,setOpen:Tn}),An&&(0,u.jsx)(Xn,{open:An,setOpen:On,onRegenerate:function(){bs("text")},setWebsiteToRegenerate:Qt}),(0,u.jsx)(bn.Z,{}),ci&&(0,u.jsx)(nt.m,{show:ci,current:ei,total:ii||8,skipReady:!0,onComplete:function(){Ws(!1),ni(0),oi(0)},text:pi})]})}Ft.auth=!0,Ft.layout=!1},94874:function(e,n,t){"use strict";t.d(n,{VM:function(){return a},oj:function(){return s},p2:function(){return l},rv:function(){return o}});var i=t(3732);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us";return"ca"===e.toLowerCase()?"Province":"State"}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us";return"us"===e.toLowerCase()?"ZIP code":"Postal code"}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us";return"us"===e.toLowerCase()?"label.zipCode":"label.postalCode"}function a(e){var n,t,o="";e&&(o+=e.line1?"".concat(e.line1,", "):"",o+=e.line2?"".concat(e.line2,", "):"",o+=e.city?"".concat(e.city,", "):"",o+=e.state?"".concat(e.state,", "):"",o+=e.country?null!==(t=null===(n=i.hW.find((function(n){return n.code===e.country.toUpperCase()})))||void 0===n?void 0:n.name)&&void 0!==t?t:"".concat(e.country," "):"",o+=e.postalCode?", ".concat(e.postalCode):"");return o.trim()}}},function(e){e.O(0,[7040,8802,6440,7333,696,1033,4544,361,9177,780,3443,5805,8120,6329,1073,3056,9435,7286,2734,1125,2295,6882,1273,1960,31,6748,7865,9024,3004,6214,9774,2888,179],(function(){return n=64938,e(e.s=n);var n}));var n=e.O();_N_E=n}]);