"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2295],{54126:function(e,n,t){var s=t(85893);n.Z=function(){return(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},22295:function(e,n,t){var s=t(47568),a=t(26042),l=t(69396),i=t(97582),r=t(85893),o=t(11355),c=t(37882),u=t(67294),d=t(3732),h=t(26713),m=t(52077),g=t(51121),b=t(80360),v=t(24999),p=t(50899),f=t(4519),y=t(95350),x=t(11163),w=t(11215),j=t(54126),N=t(92265),C=t(72521);n.Z=function(e){var n=e.open,t=e.setOpen,k=e.businessTarget,Z=(0,u.useState)(""),S=Z[0],I=Z[1],F=(0,u.useState)(""),T=F[0],L=F[1],_=(0,u.useState)(""),B=_[0],z=_[1],E=(0,u.useState)(""),R=E[0],A=E[1],O=(0,u.useState)(""),P=O[0],V=O[1],M=(0,u.useState)((0,d.tl)("supported-languages")||[]),W=M[0],H=M[1],q=(0,u.useState)(!1),D=q[0],G=q[1],U=(0,u.useState)(null),X=U[0],Y=U[1],J=(0,u.useState)([]),K=J[0],Q=J[1],$=(0,u.useState)(!1),ee=$[0],ne=$[1],te=(0,f.Z)(),se=te.get,ae=te.post,le=(0,w.Z)(),ie=le.current,re=le.set,oe=le.reloadBusinesses,ce=(0,N.Z)().getAiSettings,ue=(0,x.useRouter)(),de=(0,u.useRef)(null),he=(0,u.useRef)(null),me="regenerate",ge=(0,p.Z)({askUserLocation:!0}),be=ge.data,ve=ge.set,pe=ge.getLocation,fe=ge.getCountries,ye=function(){ee||t(!1)},xe=function(){var e=(0,s.Z)((function(){var e,n,t,s,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=K,n=null,t=null!==be&&void 0!==be?be:{},""===R.trim()?[3,4]:R===(null===be||void 0===be?void 0:be.inline)&&n?[2,{countryId:n,city:t.city,state:t.state,country:t.country,cords:t.cords}]:[4,pe({address:R})];case 1:return(t=i.sent())?(ve((0,l.Z)((0,a.Z)({},t),{inline:R})).catch((function(){})),s=t.countryCode,r=t.country,s&&r?0!==K.length?[3,3]:[4,fe()]:[3,4]):[3,4];case 2:e=i.sent(),Q(e),i.label=3;case 3:return(o=e.find((function(e){return e.code===s.toLowerCase()})))||(o=e.find((function(e){return e.country.toLowerCase().includes(r.toLowerCase())}))),n=null===o||void 0===o?void 0:o.id,Y(n),[2,{countryId:n,city:t.city,state:t.state,country:t.country,cords:t.cords}];case 4:return[2,null]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n="";switch(e){case"name":(!S||""===(null===S||void 0===S?void 0:S.trim())||S.length<5||S.length>60)&&(n="Please enter a valid business name from 5 to 60 characters. If you don't have a name yet, just enter your name."),"business"===(null===S||void 0===S?void 0:S.toLowerCase())&&(n="This business name is not allowed.");break;case"type":T||(n="Please describe your business.");break;case"location":X||(n="We couldn't detect your country, please check if you entered a valid location.");break;case"language":(null===B||void 0===B?void 0:B.code)||(n="Please select a website language.");break;case"confirm":P!==me&&(n="You must type '".concat(me,"' to proceed."));break;case"all":n=!(!(!S||""===(null===S||void 0===S?void 0:S.trim())||S.length<5||S.length>60||"business"===(null===S||void 0===S?void 0:S.toLowerCase()))&&T&&(null===B||void 0===B?void 0:B.code)&&P===me)}return n},je=function(){var e=(0,s.Z)((function(){var e,n,t,s,a,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return ne(!0),[4,xe()];case 1:return e=i.sent(),G(!0),be&&(null===e||void 0===e?void 0:e.countryId)&&!we("all")?(n=k||ie,[4,ae("/business/regenerate-business",{name:S,type:T,language:B,location:R,countryId:e.countryId,idBusiness:null===n||void 0===n?void 0:n._id},!1,!1)]):(ne(!1),[2]);case 2:return(t=i.sent())&&!0===(null===t||void 0===t?void 0:t.status)?((0,d.IT)("website"),s="/website/builder",ue.pathname!==s?[3,3]:(null===window||void 0===window||null===(a=window.location)||void 0===a||a.reload(),[3,7])):[3,9];case 3:return k?[4,re(k,!0,s)]:[3,5];case 4:return i.sent(),[3,7];case 5:return[4,ce()];case 6:i.sent(),ue.push(s).catch((function(){})),i.label=7;case 7:return[4,oe()];case 8:return i.sent(),[3,10];case 9:y.Z.error((null===t||void 0===t||null===(l=t.content)||void 0===l?void 0:l.error)||"Invalid request"),ne(!1),i.label=10;case 10:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=k||ie;if(null===e||void 0===e?void 0:e.language){var n=W.find((function(n){return n.code===e.language}));z(n)}};return(0,u.useEffect)((function(){Ne()}),[W]),(0,u.useEffect)((function(){!function(){var e=k||ie;(null===e||void 0===e?void 0:e.name)&&I(e.name)}(),Ne(),function(){var e=k||ie;L((0,C.xk)(e))}()}),[k,ie]),(0,u.useEffect)((function(){W.length>0||se("/website/languages-supported",{}).then((function(e){if(!0===(null===e||void 0===e?void 0:e.status)){var n=((null===e||void 0===e?void 0:e.content)||[]).map((function(e){return(0,l.Z)((0,a.Z)({},e),{id:e._id})}));H(n),(0,d.Fs)("supported-languages",n)}}))}),[]),(0,r.jsx)(o.u,{show:n,as:u.Fragment,children:(0,r.jsx)(c.V,{as:"div",className:"fixed inset-0 z-100 overflow-hidden",initialFocus:de,onClose:ye,children:(0,r.jsxs)("div",{className:"flex items-end md:items-center justify-center h-full",children:[(0,r.jsx)(o.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(c.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,r.jsx)(o.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,r.jsxs)("div",{className:"relative flex flex-col h-full md:h-auto w-full md:max-w-120 bg-white md:rounded-md md:shadow-xl",children:[ee&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-50 bg-opacity-50 z-100 flex justify-center items-center",children:(0,r.jsx)(j.Z,{})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pl-6 pr-4 py-3",children:[(0,r.jsx)(c.V.Title,{className:"font-semibold",children:"Regenerate entire website"}),(0,r.jsx)("button",{className:"light icon transparent",onClick:ye,children:(0,r.jsx)(h.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{ref:de,className:"flex-1 p-6 overflow-y-auto max-h-[calc(100dvh-136px)]",children:[(0,r.jsxs)("div",{className:"block w-full mb-6",children:[(0,r.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-type",children:"Describe your business"}),(0,r.jsx)(g.Z,{type:"textarea",value:T,onChange:L,placeholder:"E.g. My business is a landscaping company that specializes in residential properties.",error:D?we("type"):"",disabled:ee,autoresize:!0,size:1200,allowNewLines:!0,ref:he,maxHeight:200})]}),(0,r.jsxs)("div",{className:"block w-full mb-6",children:[(0,r.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-name",children:"Business name"}),(0,r.jsx)(g.Z,{id:"regen-website-input-business-name",icon:"BriefcaseIcon",iconClassName:"w-6 h-6 !bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},value:S,onChange:I,placeholder:"Please enter your business name",error:D?we("name"):"",disabled:ee})]}),(0,r.jsxs)("div",{className:"block w-full mb-6",children:[(0,r.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"location",children:"Location"}),be?(0,r.jsx)(v.Z,{icon:"LocationMarkerIcon",iconClassName:"!bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},inlineAddress:null===be||void 0===be?void 0:be.inline,onChange:function(e){return A(e)},error:D?we("location"):"",disabled:ee}):(0,r.jsx)("div",{className:"input",children:"Getting your location..."})]}),(0,r.jsxs)("div",{className:"block w-full mb-6",children:[(0,r.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-language",children:"Website language"}),(0,r.jsx)(b.Z,{inputId:"regen-website-input-business-language",icon:"TranslateIcon",iconClassName:"!bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},values:W,value:B,autocomplete:!0,showSuggestions:!0,placeholder:"Select your website language",onChange:z,showNoResults:!1,showSelectorIcon:!1,showTypingAsOption:!1,error:D?we("language"):"",disabled:ee})]}),(0,r.jsxs)("div",{className:"alert danger mt-6",children:[(0,r.jsx)(h.Z,{icon:"ExclamationIcon"}),(0,r.jsxs)("p",{children:["Clicking ","'Regenerate'"," will delete and replace your ",(0,r.jsx)("strong",{children:"entire"})," website. Only your blog will remain unchanged.",(0,r.jsx)("strong",{children:" This action is irreversible."})]})]}),(0,r.jsxs)("div",{className:"block w-full mt-6",children:[(0,r.jsxs)("label",{className:"text-label mb-4 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-confirm",children:["Type ",(0,r.jsx)("strong",{children:"'".concat(me,"'")})," to proceed."]}),(0,r.jsx)(g.Z,{id:"regen-website-input-confirm",value:P,onChange:V,placeholder:"",error:D?we("confirm"):"",disabled:ee})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 px-6 p-4 border-t border-gray-300",children:[(0,r.jsx)("button",{className:"light",disabled:ee,onClick:ye,children:"Cancel"}),(0,r.jsx)(m.Z,{className:"primary",loading:ee,onClick:je,children:"Regenerate"})]})]})})]})})})}}}]);